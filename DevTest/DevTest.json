[
    {
        "id": "cd61ed81.e8bff",
        "type": "tab",
        "label": "Get CVS on ATB",
        "disabled": false,
        "info": "# Description\nCe test vérifie que l'api CVS retourne des données cohérentes avec CVMP\n\n## Payload\n\n- CVMP2AppliConnexion\n    - L'url de la page de connexion de la plateforme\n    - Ex:\"{{CVMP2AppliProtocol}}://{{CVMP2AppliHost}}:{{CVMP2AppliPort}}\",\n- CVMP2AppliUserLogin\n- CVMP2AppliUserPwd\n- vin\n    - le vin complet a tester\n    - ex : VF7NCAHRMFY541353\n- urlGetCVS\n    - L'url complete permettant de recuperer les données CVS d'un véhicle, avec **le vin dedans.**\n    - {{CVMPApicOutDataPowerProtocol}}://{{CVMPApicOutDataPowerHost}}:{{CVMPApicOutDataPowerPort}}/applications/cvmp/v1/cvs/vehicles/VF7NCAHRMFY541353?client_id={{CVMPApicOutClientId}}&{{CVMPApicOutEnv}}\n"
    },
    {
        "id": "880bc670.400e78",
        "type": "tab",
        "label": "Evol WD2 Open Web node",
        "disabled": false,
        "info": ""
    },
    {
        "id": "66e74838.bd0f58",
        "type": "tab",
        "label": "QC Advance Training : check Vin Information",
        "disabled": false,
        "info": ""
    },
    {
        "id": "8867c178.8bd218",
        "type": "tab",
        "label": "QC Advance Training : SFTP Upload",
        "disabled": false,
        "info": ""
    },
    {
        "id": "b19915ad.889d48",
        "type": "subflow",
        "name": "Go to dashboard 23",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "760959dd.774408"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 540,
                "y": 80,
                "wires": [
                    {
                        "id": "c2950c2e.4cd58",
                        "port": 0
                    }
                ]
            },
            {
                "x": 540,
                "y": 140,
                "wires": [
                    {
                        "id": "c2950c2e.4cd58",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 380,
            "y": 40,
            "wires": [
                {
                    "id": "51ce1f39.d0d9f",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "ecccc741.98fb58",
        "type": "subflow",
        "name": "Reponse http in",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 140,
                "wires": [
                    {
                        "id": "cd174b9f.bbb2c8"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 240,
            "y": 280,
            "wires": [
                {
                    "id": "665aa370.d3783c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "7f40eb05.9ed544",
        "type": "subflow",
        "name": "Service Activation API CVMP w/ VAR",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "c6656df3.7fa1a"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1300,
                "y": 80,
                "wires": [
                    {
                        "id": "81697914.578ed8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1280,
                "y": 160,
                "wires": [
                    {
                        "id": "5b2a4e29.ebce7",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 600,
            "y": 380,
            "wires": [
                {
                    "id": "baf2e17a.dc85d8",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "81fc44c3.b84448",
        "type": "subflow",
        "name": "SF Go to Services",
        "info": "",
        "category": "CVMP Menu actions",
        "in": [
            {
                "x": 60,
                "y": 140,
                "wires": [
                    {
                        "id": "45989714.7453b8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 620,
                "y": 200,
                "wires": [
                    {
                        "id": "4faf12ab.48dc04",
                        "port": 0
                    }
                ]
            },
            {
                "x": 340,
                "y": 260,
                "wires": [
                    {
                        "id": "e09fd674.de63e",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "6f736668.4c2da8",
        "type": "subflow",
        "name": "Default Asyn. Reponse",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 200,
                "wires": [
                    {
                        "id": "b26af6cd.5ee1b8"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 280,
            "y": 300,
            "wires": [
                {
                    "id": "271045e3.11169a",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "29b22af0.17685e",
        "type": "subflow",
        "name": "SF CVMP - Global/Login",
        "info": "",
        "category": "CVMP Actions",
        "in": [
            {
                "x": 40,
                "y": 120,
                "wires": [
                    {
                        "id": "982536a9.7a7e58"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1000,
                "y": 440,
                "wires": [
                    {
                        "id": "8ed1ebbf.ce572",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1340,
                "y": 280,
                "wires": [
                    {
                        "id": "23460841.f431f",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "bcf6ad2e.ac4de8",
        "type": "subflow",
        "name": "SF Go to vehicle ID card",
        "info": "",
        "category": "CVMP Menu actions",
        "in": [
            {
                "x": 40,
                "y": 120,
                "wires": [
                    {
                        "id": "9d0d40c8.c3c81"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 780,
                "y": 240,
                "wires": [
                    {
                        "id": "68669e9f.b4b6c8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 320,
                "y": 300,
                "wires": [
                    {
                        "id": "8a4102fd.d4728",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "86d6daed.e08488",
        "type": "subflow",
        "name": "CVMP API Request",
        "info": "",
        "category": "CVMP API actions",
        "in": [
            {
                "x": 80,
                "y": 60,
                "wires": [
                    {
                        "id": "9ddcaaa3.bb76d8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 860,
                "y": 180,
                "wires": [
                    {
                        "id": "6eb385b0.46867c",
                        "port": 0
                    }
                ]
            },
            {
                "x": 860,
                "y": 220,
                "wires": [
                    {
                        "id": "c3dfaa8a.5b6878",
                        "port": 0
                    },
                    {
                        "id": "6eb385b0.46867c",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "9f6908ed.bb34c8",
        "type": "subflow",
        "name": "Screenshot",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "25b5a809.44d668"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 800,
                "y": 91,
                "wires": [
                    {
                        "id": "60f79d1a.edd7f4",
                        "port": 0
                    },
                    {
                        "id": "6b469ad4.550e8c",
                        "port": 0
                    },
                    {
                        "id": "a502bc05.7345d",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "b95a4c68.bdfef",
        "type": "subflow",
        "name": "Result Backend Server",
        "info": "",
        "category": "",
        "in": [],
        "out": [],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "1cc5ec6.dfaef14",
        "type": "subflow",
        "name": "SF Endpoint - Generate HTML",
        "info": "",
        "category": "CVMP Generic actions",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "525ea6ca.25e68"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1000,
                "y": 80,
                "wires": [
                    {
                        "id": "32404c22.919f34",
                        "port": 0
                    },
                    {
                        "id": "32404c22.919f34",
                        "port": 1
                    },
                    {
                        "id": "4668e9ad.21f838",
                        "port": 1
                    },
                    {
                        "id": "4668e9ad.21f838",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "a07f5af3.937dd",
        "type": "subflow",
        "name": "Go to Configuration",
        "info": "",
        "category": "CVMP Menu actions",
        "in": [
            {
                "x": 100,
                "y": 100,
                "wires": [
                    {
                        "id": "9dca7cfd.637918"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 850,
                "y": 100,
                "wires": [
                    {
                        "id": "1fa3870.4aa8af9",
                        "port": 0
                    }
                ]
            },
            {
                "x": 340,
                "y": 200,
                "wires": [
                    {
                        "id": "6d6a505d.874c5",
                        "port": 0
                    }
                ]
            }
        ],
        "status": {
            "x": 680,
            "y": 240,
            "wires": [
                {
                    "id": "5a9ad41f.ecb9c4",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "1818d22b.fdbbfe",
        "type": "subflow",
        "name": "Check bcall config in Service Details",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 160,
                "wires": [
                    {
                        "id": "7a59d826.4fb958"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1300,
                "y": 180,
                "wires": [
                    {
                        "id": "c9263bf1.b3ee18",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1160,
                "y": 340,
                "wires": [
                    {
                        "id": "6c571fbe.e4f47",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 560,
            "y": 80,
            "wires": [
                {
                    "id": "8530f11.087dc1",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "cdb79ded.f0316",
        "type": "subflow",
        "name": "Check ecall config in Service Details",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "16904776.926ea9"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1340,
                "y": 260,
                "wires": [
                    {
                        "id": "910e1dee.8204a",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1340,
                "y": 320,
                "wires": [
                    {
                        "id": "b12ef936.3881c8",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 360,
            "y": 240,
            "wires": [
                {
                    "id": "18a67b2f.e8ad3d",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "751bbf06.b21d",
        "type": "subflow",
        "name": "Get Current Configuration",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 20,
                "y": 80,
                "wires": [
                    {
                        "id": "cba3180a.f8e1b8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 400,
                "y": 80,
                "wires": [
                    {
                        "id": "cba3180a.f8e1b8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 400,
                "y": 120,
                "wires": [
                    {
                        "id": "cba3180a.f8e1b8",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 300,
            "y": 180,
            "wires": [
                {
                    "id": "91a1154c.88bde8",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "9985edbc.c1e07",
        "type": "subflow",
        "name": "Check configuration is correct for xCall",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 60,
                "wires": [
                    {
                        "id": "a04c9909.1bd428"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1480,
                "y": 260,
                "wires": [
                    {
                        "id": "736db0a3.116af",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1320,
                "y": 340,
                "wires": [
                    {
                        "id": "ceb3d804.3e8708",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 500,
            "y": 340,
            "wires": [
                {
                    "id": "c535042f.b03898",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "f3a92af2.2c1c28",
        "type": "subflow",
        "name": "New Click",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 120,
                "wires": [
                    {
                        "id": "e7ffe4ee.cbd938"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 900,
                "y": 360,
                "wires": [
                    {
                        "id": "f070a14a.7db868",
                        "port": 0
                    }
                ]
            },
            {
                "x": 900,
                "y": 440,
                "wires": [
                    {
                        "id": "b302a5cb.ebf148",
                        "port": 1
                    },
                    {
                        "id": "f802a60f.caec1",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 1230,
            "y": 160,
            "wires": [
                {
                    "id": "a2ebdf0b.50b25",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "9ce5a906.a02df8",
        "type": "subflow",
        "name": "Interface Filter by Time & Direction",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "e418f9ad.e1da58"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1390,
                "y": 480,
                "wires": [
                    {
                        "id": "ebe4f0fc.abe52",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1390,
                "y": 540,
                "wires": [
                    {
                        "id": "9b1a29cd.e01bd8",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "INTERFACE_NAME",
                "type": "str",
                "value": "ServiceData"
            },
            {
                "name": "MESSAGE_DIRECTION",
                "type": "str",
                "value": "All"
            }
        ],
        "color": "#DDAA99",
        "status": {
            "x": 860,
            "y": 80,
            "wires": [
                {
                    "id": "9d9f4d3d.655588",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "b8ee0896.c31708",
        "type": "subflow",
        "name": "Check Interface ServiceData VIN in Request",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 20,
                "wires": [
                    {
                        "id": "fc8b4db5.909"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1000,
                "y": 500,
                "wires": [
                    {
                        "id": "6858410e.5e07b",
                        "port": 0
                    }
                ]
            },
            {
                "x": 980,
                "y": 560,
                "wires": [
                    {
                        "id": "4e159221.b0966c",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 1020,
            "y": 20,
            "wires": [
                {
                    "id": "dd943290.243c3",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "ea24abfa.91b488",
        "type": "subflow",
        "name": "Change Push Record Tab",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "871b0d8e.f13da"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 960,
                "y": 180,
                "wires": [
                    {
                        "id": "a24e44a6.ad1388",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1000,
                "y": 100,
                "wires": [
                    {
                        "id": "2d423ce7.1303f4",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "PUSH_RECORDS_TAB",
                "type": "str",
                "value": "Service Data"
            }
        ],
        "color": "#DDAA99",
        "status": {
            "x": 480,
            "y": 240,
            "wires": [
                {
                    "id": "556114c3.3deeac",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "b04bb7a8.add2d8",
        "type": "subflow",
        "name": "Service Data Push records filter VIN & Time",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 20,
                "y": 80,
                "wires": [
                    {
                        "id": "ade3c043.68286"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1700,
                "y": 160,
                "wires": [
                    {
                        "id": "9d18f974.4c0f48",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1680,
                "y": 220,
                "wires": [
                    {
                        "id": "f7bd2912.274338",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 380,
            "y": 240,
            "wires": [
                {
                    "id": "bac93bdb.82afb",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "5fa31620.c1c078",
        "type": "subflow",
        "name": "Check service data push record status for VIN & Time",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 40,
                "wires": [
                    {
                        "id": "d368c3de.f7dba"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1120,
                "y": 80,
                "wires": [
                    {
                        "id": "d5f1d54c.2155a8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1120,
                "y": 140,
                "wires": [
                    {
                        "id": "f3ed435f.8ff5",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 280,
            "y": 240,
            "wires": [
                {
                    "id": "1752d08b.5f84cf",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "b430ab83.04b7d8",
        "type": "subflow",
        "name": "Trigger Rule Specific Time",
        "info": "",
        "category": "Rule Page",
        "in": [
            {
                "x": 20,
                "y": 80,
                "wires": [
                    {
                        "id": "efbf9e6d.cee46"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1080,
                "y": 280,
                "wires": [
                    {
                        "id": "50085537.d7a24c",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1160,
                "y": 120,
                "wires": [
                    {
                        "id": "f0a4ec77.63987",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "RULE_NAME",
                "type": "str",
                "value": "CVS"
            }
        ],
        "color": "#DDAA99",
        "outputLabels": [
            "",
            "Error"
        ],
        "status": {
            "x": 320,
            "y": 340,
            "wires": [
                {
                    "id": "e2d05fe8.c95d28",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "2359ccd.4db1234",
        "type": "subflow",
        "name": "Filter SFTP ",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 20,
                "wires": [
                    {
                        "id": "3d341074.2aad8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1320,
                "y": 140,
                "wires": [
                    {
                        "id": "ba4c3b96.a84348",
                        "port": 0
                    }
                ]
            },
            {
                "x": 660,
                "y": 240,
                "wires": [
                    {
                        "id": "98279a98.fa55c8",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "SERVER_NAME",
                "type": "str",
                "value": ""
            }
        ],
        "color": "#DDAA99",
        "status": {
            "x": 400,
            "y": 320,
            "wires": [
                {
                    "id": "b728d51.8f3d928",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "24805e57.2569c2",
        "type": "subflow",
        "name": "Check SFTP File",
        "info": "",
        "category": "SFTP Servers Page",
        "in": [
            {
                "x": 20,
                "y": 80,
                "wires": [
                    {
                        "id": "a480e5b5.ec3258"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1160,
                "y": 360,
                "wires": [
                    {
                        "id": "ca58304a.1fcd2",
                        "port": 0
                    }
                ]
            },
            {
                "x": 520,
                "y": 440,
                "wires": [
                    {
                        "id": "bd29ac5e.96f21",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "SERVER_NAME",
                "type": "str",
                "value": "CORVET"
            }
        ],
        "color": "#DDAA99",
        "status": {
            "x": 300,
            "y": 520,
            "wires": [
                {
                    "id": "e9960406.0bad68",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "4a6cce55.547d",
        "type": "subflow",
        "name": "Set service Type filter",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 120,
                "y": 160,
                "wires": [
                    {
                        "id": "3766ee18.8a8ef2"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1000,
                "y": 160,
                "wires": [
                    {
                        "id": "65e4efa0.8aebd",
                        "port": 0
                    }
                ]
            },
            {
                "x": 960,
                "y": 260,
                "wires": [
                    {
                        "id": "824893a2.132e5",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "SERVICE_TYPE",
                "type": "str",
                "value": "3"
            }
        ],
        "color": "#DDAA99",
        "status": {
            "x": 540,
            "y": 260,
            "wires": [
                {
                    "id": "13635b31.47dc7d",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "b5c7d99e.160228",
        "type": "subflow",
        "name": "Set Message Type filter",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "330c1f96.1256a"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 940,
                "y": 80,
                "wires": [
                    {
                        "id": "997f3512.8466a8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 940,
                "y": 120,
                "wires": [
                    {
                        "id": "e9b03c87.9cd5f",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "MESSAGE_TYPE",
                "type": "str",
                "value": "5"
            }
        ],
        "color": "#DDAA99",
        "status": {
            "x": 480,
            "y": 160,
            "wires": [
                {
                    "id": "83861e39.25be88",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "3a3b63cb.52d36c",
        "type": "subflow",
        "name": "Set type filter & check message valid",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 20,
                "y": 80,
                "wires": [
                    {
                        "id": "c073104c.d8839"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1320,
                "y": 260,
                "wires": [
                    {
                        "id": "3f32580d.e8cee8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 820,
                "y": 440,
                "wires": [
                    {
                        "id": "ae68bca2.a4add",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "MESSAGETYPE",
                "type": "str",
                "value": "3"
            },
            {
                "name": "SERVICETYPE",
                "type": "str",
                "value": "6"
            }
        ],
        "color": "#DDAA99",
        "status": {
            "x": 380,
            "y": 320,
            "wires": [
                {
                    "id": "3fdb87c6.db015",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "6149c004.95ded",
        "type": "subflow",
        "name": "Check message for 4 messages",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 40,
                "wires": [
                    {
                        "id": "cbddb91b.a0c8c8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 560,
                "y": 220,
                "wires": [
                    {
                        "id": "9ce48a2.d56d478",
                        "port": 0
                    }
                ]
            },
            {
                "x": 560,
                "y": 140,
                "wires": [
                    {
                        "id": "cbddb91b.a0c8c8",
                        "port": 1
                    },
                    {
                        "id": "a34ec4e4.210118",
                        "port": 1
                    },
                    {
                        "id": "5684c35b.3570cc",
                        "port": 1
                    },
                    {
                        "id": "9ce48a2.d56d478",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "MESSAGE_TYPE_1",
                "type": "str",
                "value": "1"
            },
            {
                "name": "SERVICE_TYPE_1",
                "type": "str",
                "value": "2"
            },
            {
                "name": "MESSAGE_TYPE_2",
                "type": "str",
                "value": "3"
            },
            {
                "name": "SERVICE_TYPE_2",
                "type": "str",
                "value": "4"
            },
            {
                "name": "MESSAGE_TYPE_3",
                "type": "str",
                "value": "5"
            },
            {
                "name": "SERVICE_TYPE_3",
                "type": "str",
                "value": "6"
            },
            {
                "name": "MESSAGE_TYPE_4",
                "type": "str",
                "value": "7"
            },
            {
                "name": "SERVICE_TYPE_4",
                "type": "str",
                "value": "8"
            }
        ],
        "color": "#DDAA99",
        "status": {
            "x": 280,
            "y": 300,
            "wires": [
                {
                    "id": "478d9428.596834",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "1b39a4d6.d6793b",
        "type": "subflow",
        "name": "Go to Home > More > Message",
        "info": "",
        "category": "Home Page",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "c58bcbd6.45dee8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 820,
                "y": 80,
                "wires": [
                    {
                        "id": "b45e9488.f26008",
                        "port": 0
                    }
                ]
            },
            {
                "x": 320,
                "y": 160,
                "wires": [
                    {
                        "id": "c58bcbd6.45dee8",
                        "port": 1
                    },
                    {
                        "id": "29018413.6cf74c",
                        "port": 1
                    },
                    {
                        "id": "b45e9488.f26008",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 340,
            "y": 20,
            "wires": [
                {
                    "id": "3194774e.76901",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "462981d8.a1f2",
        "type": "subflow",
        "name": "Go to Home > More > Message and search VIN & time",
        "info": "",
        "category": "Message Page",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "1eb4bca3.4abbf3"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1520,
                "y": 200,
                "wires": [
                    {
                        "id": "ace983f4.ed3a2",
                        "port": 0
                    }
                ]
            },
            {
                "x": 860,
                "y": 300,
                "wires": [
                    {
                        "id": "6e838cd0.c99a84",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 360,
            "y": 20,
            "wires": [
                {
                    "id": "5ea5e3b.fe2281c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "f9f50007.e950f8",
        "type": "subflow",
        "name": "SF Go to Basic Information",
        "info": "",
        "category": "CVMP Menu actions",
        "in": [
            {
                "x": 60,
                "y": 120,
                "wires": [
                    {
                        "id": "5e09392e.4c6a8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 620,
                "y": 180,
                "wires": [
                    {
                        "id": "e4eac1c6.18d708",
                        "port": 0
                    }
                ]
            },
            {
                "x": 340,
                "y": 240,
                "wires": [
                    {
                        "id": "fbfcd652.d187a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 620,
            "y": 100,
            "wires": [
                {
                    "id": "28a0fbbe.30044c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "af3dae75.b452c8",
        "type": "subflow",
        "name": "SF Check Service Activation",
        "info": "",
        "category": "CVMP Check actions",
        "in": [
            {
                "x": 40,
                "y": 160,
                "wires": [
                    {
                        "id": "3a48c8a0.81805"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 580,
                "y": 280,
                "wires": [
                    {
                        "id": "23a2f97e.a83966",
                        "port": 0
                    }
                ]
            },
            {
                "x": 480,
                "y": 320,
                "wires": [
                    {
                        "id": "4c085e81.fcfe18",
                        "port": 0
                    },
                    {
                        "id": "3b5fd16e.7c7cee",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 320,
            "y": 460,
            "wires": [
                {
                    "id": "6457dcc3.18133c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "3dccc5b3.b84eda",
        "type": "subflow",
        "name": "Go to Operation",
        "info": "",
        "category": "CVMP Menu actions",
        "in": [
            {
                "x": 100,
                "y": 100,
                "wires": [
                    {
                        "id": "61c87816.592898"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1020,
                "y": 100,
                "wires": [
                    {
                        "id": "4b1c2adb.d376fc",
                        "port": 0
                    }
                ]
            },
            {
                "x": 340,
                "y": 200,
                "wires": [
                    {
                        "id": "6761d99.e997ca8",
                        "port": 0
                    }
                ]
            }
        ],
        "status": {
            "x": 740,
            "y": 260,
            "wires": [
                {
                    "id": "f73d35b.dbdcc48",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "5f6ef3ce.55aacc",
        "type": "subflow",
        "name": "Operation dropdown select operation type",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 20,
                "y": 80,
                "wires": [
                    {
                        "id": "591dee17.07f6e"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1200,
                "y": 160,
                "wires": [
                    {
                        "id": "8cdd13c0.b896",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1200,
                "y": 220,
                "wires": [
                    {
                        "id": "7b4c6249.84355c",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "OPERATION_TYPE",
                "type": "str",
                "value": "Activation"
            }
        ],
        "color": "#DDAA99",
        "status": {
            "x": 600,
            "y": 60,
            "wires": [
                {
                    "id": "7269a566.ff0e1c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "930871cf.30619",
        "type": "subflow",
        "name": "Go to operation & search an activation",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "3ffd3938.970436"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1340,
                "y": 220,
                "wires": [
                    {
                        "id": "c458fdfb.1be4",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1260,
                "y": 280,
                "wires": [
                    {
                        "id": "71357315.b05efc",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 780,
            "y": 60,
            "wires": [
                {
                    "id": "d09ea6da.ebeb7",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "8eb218a.2f83de8",
        "type": "subflow",
        "name": "Calendar set seconds",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 120,
                "wires": [
                    {
                        "id": "d71a6a36.9af9d8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 760,
                "y": 240,
                "wires": [
                    {
                        "id": "e551237d.4652b",
                        "port": 1
                    }
                ]
            },
            {
                "x": 760,
                "y": 320,
                "wires": [
                    {
                        "id": "fa2edf7b.7fee",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 780,
            "y": 60,
            "wires": [
                {
                    "id": "435366aa.99ab1",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "28f74545.b7c9ca",
        "type": "subflow",
        "name": "Calendar set minutes",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 140,
                "wires": [
                    {
                        "id": "f680c913.5c6078"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 660,
                "y": 260,
                "wires": [
                    {
                        "id": "73a3d6cb.1e0f38",
                        "port": 1
                    }
                ]
            },
            {
                "x": 760,
                "y": 340,
                "wires": [
                    {
                        "id": "6fa7502d.265be",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 720,
            "y": 60,
            "wires": [
                {
                    "id": "6c525994.128a78",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "29a3e612.a2b0ea",
        "type": "subflow",
        "name": "Calendar set hours",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 140,
                "wires": [
                    {
                        "id": "a9224780.2b67b8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 690,
                "y": 260,
                "wires": [
                    {
                        "id": "6fa8279b.74e228",
                        "port": 1
                    }
                ]
            },
            {
                "x": 760,
                "y": 340,
                "wires": [
                    {
                        "id": "6e116dbb.347324",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 760,
            "y": 80,
            "wires": [
                {
                    "id": "c7b9ce9.b95a2b",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "abca0904.8a4708",
        "type": "subflow",
        "name": "Calendar set time",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 20,
                "y": 80,
                "wires": [
                    {
                        "id": "86b8baaf.8c3408"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1100,
                "y": 180,
                "wires": [
                    {
                        "id": "1617f768.7d4b29",
                        "port": 0
                    }
                ]
            },
            {
                "x": 740,
                "y": 260,
                "wires": [
                    {
                        "id": "c1cc7404.8f5018",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "HOURS",
                "type": "str",
                "value": ""
            },
            {
                "name": "MINUTES",
                "type": "str",
                "value": ""
            },
            {
                "name": "SECONDS",
                "type": "str",
                "value": ""
            }
        ],
        "color": "#DDAA99",
        "status": {
            "x": 820,
            "y": 80,
            "wires": [
                {
                    "id": "dbb33fa9.cdaeb8",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "f0d537fb.475f38",
        "type": "subflow",
        "name": "SF Function Check Message Trace and Time",
        "info": "",
        "category": "CVMP Check actions",
        "in": [
            {
                "x": 40,
                "y": 100,
                "wires": [
                    {
                        "id": "cd82e275.6014b8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1120,
                "y": 280,
                "wires": [
                    {
                        "id": "db29927f.3724b8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 720,
                "y": 360,
                "wires": [
                    {
                        "id": "fe2aea59.ca3fa8",
                        "port": 0
                    },
                    {
                        "id": "fe2aea59.ca3fa8",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 940,
            "y": 80,
            "wires": [
                {
                    "id": "7390a63.3e60f58",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "6f3eaa45.18d424",
        "type": "subflow",
        "name": "SF Go to Message Trace",
        "info": "",
        "category": "CVMP Menu actions",
        "in": [
            {
                "x": 80,
                "y": 120,
                "wires": [
                    {
                        "id": "4967056c.988ee4"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 640,
                "y": 180,
                "wires": [
                    {
                        "id": "80e2cd49.378d48",
                        "port": 0
                    }
                ]
            },
            {
                "x": 360,
                "y": 240,
                "wires": [
                    {
                        "id": "7ea1917e.175f68",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 640,
            "y": 80,
            "wires": [
                {
                    "id": "8502dff.478c02",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "349e670.c88bc1a",
        "type": "subflow",
        "name": "SF Function Check Message Trace and ID",
        "info": "",
        "category": "CVMP Check actions",
        "in": [
            {
                "x": 80,
                "y": 100,
                "wires": [
                    {
                        "id": "421b49ab.cf7968"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1180,
                "y": 280,
                "wires": [
                    {
                        "id": "71a34291.b12b14",
                        "port": 0
                    }
                ]
            },
            {
                "x": 720,
                "y": 380,
                "wires": [
                    {
                        "id": "779bea34.8d039c",
                        "port": 0
                    },
                    {
                        "id": "779bea34.8d039c",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 880,
            "y": 460,
            "wires": [
                {
                    "id": "f4e774dc.7355b",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "ddd5df1a.1e578",
        "type": "subflow",
        "name": "Check Message Trace 4 messages",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 100,
                "wires": [
                    {
                        "id": "1c1e99c.2236e66"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 800,
                "y": 520,
                "wires": [
                    {
                        "id": "895ba5c.7b2e058",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1540,
                "y": 260,
                "wires": [
                    {
                        "id": "5c72d8c8.834aa8",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "MESSAGE_TYPE_1",
                "type": "str",
                "value": "8"
            },
            {
                "name": "SERVICE_TYPE_1",
                "type": "str",
                "value": "7"
            },
            {
                "name": "MESSAGE_TYPE_2",
                "type": "str",
                "value": "16"
            },
            {
                "name": "SERVICE_TYPE_2",
                "type": "str",
                "value": "9"
            },
            {
                "name": "MESSAGE_TYPE_3",
                "type": "str",
                "value": "8"
            },
            {
                "name": "SERVICE_TYPE_3",
                "type": "str",
                "value": "7"
            },
            {
                "name": "MESSAGE_TYPE_4",
                "type": "str",
                "value": "16"
            },
            {
                "name": "SERVICE_TYPE_4",
                "type": "str",
                "value": "9"
            }
        ],
        "color": "#DDAA99",
        "status": {
            "x": 700,
            "y": 40,
            "wires": [
                {
                    "id": "8165a4d5.f803e",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "7e7a50da.2697",
        "type": "subflow",
        "name": "Go to OTA Server",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "892b3131.c5b6a"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 820,
                "y": 220,
                "wires": [
                    {
                        "id": "ccd3aef1.440e",
                        "port": 0
                    }
                ]
            },
            {
                "x": 580,
                "y": 340,
                "wires": [
                    {
                        "id": "389817e5.8840b",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 940,
            "y": 60,
            "wires": [
                {
                    "id": "96366842.a7e31",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "e5bc796e.cf9db8",
        "type": "subflow",
        "name": "Go to SIM Card",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 220,
                "wires": [
                    {
                        "id": "a8c94236.5621a"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1500,
                "y": 280,
                "wires": [
                    {
                        "id": "d49efc30.50b91",
                        "port": 0
                    }
                ]
            },
            {
                "x": 320,
                "y": 340,
                "wires": [
                    {
                        "id": "d72ad4d0.0adf08",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 560,
            "y": 120,
            "wires": [
                {
                    "id": "4ddcd49f.3843bc",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "7101d321.417efc",
        "type": "subflow",
        "name": "Go to TBOX Card",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 120,
                "y": 200,
                "wires": [
                    {
                        "id": "3b7ca899.e361c8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1680,
                "y": 260,
                "wires": [
                    {
                        "id": "57d355a4.7beacc",
                        "port": 0
                    }
                ]
            },
            {
                "x": 420,
                "y": 320,
                "wires": [
                    {
                        "id": "3f07ddab.e630b2",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 620,
            "y": 120,
            "wires": [
                {
                    "id": "a804c65f.303138",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "50a6095e.4fbe9",
        "type": "subflow",
        "name": "SF Check the Good Instanciation",
        "info": "",
        "category": "CVMP Check actions",
        "in": [
            {
                "x": 60,
                "y": 120,
                "wires": [
                    {
                        "id": "9c70eccc.ccb8f8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 600,
                "y": 220,
                "wires": [
                    {
                        "id": "8cafa641.2e374",
                        "port": 0
                    }
                ]
            },
            {
                "x": 300,
                "y": 300,
                "wires": [
                    {
                        "id": "47ecb87c.d4756",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 600,
            "y": 40,
            "wires": [
                {
                    "id": "4076a510.f80a7c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "381b8fc4.dee9d",
        "type": "subflow",
        "name": "SF Upload Corvet file on server via SFTP",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 100,
                "wires": [
                    {
                        "id": "83da3c01.f9c98"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1040,
                "y": 260,
                "wires": [
                    {
                        "id": "9f334bae.2c4bc8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1040,
                "y": 320,
                "wires": [
                    {
                        "id": "9f334bae.2c4bc8",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 340,
            "y": 40,
            "wires": [
                {
                    "id": "74203029.a29d4",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "98aa82b9.7d7c5",
        "type": "subflow",
        "name": "SF Upload MM&Bytel file on server via SFTP",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 120,
                "wires": [
                    {
                        "id": "8b91f9ab.9d2fb8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1100,
                "y": 320,
                "wires": [
                    {
                        "id": "d45a9a5b.73fcd8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1100,
                "y": 380,
                "wires": [
                    {
                        "id": "d45a9a5b.73fcd8",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 300,
            "y": 40,
            "wires": [
                {
                    "id": "a2505c95.030fd8",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "a450d1fa.a4ffb8",
        "type": "subflow",
        "name": "SF Upload files on server via SFTP",
        "info": "",
        "category": "CVMP Actions",
        "in": [
            {
                "x": 40,
                "y": 160,
                "wires": [
                    {
                        "id": "471b44c9.d1d57c"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 920,
                "y": 280,
                "wires": [
                    {
                        "id": "79e39ba.997f764",
                        "port": 0
                    }
                ]
            },
            {
                "x": 380,
                "y": 360,
                "wires": [
                    {
                        "id": "748ce3df.19866c",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 380,
            "y": 60,
            "wires": [
                {
                    "id": "c56acf10.a09758",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "12c987d4.0f99e",
        "type": "subflow",
        "name": "SF Delete BTA on AVMS",
        "info": "",
        "category": "CVMP API actions",
        "in": [
            {
                "x": 80,
                "y": 140,
                "wires": [
                    {
                        "id": "b9c9419f.f68808"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1280,
                "y": 500,
                "wires": [
                    {
                        "id": "c1cf20a9.01e0b",
                        "port": 0
                    }
                ]
            },
            {
                "x": 360,
                "y": 500,
                "wires": [
                    {
                        "id": "ba0c3585.20b7c8",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 560,
            "y": 40,
            "wires": [
                {
                    "id": "bc4ef5cf.67b0f8",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "119d616e.e33e0f",
        "type": "subflow",
        "name": "SF Delete a Vehicule (CVMP)",
        "info": "",
        "category": "CVMP Actions",
        "in": [
            {
                "x": 40,
                "y": 140,
                "wires": [
                    {
                        "id": "a21f6458.7eced"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1120,
                "y": 420,
                "wires": [
                    {
                        "id": "c0ca2d51.c037a",
                        "port": 0
                    }
                ]
            },
            {
                "x": 940,
                "y": 500,
                "wires": [
                    {
                        "id": "c84a4b0c.a35228",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 600,
            "y": 60,
            "wires": [
                {
                    "id": "6a8c577f.9f92c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "9d071bf6.10a1e8",
        "type": "subflow",
        "name": "Click on start in process_basic_europe",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "76863376.89f23c"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 920,
                "y": 380,
                "wires": [
                    {
                        "id": "ded4df3b.b7f088",
                        "port": 0
                    }
                ]
            },
            {
                "x": 920,
                "y": 440,
                "wires": [
                    {
                        "id": "4dc24c12.3cca84",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 1540,
            "y": 500,
            "wires": [
                {
                    "id": "a3951d4b.86ddd8",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "af30b276.c9bde8",
        "type": "subflow",
        "name": "SF Run CVMP Instanciation",
        "info": "",
        "category": "CVMP Actions",
        "in": [
            {
                "x": 80,
                "y": 120,
                "wires": [
                    {
                        "id": "564c86fd.84dae"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1540,
                "y": 320,
                "wires": [
                    {
                        "id": "f8084f84.2f3d48",
                        "port": 0
                    }
                ]
            },
            {
                "x": 360,
                "y": 380,
                "wires": [
                    {
                        "id": "66b6fc42.2fa3d4",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 540,
            "y": 40,
            "wires": [
                {
                    "id": "259703da.0afccc",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "fed8e1e7.383d6",
        "type": "tls-config",
        "name": "CVMP2 Certificat",
        "cert": "",
        "key": "",
        "ca": "",
        "certname": "CVMP_MWPCVD03.cer",
        "keyname": "MWPCVD03.key",
        "caname": "",
        "servername": "",
        "verifyservercert": false
    },
    {
        "id": "c85108ff.5837d8",
        "type": "http proxy",
        "z": "ecccc741.98fb58",
        "name": "",
        "url": "",
        "noproxy": [
            "localhost"
        ]
    },
    {
        "id": "c2950c2e.4cd58",
        "type": "navigate",
        "z": "b19915ad.889d48",
        "name": "Go To Dashboard 23",
        "url": "",
        "navType": "to",
        "waitFor": 500,
        "x": 360,
        "y": 80,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "760959dd.774408",
        "type": "function",
        "z": "b19915ad.889d48",
        "name": "Set url",
        "func": "msg.url = msg.var.CVMP2AppliConnexion + \"/index.html#/dashboard/superset/Overview/23\"\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 80,
        "wires": [
            [
                "c2950c2e.4cd58"
            ]
        ]
    },
    {
        "id": "51ce1f39.d0d9f",
        "type": "status",
        "z": "b19915ad.889d48",
        "name": "",
        "scope": null,
        "x": 270,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "1e337481.16c3bb",
        "type": "function",
        "z": "ecccc741.98fb58",
        "name": "Synchrone response",
        "func": "msg.payload = msg.traces;\n\n\nif(msg.traces.every(x => x.status.includes(\"OK\"))){\n    msg.statusCode=200\n}else {\n    msg.statusCode=400\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 460,
        "y": 280,
        "wires": [
            [
                "aab3c648.fe1348",
                "3a3dd919.077b46"
            ]
        ]
    },
    {
        "id": "3a3dd919.077b46",
        "type": "debug",
        "z": "ecccc741.98fb58",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 160,
        "wires": []
    },
    {
        "id": "665aa370.d3783c",
        "type": "status",
        "z": "ecccc741.98fb58",
        "name": "",
        "scope": null,
        "x": 120,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "6c1f0666.5dfcf8",
        "type": "function",
        "z": "7f40eb05.9ed544",
        "name": "Set headers & url",
        "func": "msg.var.headers = \"Content-Type: application/xml\"\nmsg.var.method = \"POST\"\nmsg.var.url = msg.var.UrlAPI\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 610,
        "y": 80,
        "wires": [
            [
                "685f852e.d54eac"
            ]
        ]
    },
    {
        "id": "685f852e.d54eac",
        "type": "function",
        "z": "7f40eb05.9ed544",
        "name": "Set body",
        "func": "var elemServiceID = msg.var.elemServiceID\nvar servElemLabel = msg.var.servElemLabel\nvar vin = msg.var.vin\nvar operationType = msg.var.operationType\nmsg.var.body = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<S:Envelope xmlns:S=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\">\n\t<SOAP-ENV:Header/>\n\t<S:Body xmlns:ns2=\"http://server.pcs.camelsoap.service.camel.m2m.huawei.com/\">\n\t\t<ns2:activationService>\n\t\t\t<ns2:arg0>\n\t\t\t\t<bussinessServices>\n\t\t\t\t\t<elementaryServices>\n\t\t\t\t\t\t<elemServiceID>${elemServiceID}</elemServiceID>\n\t\t\t\t\t\t<servElemLabel>${servElemLabel}</servElemLabel>\n\t\t\t\t\t</elementaryServices>\n\t\t\t\t</bussinessServices>\n\t\t\t\t<operationType>${operationType}</operationType>\n\t\t\t\t<requestId>AM_94cbae50-0b0a-48d7-8af5-0177475a</requestId>\n\t\t\t\t<timestampDemande>2020-10-29T13:25:40.793Z</timestampDemande>\n\t\t\t\t<vinID>${vin}</vinID>\n\t\t\t</ns2:arg0>\n\t\t</ns2:activationService>\n\t</S:Body>\n</S:Envelope> \n \n`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 780,
        "y": 80,
        "wires": [
            [
                "5799f4a8.5b51ac"
            ]
        ]
    },
    {
        "id": "5799f4a8.5b51ac",
        "type": "subflow:86d6daed.e08488",
        "z": "7f40eb05.9ed544",
        "name": "",
        "env": [],
        "x": 950,
        "y": 80,
        "wires": [
            [
                "81697914.578ed8"
            ],
            [
                "5b2a4e29.ebce7"
            ]
        ]
    },
    {
        "id": "c6656df3.7fa1a",
        "type": "function",
        "z": "7f40eb05.9ed544",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Service Activation API CVMP'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 170,
        "y": 80,
        "wires": [
            [
                "cee06cbe.6a99d"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "cee06cbe.6a99d",
        "type": "function",
        "z": "7f40eb05.9ed544",
        "name": "[Log] Check Parameters",
        "func": "var propsToCheck = [\"UrlAPI\", \"elemServiceID\", \"servElemLabel\", \"vin\", \"operationType\"]\npropsToCheck.forEach(prop => {\n    if (!msg.var[prop]) {\n        msg.traces.push({\n            \"time\" : new Date(), \n            \"message\" : \"Check parameters\",\n            \"status\" : `Missing ${prop}`}\n        );     \n        node.error(`Missing ${prop}`);\n        return [null, msg];\n    }\n})\nreturn [msg, null];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 80,
        "wires": [
            [
                "6c1f0666.5dfcf8"
            ],
            [
                "5b2a4e29.ebce7"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "81697914.578ed8",
        "type": "function",
        "z": "7f40eb05.9ed544",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Service Activation API CVMP'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1150,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "5b2a4e29.ebce7",
        "type": "function",
        "z": "7f40eb05.9ed544",
        "name": "[Log] Error log",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Service Activation API CVMP :\",\n    \"status\" : \"KO\" \n});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1140,
        "y": 160,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "baf2e17a.dc85d8",
        "type": "status",
        "z": "7f40eb05.9ed544",
        "name": "",
        "scope": null,
        "x": 470,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "c4861363.f8894",
        "type": "click-on",
        "z": "81fc44c3.b84448",
        "name": "Click on Services",
        "selector": "xpath",
        "target": "//*[@translate=\"serviceSupport_batchTask_taskList_service_tab\"]",
        "timeout": "1000",
        "waitFor": "500",
        "x": 210,
        "y": 200,
        "wires": [
            [
                "4faf12ab.48dc04"
            ],
            [
                "e09fd674.de63e"
            ]
        ]
    },
    {
        "id": "45989714.7453b8",
        "type": "function",
        "z": "81fc44c3.b84448",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'SF Go to Services'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 210,
        "y": 140,
        "wires": [
            [
                "c4861363.f8894"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "4faf12ab.48dc04",
        "type": "function",
        "z": "81fc44c3.b84448",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF Go to Services'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 470,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "e09fd674.de63e",
        "type": "function",
        "z": "81fc44c3.b84448",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Go to Services : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Go to Services : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 200,
        "y": 260,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "f7476fc9.3c82e8",
        "type": "comment",
        "z": "81fc44c3.b84448",
        "name": "SF Go to Services",
        "info": "Click on Services tab",
        "x": 130,
        "y": 60,
        "wires": []
    },
    {
        "id": "c0fdbe44.d80c5",
        "type": "http request",
        "z": "ecccc741.98fb58",
        "name": "http asynchrone request test response",
        "method": "PUT",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 890,
        "y": 40,
        "wires": [
            [
                "ef2c5794.a538e8"
            ]
        ]
    },
    {
        "id": "ef2c5794.a538e8",
        "type": "debug",
        "z": "ecccc741.98fb58",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "statusCode",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1200,
        "y": 40,
        "wires": []
    },
    {
        "id": "351b13d4.fca19c",
        "type": "function",
        "z": "ecccc741.98fb58",
        "name": "Asynchrone - Finished response",
        "func": "if(msg.traces.every(x => x.status.includes(\"OK\"))){\n    msg.statusCode=200\n}else {\n    msg.statusCode=400\n}\n\nmsg.payload = {\n    // \"test_instanceID\":msg.var.query.test_instanceID,\n    \"test_instanceID\":msg.var.automaticTestRunId,\n    \"log\":msg.traces,\n    \"status\":\"Finished\",\n    \"result_test\":msg.statusCode\n}\n\n// msg.url = msg.var.query.backendURL + \"/test_result\"\nmsg.url = msg.var.responseServerUrlForAsynchrousMode\nmsg.method = null;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 470,
        "y": 40,
        "wires": [
            [
                "c0fdbe44.d80c5",
                "3a3dd919.077b46"
            ]
        ]
    },
    {
        "id": "cd174b9f.bbb2c8",
        "type": "switch",
        "z": "ecccc741.98fb58",
        "name": "Asynchrone Switch",
        "property": "var.asynchronousMode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 190,
        "y": 140,
        "wires": [
            [
                "351b13d4.fca19c"
            ],
            [
                "1e337481.16c3bb"
            ],
            [
                "1e337481.16c3bb"
            ]
        ],
        "outputLabels": [
            "asynchrone",
            "synchrone",
            ""
        ]
    },
    {
        "id": "aab3c648.fe1348",
        "type": "http response",
        "z": "ecccc741.98fb58",
        "name": "http synchrone request test response",
        "statusCode": "",
        "headers": {},
        "x": 850,
        "y": 280,
        "wires": []
    },
    {
        "id": "b26af6cd.5ee1b8",
        "type": "function",
        "z": "6f736668.4c2da8",
        "name": "Asynchrone - In Progress response",
        "func": "msg.statusCode = \"200\";\nmsg.payload = {\"status\":\"In Progress\"}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 300,
        "y": 200,
        "wires": [
            [
                "c11962a.1d274a"
            ]
        ]
    },
    {
        "id": "c11962a.1d274a",
        "type": "http response",
        "z": "6f736668.4c2da8",
        "name": "Asynchrone Default http",
        "statusCode": "",
        "headers": {},
        "x": 630,
        "y": 200,
        "wires": []
    },
    {
        "id": "271045e3.11169a",
        "type": "status",
        "z": "6f736668.4c2da8",
        "name": "",
        "scope": null,
        "x": 140,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "982536a9.7a7e58",
        "type": "function",
        "z": "29b22af0.17685e",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'SF CVMP - Global Login'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 180,
        "y": 120,
        "wires": [
            [
                "f1ee9b77.1d679"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "f1ee9b77.1d679",
        "type": "function",
        "z": "29b22af0.17685e",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.CVMP2AppliUserLogin) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing username\"}\n    );\n    node.error(\"Missing username\");\n    return [null, msg];\n}\nif (!msg.var.CVMP2AppliUserPwd) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission password\"}\n    );\n    node.error(\"Missing password\");\n    return [null, msg];\n}\nif (!msg.var.CVMP2AppliConnexion){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission url\"}\n    );\n    node.error(\"Missing url\");\n    return [null, msg];\n}\n\nif (!msg.var.SeleniumWd2Server){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission SeleniumWd2Server\"}\n    );\n    node.error(\"Missing SeleniumWd2Server\");\n    return [null, msg];\n}\n\nif (!msg.var.SeleniumWd2Browser){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission SeleniumWd2Browser\"}\n    );\n    node.error(\"Missing SeleniumWd2Browser\");\n    return [null, msg];\n}\n\nif (!msg.var.SeleniumWd2Headless){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission SeleniumWd2Headless\"}\n    );\n    node.error(\"Missing SeleniumWd2Headless\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 470,
        "y": 80,
        "wires": [
            [
                "272f8c60.8c26f4"
            ],
            [
                "23460841.f431f"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "ffe8430e.7a2ab8",
        "type": "send-keys",
        "z": "29b22af0.17685e",
        "name": "Input Username",
        "keys": "",
        "selector": "id",
        "target": "username",
        "timeout": 15000,
        "waitFor": "1000",
        "clearVal": false,
        "x": 280,
        "y": 320,
        "wires": [
            [
                "cb064ed9.2d2c1"
            ],
            [
                "23460841.f431f"
            ]
        ]
    },
    {
        "id": "ea9fb268.37dea8",
        "type": "send-keys",
        "z": "29b22af0.17685e",
        "name": "Input Password",
        "keys": "",
        "selector": "id",
        "target": "password",
        "timeout": 15000,
        "waitFor": "1000",
        "clearVal": false,
        "x": 640,
        "y": 320,
        "wires": [
            [
                "91232399.126d48"
            ],
            [
                "23460841.f431f"
            ]
        ]
    },
    {
        "id": "91232399.126d48",
        "type": "click-on",
        "z": "29b22af0.17685e",
        "name": "Click Login Button",
        "selector": "xpath",
        "target": "//a[@onclick=\"postOk();\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 210,
        "y": 440,
        "wires": [
            [
                "5335d34e.31500c"
            ],
            [
                "23460841.f431f"
            ]
        ]
    },
    {
        "id": "5335d34e.31500c",
        "type": "click-on",
        "z": "29b22af0.17685e",
        "name": "Pass Agree Button",
        "selector": "xpath",
        "target": "//*[@translate=\"login_agree_button\"]",
        "timeout": 15000,
        "waitFor": "4000",
        "x": 510,
        "y": 440,
        "wires": [
            [
                "8ed1ebbf.ce572"
            ],
            [
                "23460841.f431f"
            ]
        ]
    },
    {
        "id": "8ed1ebbf.ce572",
        "type": "function",
        "z": "29b22af0.17685e",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF CVMP - Global Login'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 790,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "d49bd9d9.8573c",
        "type": "comment",
        "z": "29b22af0.17685e",
        "name": "SF CVMP - Global Login",
        "info": "Subflow to login on the platform\n\nParameters :\n- PLATFORM_URL\n- USERNAME\n- PASSWORD",
        "x": 200,
        "y": 40,
        "wires": []
    },
    {
        "id": "23460841.f431f",
        "type": "function",
        "z": "29b22af0.17685e",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Login user : \",\n        \"status\" : msg.error\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Login user : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 980,
        "y": 280,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "ab09015a.9a1db",
        "type": "function",
        "z": "29b22af0.17685e",
        "name": "[Expect] Error case or nominal case",
        "func": "// If EXPECT = true\nif (env.get(\"EXPECT\")){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Test case : nominal case\",\n        \"status\" : \"OK\"}\n    );\n    return [msg, null];\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Test case : error case\",\n        \"status\" : \"OK\"}\n    );\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "x": 420,
        "y": 540,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "c509cbcc.7bc9f8",
        "type": "click-on",
        "z": "29b22af0.17685e",
        "name": "Click on Login with SSO",
        "selector": "xpath",
        "target": "//span[@onclick=\"loginBySSO('sso')\"]",
        "timeout": 15000,
        "waitFor": 500,
        "clickOn": false,
        "x": 270,
        "y": 220,
        "wires": [
            [
                "d1435f20.f169c"
            ],
            [
                "23460841.f431f"
            ]
        ]
    },
    {
        "id": "cfdfd1e4.98125",
        "type": "open-web",
        "z": "29b22af0.17685e",
        "name": "Open CVMP",
        "browser": "chrome",
        "webURL": "",
        "width": "1920",
        "height": "1080",
        "timeout": 3000,
        "maximized": true,
        "headless": false,
        "serverURL": "",
        "x": 850,
        "y": 140,
        "wires": [
            [
                "c509cbcc.7bc9f8"
            ],
            [
                "23460841.f431f"
            ]
        ]
    },
    {
        "id": "d1435f20.f169c",
        "type": "function",
        "z": "29b22af0.17685e",
        "name": "Set Keys",
        "func": "msg.keys = msg.var.CVMP2AppliUserLogin;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 120,
        "y": 320,
        "wires": [
            [
                "ffe8430e.7a2ab8"
            ]
        ]
    },
    {
        "id": "cb064ed9.2d2c1",
        "type": "function",
        "z": "29b22af0.17685e",
        "name": "Set Keys",
        "func": "msg.keys = msg.var.CVMP2AppliUserPwd;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 460,
        "y": 320,
        "wires": [
            [
                "ea9fb268.37dea8"
            ]
        ]
    },
    {
        "id": "272f8c60.8c26f4",
        "type": "function",
        "z": "29b22af0.17685e",
        "name": "Set Parameters for Open web",
        "func": "\nif (msg.var.CVMP2AppliConnexion){\n    msg.webURL = msg.var.CVMP2AppliConnexion;\n}\n\nif (msg.var.SeleniumWd2Server){\n    msg.serverURL  = msg.var.SeleniumWd2Server;\n}\n\nif (msg.var.SeleniumWd2Browser){\n    msg.browser  = msg.var.SeleniumWd2Browser;\n}\n\n//We must convert to stirng to the boolean , otherwhise the boolean msg.headless is not correctly set\n\nif (msg.var.SeleniumWd2Headless.toLowerCase() === 'true' ) {\n    msg.headless = true;\n} else  if ( msg.var.SeleniumWd2Headless.toLowerCase() === 'false' )\n{\n   msg.headless = false;\n} \n        \n        \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 550,
        "y": 140,
        "wires": [
            [
                "cfdfd1e4.98125"
            ]
        ]
    },
    {
        "id": "337f5d81.73c422",
        "type": "click-on",
        "z": "bcf6ad2e.ac4de8",
        "name": "Go to search",
        "selector": "xpath",
        "target": "//*[@translate=\"common_search_button\"]",
        "timeout": 15000,
        "waitFor": "3000",
        "clickOn": false,
        "x": 170,
        "y": 180,
        "wires": [
            [
                "d8903d4c.54c69"
            ],
            [
                "8a4102fd.d4728"
            ]
        ]
    },
    {
        "id": "29755476.b9bb64",
        "type": "send-keys",
        "z": "bcf6ad2e.ac4de8",
        "name": "Add id Vehicle",
        "keys": "",
        "selector": "xpath",
        "target": "//*[@ng-model=\"search_VIN\"]",
        "timeout": 15000,
        "waitFor": 500,
        "clearVal": false,
        "x": 540,
        "y": 180,
        "wires": [
            [
                "17801d6b.cfce3b"
            ],
            [
                "8a4102fd.d4728"
            ]
        ]
    },
    {
        "id": "17801d6b.cfce3b",
        "type": "click-on",
        "z": "bcf6ad2e.ac4de8",
        "name": "Click on search button",
        "selector": "xpath",
        "target": "//span[@title=\"Search\"]",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 200,
        "y": 240,
        "wires": [
            [
                "a1f9ca07.a81da8"
            ],
            [
                "8a4102fd.d4728"
            ]
        ]
    },
    {
        "id": "a1f9ca07.a81da8",
        "type": "click-on",
        "z": "bcf6ad2e.ac4de8",
        "name": "Click on the vehicle",
        "selector": "xpath",
        "target": "//*[@ng-bind=\"p.vin || nullStr\"]",
        "timeout": 15000,
        "waitFor": "2000",
        "x": 420,
        "y": 240,
        "wires": [
            [
                "68669e9f.b4b6c8"
            ],
            [
                "8a4102fd.d4728"
            ]
        ]
    },
    {
        "id": "9d0d40c8.c3c81",
        "type": "function",
        "z": "bcf6ad2e.ac4de8",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'SF Go to vehicle ID card'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 120,
        "wires": [
            [
                "a9f1cfdc.ab454"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "a9f1cfdc.ab454",
        "type": "function",
        "z": "bcf6ad2e.ac4de8",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.vin) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing vin\"}\n    );\n    node.error(\"Missing vin\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 120,
        "wires": [
            [
                "337f5d81.73c422"
            ],
            [
                "8a4102fd.d4728"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "68669e9f.b4b6c8",
        "type": "function",
        "z": "bcf6ad2e.ac4de8",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF Go to vehicle ID card'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 630,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "8a4102fd.d4728",
        "type": "function",
        "z": "bcf6ad2e.ac4de8",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Go to vehicule id card : \",\n        \"status\" : \"KO \" + msg.error\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Go to vehicule id card : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 180,
        "y": 300,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "5372ddab.351fe4",
        "type": "comment",
        "z": "bcf6ad2e.ac4de8",
        "name": "SF Go to vehicle ID card",
        "info": "Go to a vehicule ID Card\n\nParameter :\n- VIN",
        "x": 210,
        "y": 60,
        "wires": []
    },
    {
        "id": "d8903d4c.54c69",
        "type": "function",
        "z": "bcf6ad2e.ac4de8",
        "name": "Set Keys",
        "func": "msg.keys = msg.var.vin;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 360,
        "y": 180,
        "wires": [
            [
                "29755476.b9bb64"
            ]
        ]
    },
    {
        "id": "296d1ba9.b137d4",
        "type": "http request",
        "z": "86d6daed.e08488",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "fed8e1e7.383d6",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 290,
        "y": 160,
        "wires": [
            [
                "6eb385b0.46867c",
                "c0044824.384008"
            ]
        ]
    },
    {
        "id": "9ddcaaa3.bb76d8",
        "type": "function",
        "z": "86d6daed.e08488",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'CVMP API Request'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 210,
        "y": 60,
        "wires": [
            [
                "2c4641f0.cdb3ae"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "2c4641f0.cdb3ae",
        "type": "function",
        "z": "86d6daed.e08488",
        "name": "[Log] Check Parameters",
        "func": "var propsToCheck = [\"body\", \"headers\", \"method\", \"url\"]\npropsToCheck.forEach(prop => {\n    if (!msg.var[prop]) {\n        if (prop == \"body\"){\n            node.warn(`Missing optionnal ${prop}`)\n        } else {\n            msg.traces.push({\n                \"time\" : new Date(), \n                \"message\" : \"Check parameters\",\n                \"status\" : `Missing ${prop}`}\n            );     \n            node.error(`Missing ${prop}`);\n        }\n        return [null, msg];\n    }\n})\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 450,
        "y": 60,
        "wires": [
            [
                "9c13787b.4ff588"
            ],
            [
                "c3dfaa8a.5b6878"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "aa960c36.6ee96",
        "type": "function",
        "z": "86d6daed.e08488",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF CVMP - Global Login'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1530,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "6eb385b0.46867c",
        "type": "function",
        "z": "86d6daed.e08488",
        "name": "Handle Server response",
        "func": "//Display the response of the server\nif (msg.statusCode < 400){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Http Request Done, Server response\",\n        \"status\" : \"OK. Status : \" + msg.statusCode\n    });\n    //node.warn(msg.payload);\n    return [msg, null];\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Http Request Done, Server response : \",\n        \"status\" : \"OK. Status : \" + msg.statusCode\n    });\n    //node.error(msg.payload);\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 550,
        "y": 160,
        "wires": [
            [
                "2b8d29de.073da6"
            ],
            [
                "81622564.355a98"
            ]
        ]
    },
    {
        "id": "9c13787b.4ff588",
        "type": "function",
        "z": "86d6daed.e08488",
        "name": "var to msg",
        "func": "msg.headers = msg.var.headers\nmsg.payload = msg.var.body\nmsg.method = msg.var.method\nmsg.url = msg.var.url\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 690,
        "y": 60,
        "wires": [
            [
                "296d1ba9.b137d4",
                "2e779f9.0fcc86"
            ]
        ]
    },
    {
        "id": "c3dfaa8a.5b6878",
        "type": "function",
        "z": "86d6daed.e08488",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Error : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n    node.error(msg.error)\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Error : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 640,
        "y": 340,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "d9229e2a.641bb8",
        "type": "screenshot",
        "z": "9f6908ed.bb34c8",
        "name": "",
        "filePath": "",
        "waitFor": 500,
        "x": 510,
        "y": 260,
        "wires": [
            [
                "6b469ad4.550e8c"
            ],
            [
                "60f79d1a.edd7f4"
            ]
        ]
    },
    {
        "id": "d02275ef.e518b",
        "type": "function",
        "z": "9f6908ed.bb34c8",
        "name": "set filepath",
        "func": "date = new Date();\n\nyear = date.getFullYear();\nmonth = date.getMonth() + 1;\nday = date.getDate();\n\nif (month < 10)\n    month = \"0\" + month\nif (day < 10)\n    day = \"0\" + day\n    \nhour = date.getHours();\nminutes = date.getMinutes();\nseconds = date.getSeconds();\n\nif (hour < 10)\n    hour = \"0\" + hour\nif (minutes < 10)\n    minutes = \"0\" + minutes\nif (seconds < 10)\n    seconds = \"0\" + seconds\n    \nvar fileDate = year+month+day+\"_\"+hour+minutes+seconds+\"_\";\nmsg.screenFileName = fileDate+\"screenshot.jpeg\";\nmsg.filePath = msg.var.folderTemp + \"\\\\Screenshots\\\\\"+msg.screenFileName;\nmsg.filename = msg.filePath;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 170,
        "y": 260,
        "wires": [
            [
                "35e59574.8c265a"
            ]
        ]
    },
    {
        "id": "60f79d1a.edd7f4",
        "type": "function",
        "z": "9f6908ed.bb34c8",
        "name": "Log screenshot error",
        "func": "node.error(\"Can't take screenshot, verify '\" + msg.var.folderTemp + \"\\\\Screenshots\\\\' exist\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 720,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "6b469ad4.550e8c",
        "type": "function",
        "z": "9f6908ed.bb34c8",
        "name": "Log screen taken",
        "func": "node.warn(\"Screenshot taken. Filename = '\"+msg.filePath+\"'\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 710,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "35e59574.8c265a",
        "type": "file",
        "z": "9f6908ed.bb34c8",
        "name": "",
        "filename": "",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 350,
        "y": 260,
        "wires": [
            [
                "d9229e2a.641bb8"
            ]
        ]
    },
    {
        "id": "839111c0.6c25b",
        "type": "http in",
        "z": "b95a4c68.bdfef",
        "name": "",
        "url": "/test_result",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 360,
        "y": 160,
        "wires": [
            [
                "bb5df5b6.cf9bf8"
            ]
        ]
    },
    {
        "id": "e389a8c6.48fa08",
        "type": "http response",
        "z": "b95a4c68.bdfef",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 750,
        "y": 160,
        "wires": []
    },
    {
        "id": "bb5df5b6.cf9bf8",
        "type": "function",
        "z": "b95a4c68.bdfef",
        "name": "",
        "func": "msg.payload = msg.req.body;\nnode.warn(msg.payload);\nmsg.statusCode = 200;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 580,
        "y": 160,
        "wires": [
            [
                "e389a8c6.48fa08"
            ]
        ]
    },
    {
        "id": "525ea6ca.25e68",
        "type": "function",
        "z": "1cc5ec6.dfaef14",
        "name": "Generate HTML",
        "func": "var body = \"\";\nfor (let trace of msg.traces) {\n    if (trace.status.includes(\"OK\"))\n        body += \"<tr><td>\"+ trace.message +\"</td><td style='color:#4cd137'>\" + trace.status + \"</td></tr>\";\n    else\n        body += \"<tr><td>\"+ trace.message +\"</td><td style='color:#eb3b5a'>\" + trace.status + \"</td></tr>\";\n}\nmsg.payload = \"<head><link rel='stylesheet' type='text/css' href='style.css'></head>\"\nmsg.payload += \"<p>Table generated the \" + new Date().toLocaleString() + \"</p>\"\nmsg.payload += \"<table style='border:1px solid black'><thead><tr><th>Step</th><th>Result</th></tr></thead><tbody>\";\nmsg.payload += body;\nmsg.payload += \"</tbody></table>\";\n\nmsg.filename=msg.var.folderTemp  + \"\\\\resultTest.html\" ;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 220,
        "y": 80,
        "wires": [
            [
                "12db1b4b.2210f5"
            ]
        ]
    },
    {
        "id": "12db1b4b.2210f5",
        "type": "file",
        "z": "1cc5ec6.dfaef14",
        "name": "Write HTML",
        "filename": "",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 430,
        "y": 80,
        "wires": [
            [
                "32404c22.919f34"
            ]
        ]
    },
    {
        "id": "3653be1a.4716a2",
        "type": "close-web",
        "z": "1cc5ec6.dfaef14",
        "name": "",
        "waitFor": "",
        "x": 1070,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "32404c22.919f34",
        "type": "switch",
        "z": "1cc5ec6.dfaef14",
        "name": "swith 1 to close Browser",
        "property": "driver",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 670,
        "y": 80,
        "wires": [
            [
                "4668e9ad.21f838"
            ],
            []
        ]
    },
    {
        "id": "1514389d.9942f7",
        "type": "function",
        "z": "1cc5ec6.dfaef14",
        "name": "setWaitFor",
        "func": "msg.waitFor = msg.var.delayToCloseBrowser;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 910,
        "y": 180,
        "wires": [
            [
                "3653be1a.4716a2"
            ]
        ]
    },
    {
        "id": "4668e9ad.21f838",
        "type": "switch",
        "z": "1cc5ec6.dfaef14",
        "name": "swith 2 to close Browser after delay",
        "property": "var.delayToCloseBrowser",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "null"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 640,
        "y": 180,
        "wires": [
            [],
            [],
            [
                "1514389d.9942f7"
            ]
        ]
    },
    {
        "id": "211d9a0.37e4366",
        "type": "subflow:1cc5ec6.dfaef14",
        "z": "880bc670.400e78",
        "name": "",
        "env": [],
        "x": 1190,
        "y": 700,
        "wires": [
            [
                "d7e85c27.4f3d2"
            ]
        ]
    },
    {
        "id": "c66a7572.b2d3d8",
        "type": "function",
        "z": "880bc670.400e78",
        "name": "[Log] Error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Open CVMP with new WD2 evolution\" + JSON.stringify(msg.error),\n    \"status\" : \"KO\"\n})\n\nnode.status({ fill : \"green\", shape : \"ring\", text : \"passed\"});\nreturn msg;   \n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1050,
        "y": 440,
        "wires": [
            [
                "c2370fa7.a824f"
            ]
        ]
    },
    {
        "id": "d7e85c27.4f3d2",
        "type": "subflow:ecccc741.98fb58",
        "z": "880bc670.400e78",
        "name": "",
        "env": [],
        "x": 1440,
        "y": 700,
        "wires": []
    },
    {
        "id": "c2370fa7.a824f",
        "type": "subflow:9f6908ed.bb34c8",
        "z": "880bc670.400e78",
        "name": "",
        "env": [],
        "x": 1230,
        "y": 440,
        "wires": [
            [
                "211d9a0.37e4366",
                "cdff13b0.7296c"
            ]
        ]
    },
    {
        "id": "cdff13b0.7296c",
        "type": "debug",
        "z": "880bc670.400e78",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 440,
        "wires": []
    },
    {
        "id": "ab04ed49.eee82",
        "type": "switch",
        "z": "880bc670.400e78",
        "name": "Asynchrone Switch",
        "property": "var.asynchronousMode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 590,
        "y": 200,
        "wires": [
            [
                "89b947de.fb5b98",
                "784fcf5c.03cb3"
            ],
            [
                "784fcf5c.03cb3"
            ],
            [
                "c66a7572.b2d3d8"
            ]
        ],
        "outputLabels": [
            "asynchrone",
            "synchrone",
            ""
        ]
    },
    {
        "id": "89b947de.fb5b98",
        "type": "subflow:6f736668.4c2da8",
        "z": "880bc670.400e78",
        "name": "",
        "env": [],
        "x": 980,
        "y": 200,
        "wires": []
    },
    {
        "id": "9cb1cd6d.db636",
        "type": "subflow:b95a4c68.bdfef",
        "z": "880bc670.400e78",
        "name": "",
        "env": [],
        "x": 980,
        "y": 280,
        "wires": []
    },
    {
        "id": "6b35a8a8.f6a918",
        "type": "comment",
        "z": "880bc670.400e78",
        "name": "Result Backend server to test asynchrone mode",
        "info": "",
        "x": 1060,
        "y": 240,
        "wires": []
    },
    {
        "id": "3628c984.238666",
        "type": "function",
        "z": "880bc670.400e78",
        "name": "[Log] Init traces",
        "func": "msg.traces = [];\nmsg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Open CVMP with new WD2 evolution\",\n    \"status\" : \"OK\"}\n);\n\nif (msg.var.asynchronousMode == null){\n    msg.var.asynchronousMode =\"\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 940,
        "y": 100,
        "wires": [
            [
                "ab04ed49.eee82"
            ]
        ]
    },
    {
        "id": "6d93c461.af83cc",
        "type": "change",
        "z": "880bc670.400e78",
        "name": "Set payload to var",
        "rules": [
            {
                "t": "set",
                "p": "var",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 100,
        "wires": [
            [
                "3628c984.238666"
            ]
        ]
    },
    {
        "id": "b23ccdd3.5d9f1",
        "type": "change",
        "z": "880bc670.400e78",
        "name": "Set body to payload",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "req.body",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 100,
        "wires": [
            [
                "6d93c461.af83cc"
            ]
        ]
    },
    {
        "id": "1c880b87.325384",
        "type": "http in",
        "z": "880bc670.400e78",
        "name": "",
        "url": "DevTest/LoginCVMP2_Evol_WD2",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 200,
        "y": 100,
        "wires": [
            [
                "b23ccdd3.5d9f1"
            ]
        ]
    },
    {
        "id": "784fcf5c.03cb3",
        "type": "function",
        "z": "880bc670.400e78",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.CVMP2AppliUserLogin) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing username\"}\n    );\n    node.error(\"Missing username\");\n    return [null, msg];\n}\nif (!msg.var.CVMP2AppliUserPwd) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission password\"}\n    );\n    node.error(\"Missing password\");\n    return [null, msg];\n}\nif (!msg.var.CVMP2AppliConnexion){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission url\"}\n    );\n    node.error(\"Missing url\");\n    return [null, msg];\n}\n\nif (!msg.var.SeleniumWd2Server){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission SeleniumWd2Server\"}\n    );\n    node.error(\"Missing SeleniumWd2Server\");\n    return [null, msg];\n}\n\nif (!msg.var.SeleniumWd2Browser){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission SeleniumWd2Browser\"}\n    );\n    node.error(\"Missing SeleniumWd2Browser\");\n    return [null, msg];\n}\n\nif (!msg.var.SeleniumWd2Headless){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission SeleniumWd2Headless\"}\n    );\n    node.error(\"Missing SeleniumWd2Headless\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 260,
        "wires": [
            [
                "df8201ab.6f2c7"
            ],
            [
                "c66a7572.b2d3d8"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "ca83aa44.218548",
        "type": "send-keys",
        "z": "880bc670.400e78",
        "name": "Input Username",
        "keys": "",
        "selector": "id",
        "target": "username",
        "timeout": 15000,
        "waitFor": "1000",
        "clearVal": false,
        "x": 400,
        "y": 620,
        "wires": [
            [
                "2710e1b2.7f72ae"
            ],
            [
                "64395b4c.490cf4"
            ]
        ]
    },
    {
        "id": "4b3613f4.a9295c",
        "type": "send-keys",
        "z": "880bc670.400e78",
        "name": "Input Password",
        "keys": "",
        "selector": "id",
        "target": "password",
        "timeout": 15000,
        "waitFor": "1000",
        "clearVal": false,
        "x": 420,
        "y": 680,
        "wires": [
            [
                "891e746d.a83008"
            ],
            [
                "64395b4c.490cf4"
            ]
        ]
    },
    {
        "id": "891e746d.a83008",
        "type": "click-on",
        "z": "880bc670.400e78",
        "name": "Click Login Button",
        "selector": "xpath",
        "target": "//a[@onclick=\"postOk();\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 150,
        "y": 760,
        "wires": [
            [
                "f9bf860.803f778"
            ],
            [
                "64395b4c.490cf4"
            ]
        ]
    },
    {
        "id": "f9bf860.803f778",
        "type": "click-on",
        "z": "880bc670.400e78",
        "name": "Pass Agree Button",
        "selector": "xpath",
        "target": "//*[@translate=\"login_agree_button\"]",
        "timeout": 15000,
        "waitFor": "4000",
        "x": 430,
        "y": 740,
        "wires": [
            [
                "b3e5a66b.0cec88"
            ],
            [
                "64395b4c.490cf4"
            ]
        ]
    },
    {
        "id": "b3e5a66b.0cec88",
        "type": "function",
        "z": "880bc670.400e78",
        "name": "[Log] Internal End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF CVMP - Global Login'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 780,
        "y": 720,
        "wires": [
            [
                "211d9a0.37e4366"
            ]
        ]
    },
    {
        "id": "4c2679e1.64cd08",
        "type": "function",
        "z": "880bc670.400e78",
        "name": "Set Keys for user login",
        "func": "msg.keys = msg.var.CVMP2AppliUserLogin;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 160,
        "y": 620,
        "wires": [
            [
                "ca83aa44.218548"
            ]
        ]
    },
    {
        "id": "2710e1b2.7f72ae",
        "type": "function",
        "z": "880bc670.400e78",
        "name": "Set Keys for user pasword",
        "func": "msg.keys = msg.var.CVMP2AppliUserPwd;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 160,
        "y": 680,
        "wires": [
            [
                "4b3613f4.a9295c"
            ]
        ]
    },
    {
        "id": "64395b4c.490cf4",
        "type": "function",
        "z": "880bc670.400e78",
        "name": "[Log] Internal Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Login user : \",\n        \"status\" : msg.error\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Login user : \",\n        \"status\" : \"KO\" \n    });\n}\nnode.status({ fill : \"green\", shape : \"ring\", text : \"passed\"});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 680,
        "y": 520,
        "wires": [
            [
                "c66a7572.b2d3d8"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "fd2399b.ac50868",
        "type": "click-on",
        "z": "880bc670.400e78",
        "name": "Click on Login with SSO",
        "selector": "xpath",
        "target": "//span[@onclick=\"loginBySSO('sso')\"]",
        "timeout": 15000,
        "waitFor": 500,
        "clickOn": false,
        "x": 170,
        "y": 520,
        "wires": [
            [
                "4c2679e1.64cd08"
            ],
            [
                "64395b4c.490cf4"
            ]
        ]
    },
    {
        "id": "e13d0c8f.f0ce",
        "type": "open-web",
        "z": "880bc670.400e78",
        "name": "Open CVMP with open web node",
        "browser": "chrome",
        "webURL": "",
        "width": "1920",
        "height": "1080",
        "timeout": 3000,
        "maximized": true,
        "headless": false,
        "serverURL": "",
        "x": 200,
        "y": 420,
        "wires": [
            [
                "fd2399b.ac50868"
            ],
            [
                "64395b4c.490cf4"
            ]
        ]
    },
    {
        "id": "df8201ab.6f2c7",
        "type": "function",
        "z": "880bc670.400e78",
        "name": "Set Parameters for Open web node",
        "func": "if (msg.var.CVMP2AppliConnexion){\n    msg.webURL = msg.var.CVMP2AppliConnexion;\n}\n\nif (msg.var.SeleniumWd2Server){\n    msg.serverURL  = msg.var.SeleniumWd2Server;\n}\n\nif (msg.var.SeleniumWd2Browser){\n    msg.browser  = msg.var.SeleniumWd2Browser;\n}\n\n//We must convert to stirng to the boolean , otherwhise the boolean msg.headless is not correctly set\n\nif (msg.var.SeleniumWd2Headless.toLowerCase() === 'true' ) {\n    msg.headless = true;\n} else  if ( msg.var.SeleniumWd2Headless.toLowerCase() === 'false' )\n{\n   msg.headless = false;\n} \n        \n        \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 200,
        "y": 340,
        "wires": [
            [
                "e13d0c8f.f0ce"
            ]
        ]
    },
    {
        "id": "587621e8.6eabe",
        "type": "comment",
        "z": "880bc670.400e78",
        "name": "Evolution Wd2 : jira AUTOTOOL-470",
        "info": "",
        "x": 190,
        "y": 40,
        "wires": []
    },
    {
        "id": "25b5a809.44d668",
        "type": "switch",
        "z": "9f6908ed.bb34c8",
        "name": "swith to test is web driver actif",
        "property": "driver",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 230,
        "y": 80,
        "wires": [
            [
                "d02275ef.e518b"
            ],
            [
                "a502bc05.7345d"
            ]
        ]
    },
    {
        "id": "5f3acc60.911a24",
        "type": "comment",
        "z": "9f6908ed.bb34c8",
        "name": "If there is not webdriver opened then we do not do a screenshot otherwise we do",
        "info": "",
        "x": 360,
        "y": 180,
        "wires": []
    },
    {
        "id": "eaf7c2b8.d9c5f",
        "type": "comment",
        "z": "880bc670.400e78",
        "name": "We manage the screenshot, even there is not bowser launched",
        "info": "",
        "x": 1210,
        "y": 380,
        "wires": []
    },
    {
        "id": "a502bc05.7345d",
        "type": "function",
        "z": "9f6908ed.bb34c8",
        "name": "Log screen not taken",
        "func": "node.warn(\"There is not wbe browser launched by the test\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 580,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "aad0ca39.87bd28",
        "type": "change",
        "z": "cd61ed81.e8bff",
        "name": "Set payload to var",
        "rules": [
            {
                "t": "set",
                "p": "var",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 140,
        "wires": [
            [
                "6851c373.ea65fc"
            ]
        ]
    },
    {
        "id": "6851c373.ea65fc",
        "type": "function",
        "z": "cd61ed81.e8bff",
        "name": "[Log] Init traces",
        "func": "msg.traces = [];\nmsg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Get CVS on ATB\",\n    \"status\" : \"OK\"}\n);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 880,
        "y": 140,
        "wires": [
            [
                "69800fa2.1a14a8"
            ]
        ]
    },
    {
        "id": "6ad44951.3f6e38",
        "type": "subflow:86d6daed.e08488",
        "z": "cd61ed81.e8bff",
        "name": "",
        "env": [],
        "x": 510,
        "y": 380,
        "wires": [
            [
                "bd5e02d2.5f3d4",
                "74eeaa3f.f338a4"
            ],
            [
                "5fac0c98.054a54",
                "1e89e795.573c18"
            ]
        ]
    },
    {
        "id": "bf72613.d963aa",
        "type": "function",
        "z": "cd61ed81.e8bff",
        "name": "Set request",
        "func": "var propsToCheck = [\"body\", \"headers\", \"method\", \"url\"]\nmsg.var.headers = {\n    \"Content-Type\": \"application/xml\",\n    \"User-agent\": \"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0; XFire Client +http://xfire.codehaus.org)\",\n    \"Cache-Control\": \"no-cache\"\n}\nmsg.var.method = \"GET\"\n// Example of called url : https://preprod.api.inetpsa.com/applications/cvmp/v1/cvs/vehicles/VF7KF5GMMFS520547?client_id=52604b15-03ed-497a-be91-a708b4429c34&env=proj\nmsg.var.url = msg.var.CVMPApicOutDataPowerProtocol + \"://\" + msg.var.CVMPApicOutDataPowerHost + \":\" + msg.var.CVMPApicOutDataPowerPort \nmsg.var.url = msg.var.url + \"/applications/cvmp/v1/cvs/vehicles/\" + msg.var.vin + \"?client_id=\" + msg.var.CVMPApicOutClientId + \"&\" + msg.var.CVMPApicOutEnv\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 150,
        "y": 380,
        "wires": [
            [
                "6ad44951.3f6e38"
            ]
        ]
    },
    {
        "id": "dfa7037d.29125",
        "type": "comment",
        "z": "cd61ed81.e8bff",
        "name": "- Launch with Postman the WS GET CVS on the vehicle with VIN in parameter",
        "info": "",
        "x": 350,
        "y": 340,
        "wires": []
    },
    {
        "id": "bd5e02d2.5f3d4",
        "type": "function",
        "z": "cd61ed81.e8bff",
        "name": "200 OK ",
        "func": "if(msg.statusCode == 200){\n    msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"200 http OK response\",\n    \"status\" : \"OK\"}\n    );\n}else {\n     msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"200 http OK response\",\n    \"status\" : \"KO\"}\n    );   \n}\nmsg.var.CVSAPI = JSON.parse(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 820,
        "y": 400,
        "wires": [
            [
                "8f798b90.2a7b08",
                "50c21e0d.9b492"
            ]
        ]
    },
    {
        "id": "2ddbde9f.1800e2",
        "type": "comment",
        "z": "cd61ed81.e8bff",
        "name": "- Verify that the response shows the correct information",
        "info": "",
        "x": 280,
        "y": 480,
        "wires": []
    },
    {
        "id": "2775cd70.b93d02",
        "type": "subflow:bcf6ad2e.ac4de8",
        "z": "cd61ed81.e8bff",
        "name": "",
        "env": [],
        "x": 150,
        "y": 600,
        "wires": [
            [
                "87c439b2.c18cd8"
            ],
            [
                "5fac0c98.054a54"
            ]
        ]
    },
    {
        "id": "e1cd73d6.e4fd8",
        "type": "navigate",
        "z": "cd61ed81.e8bff",
        "name": "Go To Dashboard 23",
        "url": "",
        "navType": "to",
        "waitFor": 500,
        "x": 600,
        "y": 520,
        "wires": [
            [
                "2775cd70.b93d02"
            ],
            [
                "5fac0c98.054a54"
            ]
        ]
    },
    {
        "id": "bbe878fa.e561c8",
        "type": "get-text",
        "z": "cd61ed81.e8bff",
        "name": "Get IMEI",
        "expected": "",
        "selector": "xpath",
        "target": "//p[contains(@ng-bind,\"vehicleConfig.tbox.nodeId\")]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 420,
        "y": 820,
        "wires": [
            [
                "f34d2d52.dcc95"
            ],
            [
                "5fac0c98.054a54"
            ]
        ]
    },
    {
        "id": "f34d2d52.dcc95",
        "type": "function",
        "z": "cd61ed81.e8bff",
        "name": "Compare with API",
        "func": "node.warn(msg.payload)\nnode.warn(msg.var.index)\nif(msg.var.CVSAPI.LstUIN[msg.var.index].UIN == msg.payload){\n    msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Compare \" + msg.var.CVSAPI.LstUIN[msg.var.index].DYR + \" \" + msg.payload,\n    \"status\" : \"OK\"}\n    );\n}else {\n     msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Compare \" + msg.var.CVSAPI.LstUIN[msg.var.index].DYR + \" \" + msg.payload + \" \" + msg.var.CVSAPI.LstUIN[msg.var.index].UIN,\n    \"status\" : \"KO\"}\n    );   \n}\n\nmsg.var.index += 1\nif(msg.var.index == msg.var.CVSAPI.LstUIN.length){\n    return [msg,null]\n}else{\n    return [null,msg];   \n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 710,
        "y": 900,
        "wires": [
            [
                "1ea98ddd.99299a"
            ],
            [
                "d7ec3bca.577ea8"
            ]
        ]
    },
    {
        "id": "8f798b90.2a7b08",
        "type": "subflow:29b22af0.17685e",
        "z": "cd61ed81.e8bff",
        "name": "",
        "env": [],
        "x": 150,
        "y": 540,
        "wires": [
            [
                "5d0797e6.552d68"
            ],
            [
                "5fac0c98.054a54"
            ]
        ]
    },
    {
        "id": "ac7261a0.e1802",
        "type": "http in",
        "z": "cd61ed81.e8bff",
        "name": "",
        "url": "/DM_CVS/CVS_ON_ATB2",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 200,
        "y": 140,
        "wires": [
            [
                "45a8d4ce.00b5bc"
            ]
        ]
    },
    {
        "id": "45a8d4ce.00b5bc",
        "type": "change",
        "z": "cd61ed81.e8bff",
        "name": "Set body to payload",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "req.body",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 140,
        "wires": [
            [
                "aad0ca39.87bd28"
            ]
        ]
    },
    {
        "id": "5fac0c98.054a54",
        "type": "function",
        "z": "cd61ed81.e8bff",
        "name": "[Log] Error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"CVS on ATB\" + JSON.stringify(msg.error),\n    \"status\" : \"KO\"\n})\nreturn msg;   \n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1010,
        "y": 620,
        "wires": [
            [
                "51c1403e.e85008"
            ]
        ]
    },
    {
        "id": "c96704cf.a0bad8",
        "type": "http in",
        "z": "cd61ed81.e8bff",
        "name": "",
        "url": "/DM_CVS/CVS_ON_ATB1",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 200,
        "y": 100,
        "wires": [
            [
                "45a8d4ce.00b5bc"
            ]
        ]
    },
    {
        "id": "e15e09b2.ad5f68",
        "type": "http in",
        "z": "cd61ed81.e8bff",
        "name": "",
        "url": "/DM_CVS/CVS_ON_ATB3SOP1",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 220,
        "y": 60,
        "wires": [
            [
                "45a8d4ce.00b5bc"
            ]
        ]
    },
    {
        "id": "1f5e806f.afd3e",
        "type": "http in",
        "z": "cd61ed81.e8bff",
        "name": "",
        "url": "/DM_CVS/CVS_ON_ATB3SOP2",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 220,
        "y": 20,
        "wires": [
            [
                "45a8d4ce.00b5bc"
            ]
        ]
    },
    {
        "id": "2da517a8.1e1dd8",
        "type": "function",
        "z": "cd61ed81.e8bff",
        "name": "Set LstUIN index",
        "func": "msg.var.index = 0\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 700,
        "wires": [
            [
                "d7ec3bca.577ea8"
            ]
        ]
    },
    {
        "id": "d7ec3bca.577ea8",
        "type": "function",
        "z": "cd61ed81.e8bff",
        "name": "Loop",
        "func": "msg.var.DYR = msg.var.CVSAPI.LstUIN[msg.var.index][\"DYR\"]\nnode.warn(msg.var.DYR)\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 650,
        "y": 700,
        "wires": [
            [
                "b6a3ed11.1bab5"
            ]
        ]
    },
    {
        "id": "7ac29d01.9cd654",
        "type": "comment",
        "z": "cd61ed81.e8bff",
        "name": "ATB1 or ATB2",
        "info": "",
        "x": 430,
        "y": 800,
        "wires": []
    },
    {
        "id": "865b8a57.649898",
        "type": "get-text",
        "z": "cd61ed81.e8bff",
        "name": "Get UIN",
        "expected": "",
        "selector": "xpath",
        "target": "//p[@ng-bind=\"(vehicleConfig.uin || nullStr)\"]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 420,
        "y": 760,
        "wires": [
            [
                "f34d2d52.dcc95"
            ],
            [
                "5fac0c98.054a54"
            ]
        ]
    },
    {
        "id": "abe720af.50ac",
        "type": "get-text",
        "z": "cd61ed81.e8bff",
        "name": "Get NAC UIN",
        "expected": "",
        "selector": "xpath",
        "target": "//p[@ng-bind=\"vehicleConfig.nac.nodeId || nullStr | characters:50\"]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 440,
        "y": 860,
        "wires": [
            [
                "f34d2d52.dcc95"
            ],
            [
                "5fac0c98.054a54"
            ]
        ]
    },
    {
        "id": "772228b5.c60748",
        "type": "get-text",
        "z": "cd61ed81.e8bff",
        "name": "Get SDCM UIN",
        "expected": "",
        "selector": "xpath",
        "target": "//p[@ng-bind=\"vehicleConfig.sdcm.uin || nullStr\"]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 440,
        "y": 900,
        "wires": [
            [
                "f34d2d52.dcc95"
            ],
            [
                "5fac0c98.054a54"
            ]
        ]
    },
    {
        "id": "645c6771.cda5b8",
        "type": "comment",
        "z": "cd61ed81.e8bff",
        "name": "ATB3",
        "info": "",
        "x": 410,
        "y": 740,
        "wires": []
    },
    {
        "id": "e0271a80.f3ad78",
        "type": "delay",
        "z": "cd61ed81.e8bff",
        "name": "Variable delay",
        "pauseType": "delayv",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 660,
        "y": 640,
        "wires": [
            [
                "2da517a8.1e1dd8"
            ]
        ]
    },
    {
        "id": "b6a3ed11.1bab5",
        "type": "switch",
        "z": "cd61ed81.e8bff",
        "name": "",
        "property": "var.DYR",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ATB3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "ATB2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "ATB1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "NAC",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "SDCM",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "BSRF",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "IVI",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 250,
        "y": 840,
        "wires": [
            [
                "865b8a57.649898"
            ],
            [
                "bbe878fa.e561c8"
            ],
            [
                "bbe878fa.e561c8"
            ],
            [
                "abe720af.50ac"
            ],
            [
                "772228b5.c60748"
            ],
            [
                "3b905304.2ba2cc"
            ],
            [
                "68e83628.b79458"
            ],
            [
                "5fac0c98.054a54"
            ]
        ]
    },
    {
        "id": "68e83628.b79458",
        "type": "get-text",
        "z": "cd61ed81.e8bff",
        "name": "Get IVI UIN",
        "expected": "",
        "selector": "xpath",
        "target": "//P[@ng-bind=\"vehicleConfig.nac.nodeId || nullStr | characters:50\"]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 430,
        "y": 980,
        "wires": [
            [
                "f34d2d52.dcc95"
            ],
            [
                "5fac0c98.054a54"
            ]
        ]
    },
    {
        "id": "3b905304.2ba2cc",
        "type": "get-text",
        "z": "cd61ed81.e8bff",
        "name": "Get BSRF UIN",
        "expected": "",
        "selector": "xpath",
        "target": "//P[@ng-bind=\"(vehicleConfig.uin || nullStr)\"]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 440,
        "y": 940,
        "wires": [
            [
                "f34d2d52.dcc95"
            ],
            [
                "5fac0c98.054a54"
            ]
        ]
    },
    {
        "id": "7ffaded7.ddd87",
        "type": "http in",
        "z": "cd61ed81.e8bff",
        "name": "",
        "url": "/DM_CVS/CVS_ON_IVI",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 220,
        "wires": [
            [
                "45a8d4ce.00b5bc"
            ]
        ]
    },
    {
        "id": "7a99cc2f.5232a4",
        "type": "http in",
        "z": "cd61ed81.e8bff",
        "name": "",
        "url": "/DM_CVS/CVS_ON_BSRF",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 200,
        "y": 180,
        "wires": [
            [
                "45a8d4ce.00b5bc"
            ]
        ]
    },
    {
        "id": "5d0797e6.552d68",
        "type": "function",
        "z": "cd61ed81.e8bff",
        "name": "Set Url",
        "func": "// to use the node 'edit navigate node' , we set the variable input variable url \nmsg.url = msg.var.CVMP2AppliConnexion + \"/index.html#/dashboard/superset/Overview/23\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 540,
        "wires": [
            [
                "e1cd73d6.e4fd8"
            ]
        ]
    },
    {
        "id": "51c1403e.e85008",
        "type": "subflow:9f6908ed.bb34c8",
        "z": "cd61ed81.e8bff",
        "name": "",
        "env": [],
        "x": 1230,
        "y": 700,
        "wires": [
            [
                "97706294.5de6d8",
                "1ea98ddd.99299a"
            ]
        ]
    },
    {
        "id": "97706294.5de6d8",
        "type": "debug",
        "z": "cd61ed81.e8bff",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1510,
        "y": 520,
        "wires": []
    },
    {
        "id": "69800fa2.1a14a8",
        "type": "switch",
        "z": "cd61ed81.e8bff",
        "name": "Asynchrone Switch",
        "property": "var.asynchronousMode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1110,
        "y": 140,
        "wires": [
            [
                "1af6fe17.692562",
                "bf72613.d963aa"
            ],
            [
                "bf72613.d963aa"
            ],
            [
                "c0ad7b2d.411ca8"
            ]
        ],
        "outputLabels": [
            "asynchrone",
            "synchrone",
            ""
        ]
    },
    {
        "id": "1af6fe17.692562",
        "type": "subflow:6f736668.4c2da8",
        "z": "cd61ed81.e8bff",
        "name": "",
        "env": [],
        "x": 1410,
        "y": 80,
        "wires": []
    },
    {
        "id": "c0ad7b2d.411ca8",
        "type": "function",
        "z": "cd61ed81.e8bff",
        "name": "[Log] Error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"CVS on ATB\" + JSON.stringify(msg.error),\n    \"status\" : \"KO\"\n})\nreturn msg;   \n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1370,
        "y": 200,
        "wires": [
            [
                "97706294.5de6d8",
                "1ea98ddd.99299a"
            ]
        ]
    },
    {
        "id": "1a481060.3f18e8",
        "type": "subflow:b95a4c68.bdfef",
        "z": "cd61ed81.e8bff",
        "name": "",
        "env": [],
        "x": 1400,
        "y": 160,
        "wires": []
    },
    {
        "id": "9270bdba.202b6",
        "type": "comment",
        "z": "cd61ed81.e8bff",
        "name": "Result Backend server to test asynchrone mode",
        "info": "",
        "x": 1440,
        "y": 120,
        "wires": []
    },
    {
        "id": "1ea98ddd.99299a",
        "type": "subflow:1cc5ec6.dfaef14",
        "z": "cd61ed81.e8bff",
        "name": "",
        "env": [],
        "x": 1150,
        "y": 820,
        "wires": [
            [
                "dea4559e.374c18"
            ]
        ]
    },
    {
        "id": "dea4559e.374c18",
        "type": "subflow:ecccc741.98fb58",
        "z": "cd61ed81.e8bff",
        "name": "",
        "env": [],
        "x": 1420,
        "y": 820,
        "wires": []
    },
    {
        "id": "87c439b2.c18cd8",
        "type": "function",
        "z": "cd61ed81.e8bff",
        "name": "Set delay arround 5s",
        "func": "msg.delay = msg.var.delayArround5s * 5000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 420,
        "y": 640,
        "wires": [
            [
                "e0271a80.f3ad78"
            ]
        ]
    },
    {
        "id": "2e779f9.0fcc86",
        "type": "debug",
        "z": "86d6daed.e08488",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 80,
        "wires": []
    },
    {
        "id": "c0044824.384008",
        "type": "debug",
        "z": "86d6daed.e08488",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 460,
        "y": 260,
        "wires": []
    },
    {
        "id": "2b8d29de.073da6",
        "type": "debug",
        "z": "86d6daed.e08488",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 820,
        "y": 140,
        "wires": []
    },
    {
        "id": "81622564.355a98",
        "type": "debug",
        "z": "86d6daed.e08488",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 320,
        "wires": []
    },
    {
        "id": "74eeaa3f.f338a4",
        "type": "debug",
        "z": "cd61ed81.e8bff",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 320,
        "wires": []
    },
    {
        "id": "1e89e795.573c18",
        "type": "debug",
        "z": "cd61ed81.e8bff",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 900,
        "y": 500,
        "wires": []
    },
    {
        "id": "50c21e0d.9b492",
        "type": "debug",
        "z": "cd61ed81.e8bff",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1040,
        "y": 400,
        "wires": []
    },
    {
        "id": "26551c5f.546094",
        "type": "http in",
        "z": "66e74838.bd0f58",
        "name": "",
        "url": "/DevTest/CheckVinInformation",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 220,
        "y": 80,
        "wires": [
            [
                "ccd8b250.b1125"
            ]
        ]
    },
    {
        "id": "2621e21b.7df1ce",
        "type": "change",
        "z": "66e74838.bd0f58",
        "name": "Set payload to var",
        "rules": [
            {
                "t": "set",
                "p": "var",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 180,
        "wires": [
            [
                "c2c7d78a.ce9ca8"
            ]
        ]
    },
    {
        "id": "c2c7d78a.ce9ca8",
        "type": "function",
        "z": "66e74838.bd0f58",
        "name": "[Log] Init traces",
        "func": "msg.traces = [];\nmsg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start Check vin information\",\n    \"status\" : \"OK\"}\n);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 160,
        "y": 280,
        "wires": [
            [
                "b5b9fe20.3e7d"
            ]
        ]
    },
    {
        "id": "ccd8b250.b1125",
        "type": "change",
        "z": "66e74838.bd0f58",
        "name": "Set body to payload",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "req.body",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 170,
        "y": 180,
        "wires": [
            [
                "2621e21b.7df1ce"
            ]
        ]
    },
    {
        "id": "b5b9fe20.3e7d",
        "type": "switch",
        "z": "66e74838.bd0f58",
        "name": "Asynchrone Switch",
        "property": "var.asynchronousMode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 170,
        "y": 400,
        "wires": [
            [
                "40912e1c.522c3",
                "ef4fb665.cdc218"
            ],
            [
                "ef4fb665.cdc218"
            ],
            [
                "1a6ccdb3.8244f2"
            ]
        ],
        "outputLabels": [
            "asynchrone",
            "synchrone",
            ""
        ]
    },
    {
        "id": "1a6ccdb3.8244f2",
        "type": "function",
        "z": "66e74838.bd0f58",
        "name": "[Log] Error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Check vin information: Define aysnchrone mode\" + JSON.stringify(msg.error),\n    \"status\" : \"KO\"\n})\nreturn msg;   \n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 470,
        "y": 460,
        "wires": [
            [
                "d30c4269.4d55c"
            ]
        ]
    },
    {
        "id": "cd262ec6.196ed",
        "type": "subflow:b95a4c68.bdfef",
        "z": "66e74838.bd0f58",
        "name": "",
        "env": [],
        "x": 720,
        "y": 400,
        "wires": []
    },
    {
        "id": "57252701.883a98",
        "type": "comment",
        "z": "66e74838.bd0f58",
        "name": "Result Backend server to test asynchrone mode",
        "info": "",
        "x": 800,
        "y": 360,
        "wires": []
    },
    {
        "id": "40912e1c.522c3",
        "type": "subflow:6f736668.4c2da8",
        "z": "66e74838.bd0f58",
        "name": "",
        "env": [],
        "x": 500,
        "y": 380,
        "wires": []
    },
    {
        "id": "ef4fb665.cdc218",
        "type": "subflow:29b22af0.17685e",
        "z": "66e74838.bd0f58",
        "name": "",
        "env": [],
        "x": 190,
        "y": 540,
        "wires": [
            [
                "8e93f6d4.0ff798"
            ],
            [
                "3208a9c2.bd0716"
            ]
        ]
    },
    {
        "id": "1fdad388.554c6c",
        "type": "navigate",
        "z": "66e74838.bd0f58",
        "name": "Go To Dashboard 23",
        "url": "",
        "navType": "to",
        "waitFor": 500,
        "x": 640,
        "y": 540,
        "wires": [
            [
                "b1f353a.d0275b"
            ],
            [
                "29a458fd.8a22e8"
            ]
        ]
    },
    {
        "id": "8e93f6d4.0ff798",
        "type": "function",
        "z": "66e74838.bd0f58",
        "name": "Set Url",
        "func": "// to use the node 'edit navigate node' , we set the variable input variable url \nmsg.url = msg.var.CVMP2AppliConnexion + \"/index.html#/dashboard/superset/Overview/23\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 450,
        "y": 540,
        "wires": [
            [
                "1fdad388.554c6c"
            ]
        ]
    },
    {
        "id": "3208a9c2.bd0716",
        "type": "function",
        "z": "66e74838.bd0f58",
        "name": "[Log] Error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Check vin information:: connect to CVMP\" + JSON.stringify(msg.error),\n    \"status\" : \"KO\"\n})\nreturn msg;   \n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 470,
        "y": 580,
        "wires": [
            [
                "a0e36917.889ca8"
            ]
        ]
    },
    {
        "id": "b1f353a.d0275b",
        "type": "subflow:bcf6ad2e.ac4de8",
        "z": "66e74838.bd0f58",
        "name": "",
        "env": [],
        "x": 190,
        "y": 660,
        "wires": [
            [
                "ffaf0be7.bfbda8"
            ],
            [
                "5bbea671.49c808"
            ]
        ]
    },
    {
        "id": "ffaf0be7.bfbda8",
        "type": "function",
        "z": "66e74838.bd0f58",
        "name": "Set delay arround 5s",
        "func": "msg.delay = msg.var.delayArround5s * 5000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 480,
        "y": 660,
        "wires": [
            [
                "aab85ebc.657ba"
            ]
        ]
    },
    {
        "id": "aab85ebc.657ba",
        "type": "delay",
        "z": "66e74838.bd0f58",
        "name": "Variable delay",
        "pauseType": "delayv",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 700,
        "y": 660,
        "wires": [
            [
                "e632572d.ec0e78"
            ]
        ]
    },
    {
        "id": "4a8511b7.93bd4",
        "type": "comment",
        "z": "66e74838.bd0f58",
        "name": "Http Post Request for Automatic Test",
        "info": "",
        "x": 220,
        "y": 40,
        "wires": []
    },
    {
        "id": "74be37a4.3705c8",
        "type": "comment",
        "z": "66e74838.bd0f58",
        "name": "Initialize variables",
        "info": "",
        "x": 160,
        "y": 140,
        "wires": []
    },
    {
        "id": "ccb4d61.4571628",
        "type": "comment",
        "z": "66e74838.bd0f58",
        "name": "Innitialize log trace",
        "info": "",
        "x": 170,
        "y": 240,
        "wires": []
    },
    {
        "id": "166fb741.0af5a9",
        "type": "comment",
        "z": "66e74838.bd0f58",
        "name": "Define behaviour Synchronous ASynchronous",
        "info": "",
        "x": 250,
        "y": 340,
        "wires": []
    },
    {
        "id": "f64d3f79.3bdf2",
        "type": "comment",
        "z": "66e74838.bd0f58",
        "name": "Connect to CVMP application",
        "info": "",
        "x": 200,
        "y": 500,
        "wires": []
    },
    {
        "id": "29a458fd.8a22e8",
        "type": "function",
        "z": "66e74838.bd0f58",
        "name": "[Log] Error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Check vin information: Go to Dashboard 23\" + JSON.stringify(msg.error),\n    \"status\" : \"KO\"\n})\nreturn msg;   \n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 910,
        "y": 540,
        "wires": [
            [
                "a0e36917.889ca8"
            ]
        ]
    },
    {
        "id": "c7346648.702be8",
        "type": "comment",
        "z": "66e74838.bd0f58",
        "name": "Search vin",
        "info": "",
        "x": 140,
        "y": 620,
        "wires": []
    },
    {
        "id": "a0e36917.889ca8",
        "type": "subflow:9f6908ed.bb34c8",
        "z": "66e74838.bd0f58",
        "name": "",
        "env": [],
        "x": 890,
        "y": 780,
        "wires": [
            [
                "d30c4269.4d55c"
            ]
        ]
    },
    {
        "id": "d30c4269.4d55c",
        "type": "subflow:1cc5ec6.dfaef14",
        "z": "66e74838.bd0f58",
        "name": "",
        "env": [],
        "x": 950,
        "y": 860,
        "wires": [
            [
                "24e184ae.f84a9c"
            ]
        ]
    },
    {
        "id": "24e184ae.f84a9c",
        "type": "subflow:ecccc741.98fb58",
        "z": "66e74838.bd0f58",
        "name": "",
        "env": [],
        "x": 900,
        "y": 940,
        "wires": []
    },
    {
        "id": "5bbea671.49c808",
        "type": "function",
        "z": "66e74838.bd0f58",
        "name": "[Log] Error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Check vin information: Search vin\" + JSON.stringify(msg.error),\n    \"status\" : \"KO\"\n})\nreturn msg;   \n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 470,
        "y": 720,
        "wires": [
            [
                "a0e36917.889ca8"
            ]
        ]
    },
    {
        "id": "a732fafc.843348",
        "type": "comment",
        "z": "66e74838.bd0f58",
        "name": "Compare imei information",
        "info": "",
        "x": 190,
        "y": 760,
        "wires": []
    },
    {
        "id": "e44bba5e.2c1fe8",
        "type": "comment",
        "z": "66e74838.bd0f58",
        "name": "Sceeshot in case of error with brother",
        "info": "",
        "x": 970,
        "y": 740,
        "wires": []
    },
    {
        "id": "8d849d8c.76d23",
        "type": "comment",
        "z": "66e74838.bd0f58",
        "name": "Manage end of scenario with or without brother",
        "info": "",
        "x": 1000,
        "y": 820,
        "wires": []
    },
    {
        "id": "67138b94.b4f764",
        "type": "comment",
        "z": "66e74838.bd0f58",
        "name": "Http Response of Post Automatic Test : Synchrone or asynchrone",
        "info": "",
        "x": 1050,
        "y": 900,
        "wires": []
    },
    {
        "id": "e632572d.ec0e78",
        "type": "get-text",
        "z": "66e74838.bd0f58",
        "name": "Get IMEI",
        "expected": "",
        "selector": "xpath",
        "target": "//p[contains(@ng-bind,\"vehicleConfig.tbox.nodeId\")]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 180,
        "y": 820,
        "wires": [
            [
                "39f54cc3.1bbf94"
            ],
            [
                "a0e36917.889ca8"
            ]
        ]
    },
    {
        "id": "39f54cc3.1bbf94",
        "type": "function",
        "z": "66e74838.bd0f58",
        "name": "Compare with API",
        "func": "node.warn(msg.payload)\nnode.warn(msg.var.index)\n\nif(msg.var.imei == msg.payload){\n    msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Compare \" + msg.var.imei + \" \" + msg.payload,\n    \"status\" : \"OK\"}\n    );\n}else {\n     msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Compare \" + msg.var.imei + \" \" + msg.payload ,\n    \"status\" : \"KO\"}\n    );   \n}\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 450,
        "y": 880,
        "wires": [
            [
                "d30c4269.4d55c"
            ]
        ]
    },
    {
        "id": "8ce44d6a.b1fb08",
        "type": "click-on",
        "z": "a07f5af3.937dd",
        "name": "Click on configuration",
        "selector": "xpath",
        "target": "//*[@ng-click=\"changeDeviceTab('Config')\"]",
        "timeout": 15000,
        "waitFor": "500",
        "x": 480,
        "y": 100,
        "wires": [
            [
                "1fa3870.4aa8af9"
            ],
            [
                "6d6a505d.874c5"
            ]
        ]
    },
    {
        "id": "9dca7cfd.637918",
        "type": "function",
        "z": "a07f5af3.937dd",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Go to Configuration'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 240,
        "y": 100,
        "wires": [
            [
                "8ce44d6a.b1fb08"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "1fa3870.4aa8af9",
        "type": "function",
        "z": "a07f5af3.937dd",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Go to Configuration'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 710,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "6d6a505d.874c5",
        "type": "function",
        "z": "a07f5af3.937dd",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Go to Configuration : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Go to Configuration : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 220,
        "y": 200,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "5a9ad41f.ecb9c4",
        "type": "status",
        "z": "a07f5af3.937dd",
        "name": "",
        "scope": null,
        "x": 540,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "c9263bf1.b3ee18",
        "type": "function",
        "z": "1818d22b.fdbbfe",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Check bcall config in Service Details'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1170,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "7a59d826.4fb958",
        "type": "function",
        "z": "1818d22b.fdbbfe",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Check bcall config in Service Details'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 170,
        "y": 160,
        "wires": [
            [
                "8ceb10de.1bbe4"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "6c571fbe.e4f47",
        "type": "function",
        "z": "1818d22b.fdbbfe",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check bcall config in Service Details : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check bcall config in Service Details : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1040,
        "y": 340,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "8ceb10de.1bbe4",
        "type": "function",
        "z": "1818d22b.fdbbfe",
        "name": "[Log] Check Parameters",
        "func": "var propsToCheck = [\"bcallConfig\"]\nOK = true\npropsToCheck.forEach(prop => {\n    if (!msg.var[prop] == undefined) {\n        msg.traces.push({\n            \"time\" : new Date(), \n            \"message\" : \"Check parameters\",\n            \"status\" : `Missing ${prop}`}\n        );     \n        node.error(`Missing ${prop}`);\n\n        OK = false\n    }\n})\nif(OK) {\n    return [msg,null]\n}else{\n    return [null,msg]    \n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 160,
        "wires": [
            [
                "a07fa38b.4729a"
            ],
            [
                "6c571fbe.e4f47"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "b5966e81.1d2d9",
        "type": "get-text",
        "z": "1818d22b.fdbbfe",
        "name": "Get config",
        "expected": "",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 710,
        "y": 240,
        "wires": [
            [
                "c03b7260.e6513"
            ],
            [
                "6c571fbe.e4f47"
            ]
        ]
    },
    {
        "id": "351baa19.9875f6",
        "type": "function",
        "z": "1818d22b.fdbbfe",
        "name": "Set target",
        "func": "msg.target = '//span[text()=\"'+msg.var.configName+'\"]/..//span[@ng-bind=\"parametersList[0].value.bcallConfig[key]\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 510,
        "y": 240,
        "wires": [
            [
                "b5966e81.1d2d9"
            ]
        ]
    },
    {
        "id": "5017efa1.e4bef",
        "type": "function",
        "z": "1818d22b.fdbbfe",
        "name": "Set configName && loop",
        "func": "msg.var.configName = Object.keys(msg.var.bcallConfig)[msg.var.index]\nmsg.var.index ++\n\nif(msg.var.index == Object.keys(msg.var.bcallConfig).length){\n    return [msg,null]\n}else{\n    return [null,msg]\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 850,
        "y": 160,
        "wires": [
            [
                "c9263bf1.b3ee18"
            ],
            [
                "351baa19.9875f6"
            ]
        ]
    },
    {
        "id": "a07fa38b.4729a",
        "type": "function",
        "z": "1818d22b.fdbbfe",
        "name": "Init loop",
        "func": "msg.var.index = 0\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 620,
        "y": 160,
        "wires": [
            [
                "5017efa1.e4bef"
            ]
        ]
    },
    {
        "id": "c03b7260.e6513",
        "type": "function",
        "z": "1818d22b.fdbbfe",
        "name": "[Log] Compare with config",
        "func": "if(msg.payload == msg.var.bcallConfig[msg.var.configName]){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"OK \" + msg.var.configName + \" \" + msg.payload \n    });    \n}else{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"KO\" + msg.var.configName + \" \" + msg.payload\n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 930,
        "y": 240,
        "wires": [
            [
                "5017efa1.e4bef"
            ]
        ]
    },
    {
        "id": "a52c8905.b90db8",
        "type": "get-text",
        "z": "1818d22b.fdbbfe",
        "name": "Get attNumBcallLoc",
        "expected": "",
        "selector": "xpath",
        "target": "(//span[@ng-bind=\"parametersList[0].value.bcallConfig[key]\"])[1]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 440,
        "y": 660,
        "wires": [
            [
                "6b02c7da.f16e88"
            ],
            []
        ]
    },
    {
        "id": "3ef4e395.7cba2c",
        "type": "get-text",
        "z": "1818d22b.fdbbfe",
        "name": "Get attNumBcall",
        "expected": "",
        "selector": "xpath",
        "target": "(//span[@ng-bind=\"parametersList[0].value.bcallConfig[key]\"])[2]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 420,
        "y": 720,
        "wires": [
            [
                "5016bda7.720f44"
            ],
            []
        ]
    },
    {
        "id": "e87528d9.b8c2a8",
        "type": "get-text",
        "z": "1818d22b.fdbbfe",
        "name": "Get attNumSmsBcall",
        "expected": "",
        "selector": "xpath",
        "target": "(//span[@ng-bind=\"parametersList[0].value.bcallConfig[key]\"])[3]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 440,
        "y": 780,
        "wires": [
            [
                "911fa354.8669c"
            ],
            []
        ]
    },
    {
        "id": "6b02c7da.f16e88",
        "type": "function",
        "z": "1818d22b.fdbbfe",
        "name": "[Log] Compare with config",
        "func": "if(msg.payload == msg.var.attMccNb){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"OK \" + msg.payload \n    });    \n}else{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"KO\" + msg.payload\n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 670,
        "y": 660,
        "wires": [
            [
                "3ef4e395.7cba2c"
            ]
        ]
    },
    {
        "id": "5016bda7.720f44",
        "type": "function",
        "z": "1818d22b.fdbbfe",
        "name": "[Log] Compare with config",
        "func": "if(msg.payload == msg.var.attNumEcallLoc){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"OK \" + msg.payload \n    });    \n}else{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"KO\" + msg.payload\n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 670,
        "y": 720,
        "wires": [
            [
                "e87528d9.b8c2a8"
            ]
        ]
    },
    {
        "id": "911fa354.8669c",
        "type": "function",
        "z": "1818d22b.fdbbfe",
        "name": "[Log] Compare with config",
        "func": "if(msg.payload == msg.var.attNumEcall){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"OK \" + msg.payload \n    });    \n}else{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"KO\" + msg.payload\n    });\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 670,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "41b8c902.21b5d8",
        "type": "function",
        "z": "1818d22b.fdbbfe",
        "name": "[Log] Check Parameters",
        "func": "var propsToCheck = [\"bcallConfig\"]\nOK = true\npropsToCheck.forEach(prop => {\n    if (!msg.var[prop] == undefined) {\n        msg.traces.push({\n            \"time\" : new Date(), \n            \"message\" : \"Check parameters\",\n            \"status\" : `Missing ${prop}`}\n        );     \n        node.error(`Missing ${prop}`);\n        OK = false\n    }\n})\nif(OK){\n    return [msg, null];\n\n}else{\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 210,
        "y": 660,
        "wires": [
            [
                "a52c8905.b90db8"
            ],
            []
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "8530f11.087dc1",
        "type": "status",
        "z": "1818d22b.fdbbfe",
        "name": "",
        "scope": null,
        "x": 440,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "910e1dee.8204a",
        "type": "function",
        "z": "cdb79ded.f0316",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Check ecall config in Service Details'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1210,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "16904776.926ea9",
        "type": "function",
        "z": "cdb79ded.f0316",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Check ecall config in Service Details'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 170,
        "y": 80,
        "wires": [
            [
                "28a6df75.6a731"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "b12ef936.3881c8",
        "type": "function",
        "z": "cdb79ded.f0316",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check ecall config in Service Details : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check ecall config in Service Details : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1220,
        "y": 320,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "28a6df75.6a731",
        "type": "function",
        "z": "cdb79ded.f0316",
        "name": "[Log] Check Parameters",
        "func": "var propsToCheck = [\"ecallConfig\"]\nOK = true\npropsToCheck.forEach(prop => {\n    if (!msg.var[prop] == undefined) {\n        msg.traces.push({\n            \"time\" : new Date(), \n            \"message\" : \"Check parameters\",\n            \"status\" : `Missing ${prop}`}\n        );     \n        node.error(`Missing ${prop}`);\n\n        OK = false\n    }\n})\nif(OK) {\n    return [msg,null]\n}else{\n    return [null,msg]    \n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 80,
        "wires": [
            [
                "8cb510c7.cc761"
            ],
            [
                "b12ef936.3881c8"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "1c93fac1.619a45",
        "type": "get-text",
        "z": "cdb79ded.f0316",
        "name": "Get config",
        "expected": "",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 710,
        "y": 160,
        "wires": [
            [
                "7fd62926.9a3ee8"
            ],
            [
                "b12ef936.3881c8"
            ]
        ]
    },
    {
        "id": "ee83e51d.c1a448",
        "type": "function",
        "z": "cdb79ded.f0316",
        "name": "Set target",
        "func": "msg.target = '//span[text()=\"'+msg.var.configName+'\"]/..//span[@ng-bind=\"parametersList[0].value.ecallConfig[key]\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 510,
        "y": 160,
        "wires": [
            [
                "1c93fac1.619a45"
            ]
        ]
    },
    {
        "id": "9ba88a82.f54e58",
        "type": "function",
        "z": "cdb79ded.f0316",
        "name": "Set configName && loop",
        "func": "msg.var.configName = Object.keys(msg.var.ecallConfig)[msg.var.index]\nmsg.var.index ++\n\nif(msg.var.index == Object.keys(msg.var.ecallConfig).length){\n    return [msg,null]\n}else{\n    return [null,msg]\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 850,
        "y": 80,
        "wires": [
            [
                "910e1dee.8204a",
                "cfb63064.15781"
            ],
            [
                "ee83e51d.c1a448",
                "cfb63064.15781"
            ]
        ]
    },
    {
        "id": "8cb510c7.cc761",
        "type": "function",
        "z": "cdb79ded.f0316",
        "name": "Init loop",
        "func": "msg.var.index = 0\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 620,
        "y": 80,
        "wires": [
            [
                "9ba88a82.f54e58"
            ]
        ]
    },
    {
        "id": "55e4b754.8e0778",
        "type": "get-text",
        "z": "cdb79ded.f0316",
        "name": "Get attMccNb",
        "expected": "",
        "selector": "xpath",
        "target": "(//span[@ng-bind=\"parametersList[0].value.ecallConfig[key]\"])[1]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 520,
        "y": 520,
        "wires": [
            [
                "48b1ba49.417214"
            ],
            []
        ]
    },
    {
        "id": "137774a4.fb7b9b",
        "type": "get-text",
        "z": "cdb79ded.f0316",
        "name": "Get attNumEcallLoc",
        "expected": "",
        "selector": "xpath",
        "target": "(//span[@ng-bind=\"parametersList[0].value.ecallConfig[key]\"])[2]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 540,
        "y": 580,
        "wires": [
            [
                "ab23669f.cb1578"
            ],
            []
        ]
    },
    {
        "id": "c0dd2f0c.dcc23",
        "type": "get-text",
        "z": "cdb79ded.f0316",
        "name": "Get attNumEcall",
        "expected": "",
        "selector": "xpath",
        "target": "(//span[@ng-bind=\"parametersList[0].value.ecallConfig[key]\"])[3]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 520,
        "y": 640,
        "wires": [
            [
                "524d4164.6d8b6"
            ],
            []
        ]
    },
    {
        "id": "ac29b2ff.5ad7b",
        "type": "get-text",
        "z": "cdb79ded.f0316",
        "name": "Get attNumSmsEcall",
        "expected": "",
        "selector": "xpath",
        "target": "(//span[@ng-bind=\"parametersList[0].value.ecallConfig[key]\"])[4]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 540,
        "y": 700,
        "wires": [
            [
                "be961490.320988"
            ],
            []
        ]
    },
    {
        "id": "48b1ba49.417214",
        "type": "function",
        "z": "cdb79ded.f0316",
        "name": "[Log] Compare with config",
        "func": "if(msg.payload == msg.var.attMccNb){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"OK \" + msg.payload \n    });    \n}else{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"KO\" + msg.payload\n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 770,
        "y": 520,
        "wires": [
            [
                "137774a4.fb7b9b"
            ]
        ]
    },
    {
        "id": "ab23669f.cb1578",
        "type": "function",
        "z": "cdb79ded.f0316",
        "name": "[Log] Compare with config",
        "func": "if(msg.payload == msg.var.attNumEcallLoc){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"OK \" + msg.payload \n    });    \n}else{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"KO\" + msg.payload\n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 770,
        "y": 580,
        "wires": [
            [
                "c0dd2f0c.dcc23"
            ]
        ]
    },
    {
        "id": "524d4164.6d8b6",
        "type": "function",
        "z": "cdb79ded.f0316",
        "name": "[Log] Compare with config",
        "func": "if(msg.payload == msg.var.attNumEcall){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"OK \" + msg.payload \n    });    \n}else{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"KO\" + msg.payload\n    });\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 770,
        "y": 640,
        "wires": [
            [
                "ac29b2ff.5ad7b"
            ]
        ]
    },
    {
        "id": "be961490.320988",
        "type": "function",
        "z": "cdb79ded.f0316",
        "name": "[Log] Compare with config",
        "func": "if(msg.payload == msg.var.attNumSmsEcall){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"OK \" + msg.payload \n    });    \n}else{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"KO\" + msg.payload\n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 770,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "7fd62926.9a3ee8",
        "type": "function",
        "z": "cdb79ded.f0316",
        "name": "[Log] Compare with config",
        "func": "if(msg.payload == msg.var.ecallConfig[msg.var.configName]){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"OK \" + msg.var.configName + \" \" + msg.payload \n    });    \n}else{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Compare with config\",\n        \"status\" : \"KO\" + msg.var.configName + \" \" + msg.payload\n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 930,
        "y": 160,
        "wires": [
            [
                "9ba88a82.f54e58"
            ]
        ]
    },
    {
        "id": "cfb63064.15781",
        "type": "debug",
        "z": "cdb79ded.f0316",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1180,
        "y": 120,
        "wires": []
    },
    {
        "id": "18a67b2f.e8ad3d",
        "type": "status",
        "z": "cdb79ded.f0316",
        "name": "",
        "scope": null,
        "x": 240,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "cba3180a.f8e1b8",
        "type": "get-text",
        "z": "751bbf06.b21d",
        "name": "Get General Configuration",
        "expected": "",
        "selector": "xpath",
        "target": "(//div[contains(@ng-show,\"CurrentConfig\")]//pre)[1]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 200,
        "y": 80,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "91a1154c.88bde8",
        "type": "status",
        "z": "751bbf06.b21d",
        "name": "",
        "scope": null,
        "x": 180,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "272f502e.ce5ee",
        "type": "subflow:751bbf06.b21d",
        "z": "9985edbc.c1e07",
        "name": "",
        "env": [],
        "x": 930,
        "y": 60,
        "wires": [
            [
                "a99be250.cc293"
            ],
            [
                "ceb3d804.3e8708"
            ]
        ]
    },
    {
        "id": "a99be250.cc293",
        "type": "json",
        "z": "9985edbc.c1e07",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1130,
        "y": 60,
        "wires": [
            [
                "cfd79109.1294e"
            ]
        ]
    },
    {
        "id": "df6d05a1.1273a8",
        "type": "subflow:81fc44c3.b84448",
        "z": "9985edbc.c1e07",
        "name": "",
        "env": [],
        "x": 230,
        "y": 140,
        "wires": [
            [
                "9e9bc1d1.3b9f1"
            ],
            [
                "ceb3d804.3e8708"
            ]
        ]
    },
    {
        "id": "9e9bc1d1.3b9f1",
        "type": "click-on",
        "z": "9985edbc.c1e07",
        "name": "Click on activated service",
        "selector": "xpath",
        "target": "//span[@translate=\"serviceSupport_search_basicInfo_activatedServicesCount_label\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 470,
        "y": 140,
        "wires": [
            [
                "1f01c51e.b22b7b"
            ],
            [
                "ceb3d804.3e8708"
            ]
        ]
    },
    {
        "id": "f72da9d.f909858",
        "type": "click-on",
        "z": "9985edbc.c1e07",
        "name": "Click on ECALL",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "x": 380,
        "y": 200,
        "wires": [
            [
                "5faade8f.46d4a"
            ],
            [
                "ceb3d804.3e8708"
            ]
        ]
    },
    {
        "id": "1f01c51e.b22b7b",
        "type": "function",
        "z": "9985edbc.c1e07",
        "name": "Set target",
        "func": "msg.target = '//b[@title=\"'+msg.var.ECALL+'\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 200,
        "y": 200,
        "wires": [
            [
                "f72da9d.f909858"
            ]
        ]
    },
    {
        "id": "7f82830.0e86f7c",
        "type": "function",
        "z": "9985edbc.c1e07",
        "name": "Set target",
        "func": "msg.target = '//b[@title=\"'+msg.var.BCALL+'\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 200,
        "y": 260,
        "wires": [
            [
                "d13a73b3.f277c"
            ]
        ]
    },
    {
        "id": "5faade8f.46d4a",
        "type": "click-on",
        "z": "9985edbc.c1e07",
        "name": "Expand ecallConfig",
        "selector": "xpath",
        "target": "//span[text()=\"ecallConfig\"]/..//*[@class=\"iot-svg-icon\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 590,
        "y": 200,
        "wires": [
            [
                "7a0f6428.9ec78c"
            ],
            [
                "ceb3d804.3e8708"
            ]
        ]
    },
    {
        "id": "31a9e6d4.c4ceaa",
        "type": "click-on",
        "z": "9985edbc.c1e07",
        "name": "Expand bcallConfig",
        "selector": "xpath",
        "target": "//span[text()=\"bcallConfig\"]/..//*[@class=\"iot-svg-icon\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 590,
        "y": 260,
        "wires": [
            [
                "1a09918e.fe98fe"
            ],
            [
                "ceb3d804.3e8708"
            ]
        ]
    },
    {
        "id": "7a0f6428.9ec78c",
        "type": "subflow:cdb79ded.f0316",
        "z": "9985edbc.c1e07",
        "name": "",
        "env": [],
        "x": 870,
        "y": 200,
        "wires": [
            [
                "12d23f4f.024f21"
            ],
            [
                "ceb3d804.3e8708"
            ]
        ]
    },
    {
        "id": "cfd79109.1294e",
        "type": "function",
        "z": "9985edbc.c1e07",
        "name": "Store config",
        "func": "msg.var.ecallConfig = msg.payload.ecallConfig\nmsg.var.bcallConfig = msg.payload.bcallConfig\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1290,
        "y": 60,
        "wires": [
            [
                "df6d05a1.1273a8"
            ]
        ]
    },
    {
        "id": "12d23f4f.024f21",
        "type": "click-on",
        "z": "9985edbc.c1e07",
        "name": "Click on close",
        "selector": "xpath",
        "target": "//div[@id=\"activatedServiceDetail\"]//span[@translate=\"common_close_button\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 1140,
        "y": 200,
        "wires": [
            [
                "7f82830.0e86f7c"
            ],
            [
                "ceb3d804.3e8708"
            ]
        ]
    },
    {
        "id": "1a09918e.fe98fe",
        "type": "subflow:1818d22b.fdbbfe",
        "z": "9985edbc.c1e07",
        "name": "",
        "env": [],
        "x": 870,
        "y": 260,
        "wires": [
            [
                "19fd25a6.83473a"
            ],
            [
                "ceb3d804.3e8708"
            ]
        ]
    },
    {
        "id": "d13a73b3.f277c",
        "type": "click-on",
        "z": "9985edbc.c1e07",
        "name": "Click on BCALL",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "x": 380,
        "y": 260,
        "wires": [
            [
                "31a9e6d4.c4ceaa"
            ],
            [
                "ceb3d804.3e8708"
            ]
        ]
    },
    {
        "id": "19fd25a6.83473a",
        "type": "click-on",
        "z": "9985edbc.c1e07",
        "name": "Click on close",
        "selector": "xpath",
        "target": "//div[@id=\"activatedServiceDetail\"]//span[@translate=\"common_close_button\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 1140,
        "y": 260,
        "wires": [
            [
                "736db0a3.116af"
            ],
            [
                "ceb3d804.3e8708"
            ]
        ]
    },
    {
        "id": "a04c9909.1bd428",
        "type": "function",
        "z": "9985edbc.c1e07",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Check configuration correct for xCall'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 210,
        "y": 60,
        "wires": [
            [
                "977415d5.d840a8"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "977415d5.d840a8",
        "type": "function",
        "z": "9985edbc.c1e07",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.ECALL){\n    errorMessage = \"Missing ECALL.\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\nif (!msg.var.BCALL){\n    errorMessage = \"Missing BCALL.\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 450,
        "y": 60,
        "wires": [
            [
                "e515c0e9.47d16"
            ],
            [
                "ceb3d804.3e8708"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "e515c0e9.47d16",
        "type": "subflow:a07f5af3.937dd",
        "z": "9985edbc.c1e07",
        "name": "",
        "env": [],
        "x": 690,
        "y": 60,
        "wires": [
            [
                "272f502e.ce5ee"
            ],
            [
                "ceb3d804.3e8708"
            ]
        ]
    },
    {
        "id": "ceb3d804.3e8708",
        "type": "function",
        "z": "9985edbc.c1e07",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"ServiceData Interface Filter by Time & Direction & Search request for VIN : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n    node.error(msg.error)\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"ServiceData Interface Filter by Time & Direction & Search request for VIN : \",\n        \"status\" : \"KO\" \n    });\n    node.error(\"KO\");\n    \n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1180,
        "y": 340,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "736db0a3.116af",
        "type": "function",
        "z": "9985edbc.c1e07",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'ServiceData Interface Filter by Time & Direction & Search request for VIN'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1350,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "c535042f.b03898",
        "type": "status",
        "z": "9985edbc.c1e07",
        "name": "",
        "scope": null,
        "x": 360,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "a2ebdf0b.50b25",
        "type": "status",
        "z": "f3a92af2.2c1c28",
        "name": "",
        "scope": null,
        "x": 1120,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "b302a5cb.ebf148",
        "type": "function",
        "z": "f3a92af2.2c1c28",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.target) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"New click\",\n        \"status\" : \"Missing target\"}\n    );\n    node.error(\"Missing target\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 120,
        "wires": [
            [
                "f070a14a.7db868"
            ],
            []
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "f070a14a.7db868",
        "type": "click-on",
        "z": "f3a92af2.2c1c28",
        "name": "Click on target element",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "clickOn": false,
        "x": 660,
        "y": 120,
        "wires": [
            [],
            [
                "24b424c4.9774a4"
            ]
        ]
    },
    {
        "id": "e7ffe4ee.cbd938",
        "type": "function",
        "z": "f3a92af2.2c1c28",
        "name": "Set loopIndex",
        "func": "msg.var.loopIndex = 0;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 120,
        "wires": [
            [
                "b302a5cb.ebf148"
            ]
        ]
    },
    {
        "id": "24b424c4.9774a4",
        "type": "function",
        "z": "f3a92af2.2c1c28",
        "name": "Loop",
        "func": "if(msg.var.loopIndex < 10){\n    msg.var.loopIndex++;\n    node.warn(\"Click error. Loop : \"+msg.var.loopIndex);\n    return[msg, null];\n}else{\n    node.warn(\"Click failed. with loop : \"+msg.var.loopIndex);\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 140,
        "y": 260,
        "wires": [
            [
                "30c6a7fe.c699b"
            ],
            [
                "f802a60f.caec1"
            ]
        ]
    },
    {
        "id": "f802a60f.caec1",
        "type": "function",
        "z": "f3a92af2.2c1c28",
        "name": "[Log] error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"New click eroror: \",\n    \"status\" : \"KO. Save msg.error value\"\n})\nnode.error(\"New click failed. Save msg.error value\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 770,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "791fa913.cf36b8",
        "type": "comment",
        "z": "f3a92af2.2c1c28",
        "name": "msg.target need to be define. Try to click on element with 15 sec timeout. Retry 10 times before going into error",
        "info": "",
        "x": 430,
        "y": 60,
        "wires": []
    },
    {
        "id": "a32fe974.d35468",
        "type": "delay",
        "z": "f3a92af2.2c1c28",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 490,
        "y": 240,
        "wires": [
            [
                "f070a14a.7db868"
            ]
        ]
    },
    {
        "id": "30c6a7fe.c699b",
        "type": "function",
        "z": "f3a92af2.2c1c28",
        "name": "Set delay arround 2s",
        "func": "msg.delay = msg.var.delayArround2s *2000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 310,
        "y": 240,
        "wires": [
            [
                "a32fe974.d35468"
            ]
        ]
    },
    {
        "id": "b368f3c1.be09",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "Set dropdown option target",
        "func": "msg.target = '//*[@ng-click=\"selectInterface(interfaceName)\" and text()=\"'+env.get(\"INTERFACE_NAME\")+'\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 680,
        "y": 180,
        "wires": [
            [
                "7872b0c1.76b4d"
            ]
        ]
    },
    {
        "id": "e418f9ad.e1da58",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Interface Filter by Time & Direction'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 80,
        "wires": [
            [
                "faadd564.26f058"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "85bf33b4.0930d",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "Set Messages Direction option",
        "func": "msg.target = \"//*[contains(@ng-click,'selectMessageDirection') and text()='\"+env.get(\"MESSAGE_DIRECTION\")+\"']\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 700,
        "y": 280,
        "wires": [
            [
                "151cdae7.0464ad"
            ]
        ]
    },
    {
        "id": "faadd564.26f058",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.vin){\n    node.error(\"Missing optionnal parameter vin\");\n}\nif (!msg.seconds){\n    errorMessage = \"Missing seconds.\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\nif (!msg.minutes){\n    errorMessage = \"Missing minutes.\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\nif (!msg.hours){\n    errorMessage = \"Missing hours.\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 80,
        "wires": [
            [
                "221bced4.cbf80a"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "2bc83969.2af876",
        "type": "subflow:abca0904.8a4708",
        "z": "9ce5a906.a02df8",
        "name": "",
        "env": [],
        "x": 550,
        "y": 380,
        "wires": [
            [
                "2a853417.caf57c"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ]
    },
    {
        "id": "ebe4f0fc.abe52",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Interface Filter by Time & Direction'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1260,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "9b1a29cd.e01bd8",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Interface Filter by Time & Direction : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n    node.error(msg.error)\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Interface Filter by Time & Direction : \",\n        \"status\" : \"KO\" \n    });\n    node.error(\"KO\");\n    \n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1270,
        "y": 540,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "221bced4.cbf80a",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "Set Interface Name Dropdown",
        "func": "msg.target = \"//*[@id='interfaceList']//span[@translate='common_all_label']\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 250,
        "y": 180,
        "wires": [
            [
                "26f7a8b.72a4cd8"
            ]
        ]
    },
    {
        "id": "26f7a8b.72a4cd8",
        "type": "subflow:f3a92af2.2c1c28",
        "z": "9ce5a906.a02df8",
        "name": "",
        "env": [],
        "x": 460,
        "y": 180,
        "wires": [
            [
                "b368f3c1.be09"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ]
    },
    {
        "id": "7872b0c1.76b4d",
        "type": "subflow:f3a92af2.2c1c28",
        "z": "9ce5a906.a02df8",
        "name": "",
        "env": [],
        "x": 890,
        "y": 180,
        "wires": [
            [
                "7b2091e0.97ae1"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ]
    },
    {
        "id": "7b2091e0.97ae1",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "Set Message Direction Dropdown",
        "func": "msg.target = '//*[@ng-show=\"selectedMessageDirection == \\'All\\'\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 250,
        "y": 280,
        "wires": [
            [
                "9c1fd426.b3b8d8"
            ]
        ]
    },
    {
        "id": "9c1fd426.b3b8d8",
        "type": "subflow:f3a92af2.2c1c28",
        "z": "9ce5a906.a02df8",
        "name": "",
        "env": [],
        "x": 470,
        "y": 280,
        "wires": [
            [
                "85bf33b4.0930d"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ]
    },
    {
        "id": "151cdae7.0464ad",
        "type": "subflow:f3a92af2.2c1c28",
        "z": "9ce5a906.a02df8",
        "name": "",
        "x": 930,
        "y": 280,
        "wires": [
            [
                "98f02209.943ab"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ]
    },
    {
        "id": "98f02209.943ab",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "Set time dropdown",
        "func": "msg.target = '//span[contains(@ng-bind, \"dashboard.sftpServer.timeList\")]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1120,
        "y": 280,
        "wires": [
            [
                "5bd4ff4f.00db28"
            ]
        ]
    },
    {
        "id": "5bd4ff4f.00db28",
        "type": "subflow:f3a92af2.2c1c28",
        "z": "9ce5a906.a02df8",
        "name": "",
        "x": 1310,
        "y": 280,
        "wires": [
            [
                "20436f8d.e8e15"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ]
    },
    {
        "id": "20436f8d.e8e15",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "Set customize",
        "func": "msg.target = '//a[@ng-click=\"changeTimeType(type)\" and text()=\"Customize\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1480,
        "y": 280,
        "wires": [
            [
                "89e0b1e0.77b9b"
            ]
        ]
    },
    {
        "id": "89e0b1e0.77b9b",
        "type": "subflow:f3a92af2.2c1c28",
        "z": "9ce5a906.a02df8",
        "name": "",
        "x": 1650,
        "y": 280,
        "wires": [
            [
                "4cb1322b.989e94"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ]
    },
    {
        "id": "4cb1322b.989e94",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "Set start time",
        "func": "msg.target = '//div[@id=\"interfaceStartTime\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 200,
        "y": 380,
        "wires": [
            [
                "83dc9a0c.7e841"
            ]
        ]
    },
    {
        "id": "83dc9a0c.7e841",
        "type": "subflow:f3a92af2.2c1c28",
        "z": "9ce5a906.a02df8",
        "name": "",
        "x": 370,
        "y": 380,
        "wires": [
            [
                "2bc83969.2af876"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ]
    },
    {
        "id": "2a853417.caf57c",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "Set end time",
        "func": "msg.target = '//div[@id=\"interfaceEndTime\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 740,
        "y": 380,
        "wires": [
            [
                "e6cd7daf.3ad4d"
            ]
        ]
    },
    {
        "id": "e6cd7daf.3ad4d",
        "type": "subflow:f3a92af2.2c1c28",
        "z": "9ce5a906.a02df8",
        "name": "",
        "x": 910,
        "y": 380,
        "wires": [
            [
                "be389ef1.dc7cc8"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ]
    },
    {
        "id": "be389ef1.dc7cc8",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "Set today",
        "func": "msg.target = '//div[@class=\"ucd-datepicker ucd-datepicker-prevnext show\"]//button[@class=\"ucd-datepicker-btn ucd-datepicker-btn-today\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1070,
        "y": 380,
        "wires": [
            [
                "7de529d8.c208d8"
            ]
        ]
    },
    {
        "id": "7de529d8.c208d8",
        "type": "subflow:f3a92af2.2c1c28",
        "z": "9ce5a906.a02df8",
        "name": "",
        "x": 1230,
        "y": 380,
        "wires": [
            [
                "46224d08.948544"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ]
    },
    {
        "id": "46224d08.948544",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "Set OK",
        "func": "msg.target = '//div[@class=\"ucd-datepicker ucd-datepicker-prevnext show\"]//button[@class=\"ucd-datepicker-btn ucd-datepicker-btn-ok\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1380,
        "y": 380,
        "wires": [
            [
                "2a3efc79.52fa24"
            ]
        ]
    },
    {
        "id": "2a3efc79.52fa24",
        "type": "subflow:f3a92af2.2c1c28",
        "z": "9ce5a906.a02df8",
        "name": "",
        "x": 1530,
        "y": 380,
        "wires": [
            [
                "548473be.9e2984"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ]
    },
    {
        "id": "82edea72.39c2c8",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "Set Status dropdown",
        "func": "msg.target = '//span[@translate=\"common_status_column\"]/../..//span[contains(@class,\"dropdown\")]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 230,
        "y": 480,
        "wires": [
            [
                "760b046.dc7277c"
            ]
        ]
    },
    {
        "id": "760b046.dc7277c",
        "type": "subflow:f3a92af2.2c1c28",
        "z": "9ce5a906.a02df8",
        "name": "",
        "x": 420,
        "y": 480,
        "wires": [
            [
                "4c5ac1c7.0c01e8"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ]
    },
    {
        "id": "4c5ac1c7.0c01e8",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "Set All",
        "func": "msg.target = '//a[@translate=\"common_all_label\" and @ng-click=\"selectInterfaceDataStatus()\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 570,
        "y": 480,
        "wires": [
            [
                "29108bea.6a1634"
            ]
        ]
    },
    {
        "id": "29108bea.6a1634",
        "type": "subflow:f3a92af2.2c1c28",
        "z": "9ce5a906.a02df8",
        "name": "",
        "x": 720,
        "y": 480,
        "wires": [
            [
                "c2ba45e1.abe6c8"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ]
    },
    {
        "id": "c2ba45e1.abe6c8",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "Set Search",
        "func": "msg.target = \"//span[@ng-click='searchInterfaceDataForm()']\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 880,
        "y": 480,
        "wires": [
            [
                "adb5c9e9.7fad6"
            ]
        ]
    },
    {
        "id": "adb5c9e9.7fad6",
        "type": "subflow:f3a92af2.2c1c28",
        "z": "9ce5a906.a02df8",
        "name": "",
        "env": [],
        "x": 1040,
        "y": 480,
        "wires": [
            [
                "ebe4f0fc.abe52"
            ],
            [
                "9b1a29cd.e01bd8"
            ]
        ]
    },
    {
        "id": "8a434963.4c676",
        "type": "comment",
        "z": "9ce5a906.a02df8",
        "name": "Click on interface name dropdown > interface name option",
        "info": "",
        "x": 360,
        "y": 140,
        "wires": []
    },
    {
        "id": "4cfc737c.a5ea7c",
        "type": "comment",
        "z": "9ce5a906.a02df8",
        "name": "Click on message direction dropdown > Message direction option > Time dropdown > Customize option",
        "info": "",
        "x": 500,
        "y": 240,
        "wires": []
    },
    {
        "id": "aef6b402.8d1c6",
        "type": "comment",
        "z": "9ce5a906.a02df8",
        "name": "Click on Start time > Set time > Click on End time > Today > OK",
        "info": "",
        "x": 370,
        "y": 340,
        "wires": []
    },
    {
        "id": "2f364460.9d21c4",
        "type": "comment",
        "z": "9ce5a906.a02df8",
        "name": "Click on Status dropdown > All > Search",
        "info": "",
        "x": 280,
        "y": 440,
        "wires": []
    },
    {
        "id": "548473be.9e2984",
        "type": "function",
        "z": "9ce5a906.a02df8",
        "name": "Set delay arround 5s",
        "func": "msg.delay = msg.var.delayArround5s *5000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1730,
        "y": 380,
        "wires": [
            [
                "3fef1a22.18d5b6"
            ]
        ]
    },
    {
        "id": "3fef1a22.18d5b6",
        "type": "delay",
        "z": "9ce5a906.a02df8",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1910,
        "y": 380,
        "wires": [
            [
                "82edea72.39c2c8"
            ]
        ]
    },
    {
        "id": "9d9f4d3d.655588",
        "type": "status",
        "z": "9ce5a906.a02df8",
        "name": "",
        "scope": null,
        "x": 713,
        "y": 81,
        "wires": [
            []
        ]
    },
    {
        "id": "fb864323.43b0e",
        "type": "subflow:9ce5a906.a02df8",
        "z": "b8ee0896.c31708",
        "name": "",
        "env": [],
        "x": 200,
        "y": 80,
        "wires": [
            [
                "3d52ec95.e326a4"
            ],
            [
                "4e159221.b0966c"
            ]
        ]
    },
    {
        "id": "af0a1779.084008",
        "type": "click-on",
        "z": "b8ee0896.c31708",
        "name": "Click on first line",
        "selector": "xpath",
        "target": "(//tr[@ng-click=\"toShowDataDetail(opt)\"])[1]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 140,
        "y": 140,
        "wires": [
            [
                "d4ff378e.40ddf8"
            ],
            [
                "5175e2ac.3a3f5c"
            ]
        ]
    },
    {
        "id": "b48a850f.502b58",
        "type": "get-text",
        "z": "b8ee0896.c31708",
        "name": "Get request payload",
        "expected": "",
        "selector": "xpath",
        "target": "//p[@ng-bind=\"statisticsDataObject.request || nullStr\"]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 160,
        "y": 380,
        "wires": [
            [
                "2ee6566b.9ead8a"
            ],
            [
                "4e159221.b0966c"
            ]
        ]
    },
    {
        "id": "2ee6566b.9ead8a",
        "type": "json",
        "z": "b8ee0896.c31708",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 350,
        "y": 380,
        "wires": [
            [
                "54c2919e.075cf"
            ]
        ]
    },
    {
        "id": "54c2919e.075cf",
        "type": "function",
        "z": "b8ee0896.c31708",
        "name": "[Log] Get BTA information included",
        "func": "if(msg.payload.dataList.find(x => x.vin == msg.var.vin).atbStatus){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Get BTA information included\",\n        \"status\" : \"OK \" + msg.payload \n    });    \n    \n}else{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Get BTA information included\",\n        \"status\" : \"KO  \" + msg.payload \n    });    \n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 580,
        "y": 380,
        "wires": [
            [
                "d7438f6.80c927"
            ]
        ]
    },
    {
        "id": "6858410e.5e07b",
        "type": "function",
        "z": "b8ee0896.c31708",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'ServiceData Interface Filter by Time & Direction & Search request for VIN'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 870,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "4e159221.b0966c",
        "type": "function",
        "z": "b8ee0896.c31708",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"ServiceData Interface Filter by Time & Direction & Search request for VIN : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n    node.error(msg.error)\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"ServiceData Interface Filter by Time & Direction & Search request for VIN : \",\n        \"status\" : \"KO\" \n    });\n    node.error(\"KO\");\n    \n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 860,
        "y": 560,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "fc8b4db5.909",
        "type": "function",
        "z": "b8ee0896.c31708",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'ServiceData Interface Filter by Time & Direction & Search request for VIN'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 210,
        "y": 20,
        "wires": [
            [
                "6ef74db9.649f64"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "6ef74db9.649f64",
        "type": "function",
        "z": "b8ee0896.c31708",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.vin){\n    errorMessage = \"Missing vin.\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\nif (!msg.seconds){\n    errorMessage = \"Missing seconds.\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\nif (!msg.minutes){\n    errorMessage = \"Missing minutes.\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\nif (!msg.hours){\n    errorMessage = \"Missing hours.\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 430,
        "y": 20,
        "wires": [
            [
                "fb864323.43b0e"
            ],
            [
                "4e159221.b0966c"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "d7438f6.80c927",
        "type": "click-on",
        "z": "b8ee0896.c31708",
        "name": "Click on close",
        "selector": "xpath",
        "target": "(//form[@name=\"formShowMessageDetail\"]//span[@ng-click=\"hintCreateToReturn()\"])[1]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 840,
        "y": 380,
        "wires": [
            [
                "6858410e.5e07b"
            ],
            [
                "4e159221.b0966c"
            ]
        ]
    },
    {
        "id": "d4ff378e.40ddf8",
        "type": "get-text",
        "z": "b8ee0896.c31708",
        "name": "Get status code",
        "expected": "",
        "selector": "xpath",
        "target": "//p[@ng-bind=\"statisticsDataObject.statusCode || nullStr\"]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 140,
        "y": 320,
        "wires": [
            [
                "14e84306.1e696d"
            ],
            [
                "4e159221.b0966c"
            ]
        ]
    },
    {
        "id": "14e84306.1e696d",
        "type": "function",
        "z": "b8ee0896.c31708",
        "name": "[Log] Get Status code",
        "func": "if(msg.payload == \"200\"){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Get Status code\",\n        \"status\" : \"OK \" + msg.payload \n    });    \n    \n}else{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Get Status code\",\n        \"status\" : \"KO  \" + msg.payload \n    });    \n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 340,
        "y": 320,
        "wires": [
            [
                "b48a850f.502b58"
            ]
        ]
    },
    {
        "id": "dd943290.243c3",
        "type": "status",
        "z": "b8ee0896.c31708",
        "name": "",
        "scope": null,
        "x": 880,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "81f311d7.001e7",
        "type": "function",
        "z": "b8ee0896.c31708",
        "name": "Check loop",
        "func": "if (msg.loopcount < 5){\n    msg.loopcount = msg.loopcount + 1;\n    noced.warn(\"retry: \"+ loopcount-1)\n    return [msg,null];\n}else{\n    msg.error = \"No Result in interface list\"\n    return [null,msg];\n}\nreturn msg;",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 370,
        "y": 260,
        "wires": [
            [
                "af0a1779.084008"
            ],
            [
                "4e159221.b0966c"
            ]
        ]
    },
    {
        "id": "3d52ec95.e326a4",
        "type": "function",
        "z": "b8ee0896.c31708",
        "name": "Init Loop",
        "func": "msg.loopcount = 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 500,
        "y": 80,
        "wires": [
            [
                "af0a1779.084008"
            ]
        ]
    },
    {
        "id": "ef5682be.c1fa9",
        "type": "click-on",
        "z": "b8ee0896.c31708",
        "name": "Click on end time",
        "selector": "xpath",
        "target": "//div[@id=\"interfaceEndTime\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 150,
        "y": 200,
        "wires": [
            [
                "573bec8c.b0a804"
            ],
            [
                "4e159221.b0966c"
            ]
        ]
    },
    {
        "id": "573bec8c.b0a804",
        "type": "click-on",
        "z": "b8ee0896.c31708",
        "name": "Click on Today",
        "selector": "xpath",
        "target": "//div[@class=\"ucd-datepicker ucd-datepicker-prevnext show\"]//button[@class=\"ucd-datepicker-btn ucd-datepicker-btn-today\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 350,
        "y": 200,
        "wires": [
            [
                "fd63928a.1fdda"
            ],
            [
                "4e159221.b0966c"
            ]
        ]
    },
    {
        "id": "fd63928a.1fdda",
        "type": "click-on",
        "z": "b8ee0896.c31708",
        "name": "Click on OK",
        "selector": "xpath",
        "target": "//div[@class=\"ucd-datepicker ucd-datepicker-prevnext show\"]//button[@class=\"ucd-datepicker-btn ucd-datepicker-btn-ok\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 530,
        "y": 200,
        "wires": [
            [
                "de0bd166.bfddf"
            ],
            [
                "4e159221.b0966c"
            ]
        ]
    },
    {
        "id": "2e87b987.ed9a36",
        "type": "click-on",
        "z": "b8ee0896.c31708",
        "name": "Click on Search",
        "selector": "xpath",
        "target": "//span[@ng-click='searchInterfaceDataForm()']",
        "timeout": 15000,
        "waitFor": 500,
        "x": 140,
        "y": 260,
        "wires": [
            [
                "81f311d7.001e7"
            ],
            [
                "4e159221.b0966c"
            ]
        ]
    },
    {
        "id": "de0bd166.bfddf",
        "type": "function",
        "z": "b8ee0896.c31708",
        "name": "Set delay arround 5s",
        "func": "msg.delay = msg.var.delayArround5s *5000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 730,
        "y": 180,
        "wires": [
            [
                "1779079d.996918"
            ]
        ]
    },
    {
        "id": "1779079d.996918",
        "type": "delay",
        "z": "b8ee0896.c31708",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 930,
        "y": 180,
        "wires": [
            [
                "2e87b987.ed9a36"
            ]
        ]
    },
    {
        "id": "c79fc2b7.333818",
        "type": "delay",
        "z": "b8ee0896.c31708",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 550,
        "y": 140,
        "wires": [
            [
                "ef5682be.c1fa9"
            ]
        ]
    },
    {
        "id": "5175e2ac.3a3f5c",
        "type": "function",
        "z": "b8ee0896.c31708",
        "name": "Set delay arround 1min",
        "func": "msg.delay = msg.var.delayArround1min *60000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 360,
        "y": 140,
        "wires": [
            [
                "c79fc2b7.333818"
            ]
        ]
    },
    {
        "id": "45755c06.d56724",
        "type": "click-on",
        "z": "ea24abfa.91b488",
        "name": "Click on PUSH_RECORDS_TAB",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "x": 460,
        "y": 140,
        "wires": [
            [
                "a24e44a6.ad1388"
            ],
            [
                "2d423ce7.1303f4"
            ]
        ]
    },
    {
        "id": "33070e00.440602",
        "type": "function",
        "z": "ea24abfa.91b488",
        "name": "Set service target",
        "func": "msg.target = '//ul[@class=\"iot-tab-title\"]//span[text()=\"'+env.get(\"PUSH_RECORDS_TAB\")+'\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 140,
        "wires": [
            [
                "45755c06.d56724"
            ]
        ]
    },
    {
        "id": "2d423ce7.1303f4",
        "type": "function",
        "z": "ea24abfa.91b488",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    node.error(msg.error)\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Change Push Record Tab :\",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Change Push Record Tab :\",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 880,
        "y": 100,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "871b0d8e.f13da",
        "type": "function",
        "z": "ea24abfa.91b488",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Change Push Record Tab'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 80,
        "wires": [
            [
                "484993c4.d9a5ac"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "484993c4.d9a5ac",
        "type": "function",
        "z": "ea24abfa.91b488",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.vin) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing msg.var.vin\"}\n    );\n    node.error(\"Missing msg.var.vin\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 430,
        "y": 80,
        "wires": [
            [
                "33070e00.440602"
            ],
            [
                "2d423ce7.1303f4"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "a24e44a6.ad1388",
        "type": "function",
        "z": "ea24abfa.91b488",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'ServiceData Interface Filter by Time & Direction & Search request for VIN'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 810,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "556114c3.3deeac",
        "type": "status",
        "z": "ea24abfa.91b488",
        "name": "",
        "scope": null,
        "x": 340,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "55729583.20999c",
        "type": "subflow:ea24abfa.91b488",
        "z": "b04bb7a8.add2d8",
        "name": "",
        "env": [],
        "x": 190,
        "y": 160,
        "wires": [
            [
                "2a37734e.8f7bfc"
            ],
            [
                "f7bd2912.274338"
            ]
        ]
    },
    {
        "id": "4760f061.ec246",
        "type": "send-keys",
        "z": "b04bb7a8.add2d8",
        "name": "Set VIN",
        "keys": "",
        "selector": "xpath",
        "target": "//input[@name=\"search_serviceDataVin\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 560,
        "y": 160,
        "wires": [
            [
                "55c9a3d5.ccc5cc"
            ],
            [
                "f7bd2912.274338"
            ]
        ]
    },
    {
        "id": "2a37734e.8f7bfc",
        "type": "function",
        "z": "b04bb7a8.add2d8",
        "name": "Set value",
        "func": "msg.keys = msg.var.vin\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 400,
        "y": 160,
        "wires": [
            [
                "4760f061.ec246"
            ]
        ]
    },
    {
        "id": "55c9a3d5.ccc5cc",
        "type": "click-on",
        "z": "b04bb7a8.add2d8",
        "name": "Click on start time",
        "selector": "xpath",
        "target": "//div[@id=\"serviceDataStartTime\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 750,
        "y": 160,
        "wires": [
            [
                "e5db52f7.86ec2"
            ],
            [
                "f7bd2912.274338"
            ]
        ]
    },
    {
        "id": "287172c2.71b3ce",
        "type": "subflow:abca0904.8a4708",
        "z": "b04bb7a8.add2d8",
        "name": "",
        "x": 1170,
        "y": 160,
        "wires": [
            [
                "a147ad75.4f1c1"
            ],
            [
                "f7bd2912.274338"
            ]
        ]
    },
    {
        "id": "e5db52f7.86ec2",
        "type": "click-on",
        "z": "b04bb7a8.add2d8",
        "name": "Click on Today",
        "selector": "xpath",
        "target": "//div[@class=\"ucd-datepicker ucd-datepicker-prevnext show\"]//button[@class=\"ucd-datepicker-btn ucd-datepicker-btn-today\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 960,
        "y": 160,
        "wires": [
            [
                "287172c2.71b3ce"
            ],
            [
                "f7bd2912.274338"
            ]
        ]
    },
    {
        "id": "ade3c043.68286",
        "type": "function",
        "z": "b04bb7a8.add2d8",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Service Data Push records filter VIN & Time'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 150,
        "y": 80,
        "wires": [
            [
                "d351560f.057888"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "d351560f.057888",
        "type": "function",
        "z": "b04bb7a8.add2d8",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.vin) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing msg.var.vin\"}\n    );\n    node.error(\"Missing msg.var.vin\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 80,
        "wires": [
            [
                "55729583.20999c"
            ],
            [
                "f7bd2912.274338"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "f7bd2912.274338",
        "type": "function",
        "z": "b04bb7a8.add2d8",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    node.error(msg.error)\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Service Data Push records filter VIN & Time :\",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Service Data Push records filter VIN & Time :\",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1560,
        "y": 220,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "9d18f974.4c0f48",
        "type": "function",
        "z": "b04bb7a8.add2d8",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Service Data Push records filter VIN & Time'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1570,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "a147ad75.4f1c1",
        "type": "click-on",
        "z": "b04bb7a8.add2d8",
        "name": "Click on search",
        "selector": "xpath",
        "target": "//span[@ng-click=\"searchServiceDataForm()\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 1380,
        "y": 160,
        "wires": [
            [
                "9d18f974.4c0f48"
            ],
            [
                "f7bd2912.274338"
            ]
        ]
    },
    {
        "id": "bac93bdb.82afb",
        "type": "status",
        "z": "b04bb7a8.add2d8",
        "name": "",
        "scope": null,
        "x": 260,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "36e8e6e9.61653a",
        "type": "get-text",
        "z": "5fa31620.c1c078",
        "name": "Get first line push status",
        "expected": "",
        "selector": "xpath",
        "target": "//span[contains(@ng-bind,\"datas.pushStatus\")]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 510,
        "y": 80,
        "wires": [
            [
                "58daf577.94896c"
            ],
            [
                "f3ed435f.8ff5"
            ]
        ]
    },
    {
        "id": "7854d086.4eb83",
        "type": "subflow:b04bb7a8.add2d8",
        "z": "5fa31620.c1c078",
        "name": "",
        "env": [],
        "x": 190,
        "y": 80,
        "wires": [
            [
                "36e8e6e9.61653a"
            ],
            [
                "f3ed435f.8ff5"
            ]
        ]
    },
    {
        "id": "58daf577.94896c",
        "type": "function",
        "z": "5fa31620.c1c078",
        "name": "[Log] Push status Sent",
        "func": "if(msg.payload == \"Sent\"){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Push status Sent\",\n        \"status\" : \"OK \" + msg.payload \n    });    \n}else{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Push status Sent\",\n        \"status\" : \"KO\" + msg.payload\n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 760,
        "y": 80,
        "wires": [
            [
                "d5f1d54c.2155a8"
            ]
        ]
    },
    {
        "id": "d368c3de.f7dba",
        "type": "function",
        "z": "5fa31620.c1c078",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Check service data push record status for VIN & Time'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 210,
        "y": 40,
        "wires": [
            [
                "8909f4c.a271308"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "8909f4c.a271308",
        "type": "function",
        "z": "5fa31620.c1c078",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.vin) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing msg.var.vin\"}\n    );\n    node.error(\"Missing msg.var.vin\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 450,
        "y": 40,
        "wires": [
            [
                "7854d086.4eb83"
            ],
            [
                "f3ed435f.8ff5"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "d5f1d54c.2155a8",
        "type": "function",
        "z": "5fa31620.c1c078",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Check service data push record status for VIN & Time'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 990,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "f3ed435f.8ff5",
        "type": "function",
        "z": "5fa31620.c1c078",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    node.error(msg.error)\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check service data push record status for VIN & Time :\",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check service data push record status for VIN & Time :\",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1000,
        "y": 140,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "1752d08b.5f84cf",
        "type": "status",
        "z": "5fa31620.c1c078",
        "name": "",
        "scope": null,
        "x": 140,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "584b93e4.6e3cac",
        "type": "click-on",
        "z": "b430ab83.04b7d8",
        "name": "Click on RULE_NAME",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "x": 540,
        "y": 80,
        "wires": [
            [
                "b953515.8f72ab"
            ],
            [
                "f0a4ec77.63987"
            ]
        ]
    },
    {
        "id": "b953515.8f72ab",
        "type": "click-on",
        "z": "b430ab83.04b7d8",
        "name": "Click on Edit condition settings",
        "selector": "xpath",
        "target": "//span[@translate=\"serviceSupport_ruleEngine_conditionSet_label\"]/../..//tbody[contains(@ng-show, \"DAILY_TIMER\")]//span[@title=\"Edit\"]",
        "timeout": 15000,
        "waitFor": "2000",
        "x": 190,
        "y": 120,
        "wires": [
            [
                "d6c48258.cc79d"
            ],
            [
                "f0a4ec77.63987"
            ]
        ]
    },
    {
        "id": "3b6a28d2.2de568",
        "type": "click-on",
        "z": "b430ab83.04b7d8",
        "name": "Click on OK condition",
        "selector": "xpath",
        "target": "//div[@id=\"addConditionBox\"]//span[@ng-click=\"addCondition()\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 620,
        "y": 240,
        "wires": [
            [
                "7fa19c88.927484"
            ],
            [
                "f0a4ec77.63987"
            ]
        ]
    },
    {
        "id": "15156984.e92fd6",
        "type": "send-keys",
        "z": "b430ab83.04b7d8",
        "name": "Set Hours",
        "keys": "",
        "selector": "xpath",
        "target": "//input[@ng-model=\"timeAreaCondition.startHour\"]",
        "timeout": 15000,
        "waitFor": 500,
        "clearVal": true,
        "x": 360,
        "y": 180,
        "wires": [
            [
                "e406264f.cb5268"
            ],
            [
                "f0a4ec77.63987"
            ]
        ]
    },
    {
        "id": "d6c48258.cc79d",
        "type": "function",
        "z": "b430ab83.04b7d8",
        "name": "Get Hours + 2 minutes",
        "func": "var newDate = new Date(new Date().getTime() + 2*60000); //2 minutes after now\nmsg.keys = \"\"+newDate.getHours()\nmsg.debug = new Date()\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 160,
        "y": 180,
        "wires": [
            [
                "15156984.e92fd6"
            ]
        ]
    },
    {
        "id": "e406264f.cb5268",
        "type": "function",
        "z": "b430ab83.04b7d8",
        "name": "Get minutes + 2 minutes",
        "func": "var newDate = new Date(new Date().getTime() + 2*60000); //2 minutes after now\nmsg.keys = \"\"+ newDate.getMinutes();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 170,
        "y": 240,
        "wires": [
            [
                "e1d1375f.cf8cd8"
            ]
        ]
    },
    {
        "id": "e1d1375f.cf8cd8",
        "type": "send-keys",
        "z": "b430ab83.04b7d8",
        "name": "Set Minutes",
        "keys": "",
        "selector": "xpath",
        "target": "//input[@ng-model=\"timeAreaCondition.startMin\"]",
        "timeout": 15000,
        "waitFor": 500,
        "clearVal": true,
        "x": 380,
        "y": 240,
        "wires": [
            [
                "3b6a28d2.2de568"
            ],
            [
                "f0a4ec77.63987"
            ]
        ]
    },
    {
        "id": "eb4f79bf.f674c8",
        "type": "function",
        "z": "b430ab83.04b7d8",
        "name": "Set target",
        "func": "msg.target = '//b[@title=\"'+env.get(\"RULE_NAME\")+'\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 340,
        "y": 80,
        "wires": [
            [
                "584b93e4.6e3cac"
            ]
        ]
    },
    {
        "id": "7fa19c88.927484",
        "type": "click-on",
        "z": "b430ab83.04b7d8",
        "name": "Click on OK rule",
        "selector": "xpath",
        "target": "//span[@ng-click=\"addRuleConfirm()\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 840,
        "y": 240,
        "wires": [
            [
                "96a162f1.90ac1"
            ],
            [
                "f0a4ec77.63987"
            ]
        ]
    },
    {
        "id": "efbf9e6d.cee46",
        "type": "function",
        "z": "b430ab83.04b7d8",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Trigger Rule Specific Time' for : \" + env.get(\"RULE_NAME\"),\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 150,
        "y": 80,
        "wires": [
            [
                "eb4f79bf.f674c8"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "24247bc9.3bfc54",
        "type": "function",
        "z": "b430ab83.04b7d8",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF Function Check Message Trace and ID'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1330,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "50085537.d7a24c",
        "type": "function",
        "z": "b430ab83.04b7d8",
        "name": "[Log] End workflow ",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Trigger Rule Specific Time' for : \" + env.get(\"RULE_NAME\"),\n    \"status\" : \"OK\"}\n);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 870,
        "y": 340,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "f0a4ec77.63987",
        "type": "function",
        "z": "b430ab83.04b7d8",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Trigger Rule Specific Time :\",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Trigger Rule Specific Time :\",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1040,
        "y": 120,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "e2d05fe8.c95d28",
        "type": "status",
        "z": "b430ab83.04b7d8",
        "name": "",
        "scope": null,
        "x": 180,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "ad57cd72.759a58",
        "type": "delay",
        "z": "b430ab83.04b7d8",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 870,
        "y": 300,
        "wires": [
            [
                "50085537.d7a24c"
            ]
        ]
    },
    {
        "id": "96a162f1.90ac1",
        "type": "function",
        "z": "b430ab83.04b7d8",
        "name": "Set delay arround 2min",
        "func": "msg.delay = msg.var.delayArround2min *120000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 680,
        "y": 300,
        "wires": [
            [
                "ad57cd72.759a58"
            ]
        ]
    },
    {
        "id": "3d0017f0.1d3328",
        "type": "click-on",
        "z": "2359ccd.4db1234",
        "name": "Click on SERVER_NAME",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "x": 690,
        "y": 80,
        "wires": [
            [
                "dee5a5fc.40e7e8"
            ],
            [
                "98279a98.fa55c8"
            ]
        ]
    },
    {
        "id": "f105b5f3.6ea888",
        "type": "click-on",
        "z": "2359ccd.4db1234",
        "name": "Click on server name dropdown",
        "selector": "id",
        "target": "interfaceList",
        "timeout": 15000,
        "waitFor": 500,
        "x": 250,
        "y": 80,
        "wires": [
            [
                "956634b3.327ae8"
            ],
            [
                "98279a98.fa55c8"
            ]
        ]
    },
    {
        "id": "956634b3.327ae8",
        "type": "function",
        "z": "2359ccd.4db1234",
        "name": "Set target",
        "func": "msg.target = '//div[@id=\"interfaceList\"]/*//a[text()=\"'+env.get(\"SERVER_NAME\")+'\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 480,
        "y": 80,
        "wires": [
            [
                "3d0017f0.1d3328"
            ]
        ]
    },
    {
        "id": "dee5a5fc.40e7e8",
        "type": "click-on",
        "z": "2359ccd.4db1234",
        "name": "Click on time dropdown",
        "selector": "xpath",
        "target": "//span[contains(@ng-bind, \"dashboard.sftpServer.timeList\")]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 1010,
        "y": 80,
        "wires": [
            [
                "fabe2650.e0de18"
            ],
            [
                "98279a98.fa55c8"
            ]
        ]
    },
    {
        "id": "fabe2650.e0de18",
        "type": "click-on",
        "z": "2359ccd.4db1234",
        "name": "Click on customize",
        "selector": "xpath",
        "target": "//a[@ng-click=\"changeTimeType(type)\" and text()=\"Customize\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 1250,
        "y": 80,
        "wires": [
            [
                "1d1dd273.6f69be"
            ],
            [
                "98279a98.fa55c8"
            ]
        ]
    },
    {
        "id": "1d1dd273.6f69be",
        "type": "click-on",
        "z": "2359ccd.4db1234",
        "name": "Click on start time",
        "selector": "xpath",
        "target": "//div[@id=\"serverStartTime\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 190,
        "y": 140,
        "wires": [
            [
                "55cb0d65.7b4a14"
            ],
            [
                "98279a98.fa55c8"
            ]
        ]
    },
    {
        "id": "55cb0d65.7b4a14",
        "type": "subflow:abca0904.8a4708",
        "z": "2359ccd.4db1234",
        "name": "",
        "env": [],
        "x": 410,
        "y": 140,
        "wires": [
            [
                "8e78898d.ce6d38"
            ],
            [
                "98279a98.fa55c8"
            ]
        ]
    },
    {
        "id": "8e78898d.ce6d38",
        "type": "click-on",
        "z": "2359ccd.4db1234",
        "name": "Click on end time",
        "selector": "xpath",
        "target": "//div[@id=\"serverEndTime\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 630,
        "y": 140,
        "wires": [
            [
                "8cf884af.09e2e8"
            ],
            [
                "98279a98.fa55c8"
            ]
        ]
    },
    {
        "id": "8cf884af.09e2e8",
        "type": "click-on",
        "z": "2359ccd.4db1234",
        "name": "Click on Today",
        "selector": "xpath",
        "target": "//div[@class=\"ucd-datepicker ucd-datepicker-prevnext show\"]//button[@class=\"ucd-datepicker-btn ucd-datepicker-btn-today\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 830,
        "y": 140,
        "wires": [
            [
                "da6853b1.f6579"
            ],
            [
                "98279a98.fa55c8"
            ]
        ]
    },
    {
        "id": "da6853b1.f6579",
        "type": "click-on",
        "z": "2359ccd.4db1234",
        "name": "Click on OK",
        "selector": "xpath",
        "target": "//div[@class=\"ucd-datepicker ucd-datepicker-prevnext show\"]//button[@class=\"ucd-datepicker-btn ucd-datepicker-btn-ok\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 1010,
        "y": 140,
        "wires": [
            [
                "ba4c3b96.a84348"
            ],
            [
                "98279a98.fa55c8"
            ]
        ]
    },
    {
        "id": "3d341074.2aad8",
        "type": "function",
        "z": "2359ccd.4db1234",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Filter SFTP '\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 40,
        "wires": [
            [
                "e95ade51.fee1c"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "e95ade51.fee1c",
        "type": "function",
        "z": "2359ccd.4db1234",
        "name": "[Log] Check Parameters",
        "func": "if (!env.get(\"SERVER_NAME\")) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing SERVER_NAME\"}\n    );\n    node.error(\"Missing SERVER_NAME\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 430,
        "y": 40,
        "wires": [
            [
                "f105b5f3.6ea888"
            ],
            [
                "98279a98.fa55c8"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "98279a98.fa55c8",
        "type": "function",
        "z": "2359ccd.4db1234",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Filter SFTP  : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Filter SFTP  : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 520,
        "y": 240,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "ba4c3b96.a84348",
        "type": "function",
        "z": "2359ccd.4db1234",
        "name": "[Log] End workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Check SFTP File'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1190,
        "y": 140,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "b728d51.8f3d928",
        "type": "status",
        "z": "2359ccd.4db1234",
        "name": "",
        "scope": null,
        "x": 280,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "2b958a41.7d40b6",
        "type": "click-on",
        "z": "24805e57.2569c2",
        "name": "Click on imported file",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "x": 340,
        "y": 300,
        "wires": [
            [
                "41262a25.eb89b4"
            ],
            [
                "bd29ac5e.96f21"
            ]
        ]
    },
    {
        "id": "7825de57.f540e",
        "type": "function",
        "z": "24805e57.2569c2",
        "name": "Set target",
        "func": "msg.target = '(//span[contains(@title,\"'+ msg.var.fileName +'\")])[1]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 140,
        "y": 300,
        "wires": [
            [
                "2b958a41.7d40b6"
            ]
        ]
    },
    {
        "id": "41262a25.eb89b4",
        "type": "get-text",
        "z": "24805e57.2569c2",
        "name": "Get number of errors",
        "expected": "",
        "selector": "xpath",
        "target": "//p[@ng-bind=\"statisticsDataObject.errorFileLines\"]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 580,
        "y": 300,
        "wires": [
            [
                "dc02f1ca.262f6"
            ],
            [
                "bd29ac5e.96f21"
            ]
        ]
    },
    {
        "id": "dc02f1ca.262f6",
        "type": "function",
        "z": "24805e57.2569c2",
        "name": "[Log] Imported SERVER_NAME file status",
        "func": "if(msg.payload == \"0\"){\n   msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Number of errors in \"+env.get(\"SERVER_NAME\")+\" file\",\n        \"status\" : \"OK \" + msg.payload\n    }); \n}else{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Number of errors in \"+env.get(\"SERVER_NAME\")+\" file\",\n        \"status\" : \"KO \" + msg.payload\n    });    \n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 880,
        "y": 300,
        "wires": [
            [
                "2766a18d.87541e"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "a480e5b5.ec3258",
        "type": "function",
        "z": "24805e57.2569c2",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Check SFTP File'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 170,
        "y": 80,
        "wires": [
            [
                "1674215e.f1c99f"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "1674215e.f1c99f",
        "type": "function",
        "z": "24805e57.2569c2",
        "name": "[Log] Check Parameters",
        "func": "if (!env.get(\"SERVER_NAME\")) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing SERVER_NAME\"}\n    );\n    node.error(\"Missing SERVER_NAME\");\n    return [null, msg];\n}\nif (!msg.var.fileName) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing msg.var.fileName\"}\n    );\n    node.error(\"Missing msg.var.fileName\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 80,
        "wires": [
            [
                "cc82bd80.e3651"
            ],
            [
                "bd29ac5e.96f21"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "ca58304a.1fcd2",
        "type": "function",
        "z": "24805e57.2569c2",
        "name": "[Log] End workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Check SFTP File'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1030,
        "y": 360,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "2766a18d.87541e",
        "type": "click-on",
        "z": "24805e57.2569c2",
        "name": "Click on close",
        "selector": "xpath",
        "target": "//span[@translate=\"common_close_button\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 820,
        "y": 360,
        "wires": [
            [
                "ca58304a.1fcd2"
            ],
            [
                "bd29ac5e.96f21"
            ]
        ]
    },
    {
        "id": "bd29ac5e.96f21",
        "type": "function",
        "z": "24805e57.2569c2",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check SFTP File : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check SFTP File : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 380,
        "y": 440,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "cc82bd80.e3651",
        "type": "subflow:2359ccd.4db1234",
        "z": "24805e57.2569c2",
        "name": "",
        "env": [
            {
                "name": "SERVER_NAME",
                "value": "SERVER_NAME",
                "type": "env"
            }
        ],
        "x": 670,
        "y": 100,
        "wires": [
            [
                "7825de57.f540e"
            ],
            [
                "bd29ac5e.96f21"
            ]
        ]
    },
    {
        "id": "e9960406.0bad68",
        "type": "status",
        "z": "24805e57.2569c2",
        "name": "",
        "scope": null,
        "x": 180,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "a1fc366d.72eeb8",
        "type": "send-keys",
        "z": "4a6cce55.547d",
        "name": "Set service type",
        "keys": "",
        "selector": "xpath",
        "target": "//input[@id=\"input_ServiceType\"]",
        "timeout": 15000,
        "waitFor": 500,
        "clearVal": true,
        "x": 620,
        "y": 160,
        "wires": [
            [
                "65e4efa0.8aebd"
            ],
            [
                "824893a2.132e5"
            ]
        ]
    },
    {
        "id": "3766ee18.8a8ef2",
        "type": "function",
        "z": "4a6cce55.547d",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Set serviceType filter'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 270,
        "y": 160,
        "wires": [
            [
                "33f9608e.4b1da"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "65e4efa0.8aebd",
        "type": "function",
        "z": "4a6cce55.547d",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Set serviceType filter'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 850,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "824893a2.132e5",
        "type": "function",
        "z": "4a6cce55.547d",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Set serviceType filter : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Set serviceType filter : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 260,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "33f9608e.4b1da",
        "type": "function",
        "z": "4a6cce55.547d",
        "name": "Set keys",
        "func": "msg.keys = env.get(\"SERVICE_TYPE\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 440,
        "y": 160,
        "wires": [
            [
                "a1fc366d.72eeb8"
            ]
        ]
    },
    {
        "id": "13635b31.47dc7d",
        "type": "status",
        "z": "4a6cce55.547d",
        "name": "",
        "scope": null,
        "x": 380,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "8eed1ba1.74f968",
        "type": "send-keys",
        "z": "b5c7d99e.160228",
        "name": "Set message type",
        "keys": "",
        "selector": "xpath",
        "target": "//input[@id=\"input_messageType\"]",
        "timeout": 15000,
        "waitFor": 500,
        "clearVal": true,
        "x": 590,
        "y": 80,
        "wires": [
            [
                "997f3512.8466a8"
            ],
            [
                "e9b03c87.9cd5f"
            ]
        ]
    },
    {
        "id": "330c1f96.1256a",
        "type": "function",
        "z": "b5c7d99e.160228",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Set Message Type filter'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 210,
        "y": 80,
        "wires": [
            [
                "6ae120ff.2812b"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "997f3512.8466a8",
        "type": "function",
        "z": "b5c7d99e.160228",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Set Message Type filter'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 810,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "e9b03c87.9cd5f",
        "type": "function",
        "z": "b5c7d99e.160228",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Set Message Type filter : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Set Message Type filter : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 800,
        "y": 120,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "6ae120ff.2812b",
        "type": "function",
        "z": "b5c7d99e.160228",
        "name": "Set keys",
        "func": "msg.keys = env.get(\"MESSAGE_TYPE\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 400,
        "y": 80,
        "wires": [
            [
                "8eed1ba1.74f968"
            ]
        ]
    },
    {
        "id": "83861e39.25be88",
        "type": "status",
        "z": "b5c7d99e.160228",
        "name": "",
        "scope": null,
        "x": 340,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "157c6645.01b66a",
        "type": "subflow:b5c7d99e.160228",
        "z": "3a3b63cb.52d36c",
        "name": "",
        "env": [
            {
                "name": "MESSAGE_TYPE",
                "value": "MESSAGETYPE",
                "type": "env"
            }
        ],
        "x": 370,
        "y": 80,
        "wires": [
            [
                "80c28833.64a4d8"
            ],
            [
                "ae68bca2.a4add"
            ]
        ]
    },
    {
        "id": "1df761ff.b4a58e",
        "type": "click-on",
        "z": "3a3b63cb.52d36c",
        "name": "Click on search",
        "selector": "xpath",
        "target": "//span[@ng-click=\"initTable()\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 860,
        "y": 80,
        "wires": [
            [
                "cca7e9b4.fd97c8"
            ],
            [
                "ae68bca2.a4add"
            ]
        ]
    },
    {
        "id": "80c28833.64a4d8",
        "type": "subflow:4a6cce55.547d",
        "z": "3a3b63cb.52d36c",
        "name": "",
        "env": [
            {
                "name": "SERVICE_TYPE",
                "value": "SERVICETYPE",
                "type": "env"
            }
        ],
        "x": 620,
        "y": 80,
        "wires": [
            [
                "1df761ff.b4a58e"
            ],
            [
                "ae68bca2.a4add"
            ]
        ]
    },
    {
        "id": "cca7e9b4.fd97c8",
        "type": "click-on",
        "z": "3a3b63cb.52d36c",
        "name": "Click on first line",
        "selector": "xpath",
        "target": "(//tr[@ng-click=\"toShowMessageDetail(message.record)\"])[1]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 1060,
        "y": 80,
        "wires": [
            [
                "8b044c3b.bd5fd"
            ],
            [
                "ae68bca2.a4add"
            ]
        ]
    },
    {
        "id": "c073104c.d8839",
        "type": "function",
        "z": "3a3b63cb.52d36c",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Set type filter & check message valid'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 150,
        "y": 80,
        "wires": [
            [
                "157c6645.01b66a"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "3f32580d.e8cee8",
        "type": "function",
        "z": "3a3b63cb.52d36c",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Set type filter & check message valid'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1170,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "ae68bca2.a4add",
        "type": "function",
        "z": "3a3b63cb.52d36c",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Set type filter & check message valid : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Set type filter & check message valid : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 700,
        "y": 440,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "6c528e45.505aa",
        "type": "json",
        "z": "3a3b63cb.52d36c",
        "name": "Convert Message to JSON",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 540,
        "y": 160,
        "wires": [
            [
                "d2ddbf2.871894"
            ]
        ]
    },
    {
        "id": "d2ddbf2.871894",
        "type": "change",
        "z": "3a3b63cb.52d36c",
        "name": "Set Payload to messageJSON",
        "rules": [
            {
                "t": "set",
                "p": "messageJSON",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 830,
        "y": 160,
        "wires": [
            [
                "4a3e1e88.ec19c"
            ]
        ]
    },
    {
        "id": "8b044c3b.bd5fd",
        "type": "get-text",
        "z": "3a3b63cb.52d36c",
        "name": "Get Message Type Value",
        "expected": "",
        "selector": "xpath",
        "target": "//div[contains(@class,\"show\") and @id=\"SubMessageDetial\"]//pre[@ng-bind=\"messageObject\"]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 270,
        "y": 160,
        "wires": [
            [
                "6c528e45.505aa"
            ],
            [
                "ae68bca2.a4add"
            ]
        ]
    },
    {
        "id": "dd78c371.3ef81",
        "type": "comment",
        "z": "3a3b63cb.52d36c",
        "name": "THIS BRICK MAY HAVE TO CHANGE. THERE IS A TYPO IN HUWAY's CODE",
        "info": "",
        "x": 280,
        "y": 180,
        "wires": []
    },
    {
        "id": "50f8c21a.b3d14c",
        "type": "click-on",
        "z": "3a3b63cb.52d36c",
        "name": "Click on Close Button",
        "selector": "xpath",
        "target": "//div[contains(@class, \"modal iot-dialog show\")]//*[@translate=\"common_close_button\"]",
        "timeout": 15000,
        "waitFor": "500",
        "clickOn": false,
        "x": 1320,
        "y": 160,
        "wires": [
            [
                "3f32580d.e8cee8"
            ],
            [
                "ae68bca2.a4add"
            ]
        ]
    },
    {
        "id": "631dc52e.522b8c",
        "type": "function",
        "z": "3a3b63cb.52d36c",
        "name": "Check message valid",
        "func": "// Get the cvmp Date & Time message and the start Date & Time of the flow\ncvmpDate = msg.messageJSON.hourDate.substring(0, 10);\nstartDate = msg.time.substring(0, 10);\ncvmpTime = msg.messageJSON.hourDate.substring(11, 19);\nstarTime = msg.time.substring(11, 19);\n\n// Check that the first message selected have the same servicetype and messagetype that requiered\nif (msg.messageJSON.serviceType != env.get(\"SERVICETYPE\") || msg.messageJSON.messageType != env.get(\"MESSAGETYPE\")){    \n     msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\") + \" failed. Wrong message selected with servicetype = \" + msg.messageJSON.serviceType + \" (should be \" + env.get(\"SERVICETYPE\") + \") and messagetype = \" + msg.messageJSON.messageType + \" (should be \" + env.get(\"MESSAGETYPE\") + \")\",\n        \"status\" : \"KO\"}\n    );\n    node.error(\"Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\") + \" failed. Wrong message selected with servicetype = \" + msg.messageJSON.serviceType + \" (should be \" + env.get(\"SERVICETYPE\") + \") and messagetype = \" + msg.messageJSON.messageType + \" (should be \" + env.get(\"MESSAGETYPE\") + \")\");\n    return [null, msg];\n}\n\n\n// Check if the flow Start Time is more recent that the Message Time \nif (!compareTime(cvmpDate, startDate, cvmpTime, starTime)){    \n     msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check SMS failed. The Message Time (\" +cvmpTime+ \") is more recent than the flow start time (\" + starTime + \")\",\n        \"status\" : \"KO\"}\n    );\n    node.error(\"Check SMS failed. The Message Time (\" +cvmpTime+ \") is more recent than the flow start time (\" + starTime + \")\");\n    return [null, msg];\n}\n\n// Function which compare two time : if cvmpTime (message generated on cvmp) is more recent than the starTime (start of the flow) then return false\n//cvmpDate = 2018-12-21 startDate = 2018-12-22, cvmpTime = 23:42:00, starTime = 22:42:00\n\n//node.warn(\"cvmpDate : \" + cvmpDate + \"; cvmpTime : \" + cvmpTime);\n//node.warn(\"startDate : \" + startDate + \"; starTime : \" + starTime);\n\nfunction compareTime(cvmpDate, startDate, cvmpTime, starTime){\n    return cvmpDate >= startDate && cvmpTime >= starTime;\n}\n\nreturn [msg, null];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1180,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "4a3e1e88.ec19c",
        "type": "function",
        "z": "3a3b63cb.52d36c",
        "name": "Check message valid",
        "func": "// Check that the first message selected have the same servicetype and messagetype that requiered\nif (msg.messageJSON.serviceType != env.get(\"SERVICETYPE\") || msg.messageJSON.messageType != env.get(\"MESSAGETYPE\")){    \n     msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\"),\n        \"status\" : \"KO. Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\") + \" failed. Wrong message selected with servicetype = \" + msg.messageJSON.serviceType + \" (should be \" + env.get(\"SERVICETYPE\") + \") and messagetype = \" + msg.messageJSON.messageType + \" (should be \" + env.get(\"MESSAGETYPE\") + \")\"}\n    );\n    node.error(\"Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\") + \" failed. Wrong message selected with servicetype = \" + msg.messageJSON.serviceType + \" (should be \" + env.get(\"SERVICETYPE\") + \") and messagetype = \" + msg.messageJSON.messageType + \" (should be \" + env.get(\"MESSAGETYPE\") + \")\");\n    return [null, msg];\n}\nif(msg.messageIdToCheck === undefined){\n    msg.messageIdToCheck = msg.messageJSON.messageId\n}else{\n    // Check if we are looking on the good message by comparing the messageId.\n    if (msg.messageJSON.messageId != msg.messageIdToCheck){\n         msg.traces.push({\n            \"time\" : new Date(), \n            \"message\" : \"Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\"),\n            \"status\" : \"KO. Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\") + \" failed. The message Id are not equal : \" + msg.messageJSON.messageId + \" != \" + msg.messageIdToCheck}\n        );\n        node.error(\"Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\") + \" failed. The message Id are not equal : \" + msg.messageJSON.messageId + \" != \" + msg.messageIdToCheck);\n        return [null, msg];\n    }\n}\n\n\nreturn [msg, null];",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1080,
        "y": 160,
        "wires": [
            [
                "50f8c21a.b3d14c"
            ]
        ]
    },
    {
        "id": "3fdb87c6.db015",
        "type": "status",
        "z": "3a3b63cb.52d36c",
        "name": "",
        "scope": null,
        "x": 240,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "cbddb91b.a0c8c8",
        "type": "subflow:3a3b63cb.52d36c",
        "z": "6149c004.95ded",
        "name": "",
        "env": [
            {
                "name": "MESSAGETYPE",
                "value": "MESSAGE_TYPE_1",
                "type": "env"
            },
            {
                "name": "SERVICETYPE",
                "value": "SERVICE_TYPE_1",
                "type": "env"
            },
            {
                "name": "MESSAGE_TYPE",
                "value": "MESSAGE_TYPE_1",
                "type": "env"
            },
            {
                "name": "SERVICE_TYPE",
                "value": "SERVICE_TYPE_1",
                "type": "env"
            }
        ],
        "x": 290,
        "y": 40,
        "wires": [
            [
                "a34ec4e4.210118"
            ],
            []
        ]
    },
    {
        "id": "a34ec4e4.210118",
        "type": "subflow:3a3b63cb.52d36c",
        "z": "6149c004.95ded",
        "name": "",
        "env": [
            {
                "name": "MESSAGE_TYPE",
                "value": "MESSAGE_TYPE_2",
                "type": "env"
            },
            {
                "name": "SERVICE_TYPE",
                "value": "SERVICE_TYPE_2",
                "type": "env"
            },
            {
                "name": "MESSAGETYPE",
                "value": "MESSAGE_TYPE_2",
                "type": "env"
            },
            {
                "name": "SERVICETYPE",
                "value": "SERVICE_TYPE_2",
                "type": "env"
            }
        ],
        "x": 290,
        "y": 80,
        "wires": [
            [
                "5684c35b.3570cc"
            ],
            []
        ]
    },
    {
        "id": "5684c35b.3570cc",
        "type": "subflow:3a3b63cb.52d36c",
        "z": "6149c004.95ded",
        "name": "",
        "env": [
            {
                "name": "MESSAGETYPE",
                "value": "MESSAGE_TYPE_3",
                "type": "env"
            },
            {
                "name": "SERVICETYPE",
                "value": "SERVICE_TYPE_3",
                "type": "env"
            },
            {
                "name": "MESSAGE_TYPE",
                "value": "MESSAGE_TYPE_3",
                "type": "env"
            },
            {
                "name": "SERVICE_TYPE",
                "value": "SERVICE_TYPE_3",
                "type": "env"
            }
        ],
        "x": 290,
        "y": 120,
        "wires": [
            [
                "9ce48a2.d56d478"
            ],
            []
        ]
    },
    {
        "id": "9ce48a2.d56d478",
        "type": "subflow:3a3b63cb.52d36c",
        "z": "6149c004.95ded",
        "name": "",
        "env": [
            {
                "name": "MESSAGETYPE",
                "value": "MESSAGE_TYPE_4",
                "type": "env"
            },
            {
                "name": "SERVICETYPE",
                "value": "SERVICE_TYPE_4",
                "type": "env"
            },
            {
                "name": "MESSAGE_TYPE",
                "value": "MESSAGE_TYPE_4",
                "type": "env"
            },
            {
                "name": "SERVICE_TYPE",
                "value": "SERVICE_TYPE_4",
                "type": "env"
            }
        ],
        "x": 290,
        "y": 160,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "478d9428.596834",
        "type": "status",
        "z": "6149c004.95ded",
        "name": "",
        "scope": null,
        "x": 140,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "c58bcbd6.45dee8",
        "type": "click-on",
        "z": "1b39a4d6.d6793b",
        "name": "Click on home",
        "selector": "xpath",
        "target": "//div[contains(@class,  'deviceManagement')]//div[@translate='appManage_home_report_menu']",
        "timeout": 15000,
        "waitFor": 500,
        "x": 190,
        "y": 80,
        "wires": [
            [
                "29018413.6cf74c"
            ],
            []
        ]
    },
    {
        "id": "29018413.6cf74c",
        "type": "click-on",
        "z": "1b39a4d6.d6793b",
        "name": "Click on More",
        "selector": "xpath",
        "target": "//div[@translate=\"serviceSupport_monitor_more_menu\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 420,
        "y": 80,
        "wires": [
            [
                "b45e9488.f26008"
            ],
            []
        ]
    },
    {
        "id": "b45e9488.f26008",
        "type": "click-on",
        "z": "1b39a4d6.d6793b",
        "name": "Click on message",
        "selector": "xpath",
        "target": "//div[@translate=\"Message\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 640,
        "y": 80,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "3194774e.76901",
        "type": "status",
        "z": "1b39a4d6.d6793b",
        "name": "",
        "scope": null,
        "x": 220,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "27acbd46.90f542",
        "type": "send-keys",
        "z": "462981d8.a1f2",
        "name": "Set VIN search field",
        "keys": "",
        "selector": "xpath",
        "target": "//input[@ng-model=\"search_VIN\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 680,
        "y": 200,
        "wires": [
            [
                "c04fdb62.c84798"
            ],
            [
                "6e838cd0.c99a84"
            ]
        ]
    },
    {
        "id": "ace983f4.ed3a2",
        "type": "click-on",
        "z": "462981d8.a1f2",
        "name": "Click on search",
        "selector": "xpath",
        "target": "//span[@ng-click=\"initTable()\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 1380,
        "y": 200,
        "wires": [
            [],
            [
                "6e838cd0.c99a84"
            ]
        ]
    },
    {
        "id": "89efa885.5d9698",
        "type": "subflow:1b39a4d6.d6793b",
        "z": "462981d8.a1f2",
        "name": "",
        "env": [],
        "x": 250,
        "y": 200,
        "wires": [
            [
                "b7bbf4bd.797928"
            ],
            [
                "6e838cd0.c99a84"
            ]
        ]
    },
    {
        "id": "b7bbf4bd.797928",
        "type": "function",
        "z": "462981d8.a1f2",
        "name": "Set target vin",
        "func": "msg.keys = msg.var.vin\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 490,
        "y": 200,
        "wires": [
            [
                "27acbd46.90f542"
            ]
        ]
    },
    {
        "id": "1eb4bca3.4abbf3",
        "type": "function",
        "z": "462981d8.a1f2",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Go to Home > More > Message and search VIN'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 210,
        "y": 80,
        "wires": [
            [
                "3019fed9.948292"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "3019fed9.948292",
        "type": "function",
        "z": "462981d8.a1f2",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.vin) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing msg.var.vin\"}\n    );\n    node.error(\"Missing msg.var.vin\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 450,
        "y": 80,
        "wires": [
            [
                "89efa885.5d9698"
            ],
            [
                "6e838cd0.c99a84"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "6e838cd0.c99a84",
        "type": "function",
        "z": "462981d8.a1f2",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    node.error(msg.error)\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Go to Home > More > Message and search VIN :\",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Go to Home > More > Message and search VIN :\",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 720,
        "y": 300,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "c04fdb62.c84798",
        "type": "click-on",
        "z": "462981d8.a1f2",
        "name": "Click on message start time",
        "selector": "xpath",
        "target": "//div[@id=\"messageStartTime\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 940,
        "y": 200,
        "wires": [
            [
                "7000a51f.42f98c"
            ],
            [
                "6e838cd0.c99a84"
            ]
        ]
    },
    {
        "id": "7000a51f.42f98c",
        "type": "subflow:abca0904.8a4708",
        "z": "462981d8.a1f2",
        "name": "",
        "x": 1190,
        "y": 200,
        "wires": [
            [
                "ace983f4.ed3a2"
            ],
            [
                "6e838cd0.c99a84"
            ]
        ]
    },
    {
        "id": "5ea5e3b.fe2281c",
        "type": "status",
        "z": "462981d8.a1f2",
        "name": "",
        "scope": null,
        "x": 240,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "cf8f68b1.9f4328",
        "type": "click-on",
        "z": "f9f50007.e950f8",
        "name": "Click on Basic Information",
        "selector": "xpath",
        "target": "//*[@translate=\"common_basicInfo_label\"]",
        "timeout": 15000,
        "waitFor": "500",
        "x": 230,
        "y": 180,
        "wires": [
            [
                "e4eac1c6.18d708"
            ],
            [
                "fbfcd652.d187a"
            ]
        ]
    },
    {
        "id": "5e09392e.4c6a8",
        "type": "function",
        "z": "f9f50007.e950f8",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"SF Go to Basic Information\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 210,
        "y": 120,
        "wires": [
            [
                "cf8f68b1.9f4328"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "e4eac1c6.18d708",
        "type": "function",
        "z": "f9f50007.e950f8",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"SF Go to Basic Information'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 470,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "fbfcd652.d187a",
        "type": "function",
        "z": "f9f50007.e950f8",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Go to Basic Information : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Go to Basic Information : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 200,
        "y": 240,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "363bc2ce.86c436",
        "type": "comment",
        "z": "f9f50007.e950f8",
        "name": "SF Go to Basic Information",
        "info": "Click on the Basic Information tab",
        "x": 150,
        "y": 40,
        "wires": []
    },
    {
        "id": "28a0fbbe.30044c",
        "type": "status",
        "z": "f9f50007.e950f8",
        "name": "",
        "scope": null,
        "x": 506,
        "y": 101,
        "wires": [
            []
        ]
    },
    {
        "id": "ce24fc41.6a72b8",
        "type": "comment",
        "z": "af3dae75.b452c8",
        "name": "SF Check Service Activation",
        "info": "Check if the service is activated\n\nNo parameters",
        "x": 200,
        "y": 80,
        "wires": []
    },
    {
        "id": "3a48c8a0.81805",
        "type": "function",
        "z": "af3dae75.b452c8",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'SF Check Service Activation'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 170,
        "y": 160,
        "wires": [
            [
                "fdcd6d8d.d48bf"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "4c085e81.fcfe18",
        "type": "function",
        "z": "af3dae75.b452c8",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Check Service Activation : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Check Service Activation : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 160,
        "y": 320,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "23a2f97e.a83966",
        "type": "function",
        "z": "af3dae75.b452c8",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF Check Service Activation'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 430,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "1ad429ee.ce29d6",
        "type": "click-on",
        "z": "af3dae75.b452c8",
        "name": "Click on Activated Services",
        "selector": "xpath",
        "target": "//*[@translate=\"serviceSupport_search_basicInfo_activatedServicesCount_label\"]",
        "timeout": 15000,
        "waitFor": "500",
        "x": 900,
        "y": 160,
        "wires": [
            [
                "92ba3915.3f62b8"
            ],
            [
                "4c085e81.fcfe18"
            ]
        ]
    },
    {
        "id": "b52b5fd1.0009b",
        "type": "find-element",
        "z": "af3dae75.b452c8",
        "name": "Find my Service ID",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "x": 430,
        "y": 220,
        "wires": [
            [
                "8334ea38.416c98"
            ],
            [
                "3b5fd16e.7c7cee"
            ]
        ]
    },
    {
        "id": "92ba3915.3f62b8",
        "type": "function",
        "z": "af3dae75.b452c8",
        "name": "Set env var into Payload",
        "func": "// Insert param for next node to payload in order to find the good service id on screen\nmsg.target = \"//*[@ng-show=\\\"flagOpenDetail['deactivated']\\\"]//*[@ng-click='toShowActivatedServiceDetail($event,service)']//span[@title='\" + msg.var.serviceId + \"']\"\n//node.warn(\"payload : \" + msg.payload);\nreturn msg;",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 220,
        "wires": [
            [
                "b52b5fd1.0009b"
            ],
            [
                "4c085e81.fcfe18"
            ]
        ]
    },
    {
        "id": "c4671415.f432a",
        "type": "subflow:81fc44c3.b84448",
        "z": "af3dae75.b452c8",
        "name": "",
        "env": [],
        "x": 650,
        "y": 160,
        "wires": [
            [
                "1ad429ee.ce29d6"
            ],
            [
                "4c085e81.fcfe18"
            ]
        ]
    },
    {
        "id": "3b5fd16e.7c7cee",
        "type": "function",
        "z": "af3dae75.b452c8",
        "name": "[Log] Error log : Service Id Not Found",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Check Service Activation : \",\n        \"status\" : \"Service Id Not Found into Basics Information or Activated services\"\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Check Service Activation : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 230,
        "y": 360,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "8334ea38.416c98",
        "type": "subflow:f9f50007.e950f8",
        "z": "af3dae75.b452c8",
        "name": "",
        "env": [],
        "x": 710,
        "y": 220,
        "wires": [
            [
                "8ba26da5.4a9908"
            ],
            [
                "4c085e81.fcfe18"
            ]
        ]
    },
    {
        "id": "b3fc303c.80f3e8",
        "type": "find-element",
        "z": "af3dae75.b452c8",
        "name": "Find my Service ID",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "x": 170,
        "y": 280,
        "wires": [
            [
                "23a2f97e.a83966"
            ],
            [
                "3b5fd16e.7c7cee"
            ]
        ]
    },
    {
        "id": "8ba26da5.4a9908",
        "type": "function",
        "z": "af3dae75.b452c8",
        "name": "Set env var into Payload",
        "func": "// Insert param for next node to payload in order to find the good service id on screen\nmsg.target = \"//*[@id='serviceBox']//*[@title='\" + msg.var.serviceId + \"' and @ng-bind='p.elementaryServiceLabel']\";\nreturn msg;",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 970,
        "y": 220,
        "wires": [
            [
                "b3fc303c.80f3e8"
            ],
            [
                "4c085e81.fcfe18"
            ]
        ]
    },
    {
        "id": "fdcd6d8d.d48bf",
        "type": "function",
        "z": "af3dae75.b452c8",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.serviceId) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing serviceId\"}\n    );\n    node.error(\"Missing serviceId\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 160,
        "wires": [
            [
                "c4671415.f432a"
            ],
            [
                "4c085e81.fcfe18"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "6457dcc3.18133c",
        "type": "status",
        "z": "af3dae75.b452c8",
        "name": "",
        "scope": null,
        "x": 180,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "aa7fb68f.4fa06",
        "type": "click-on",
        "z": "3dccc5b3.b84eda",
        "name": "Click on operation",
        "selector": "xpath",
        "target": "//*[@translate=\"serviceSupport_monitor_device_operations_tab\"]",
        "timeout": 15000,
        "waitFor": "500",
        "x": 670,
        "y": 100,
        "wires": [
            [
                "4b1c2adb.d376fc"
            ],
            [
                "6761d99.e997ca8"
            ]
        ]
    },
    {
        "id": "61c87816.592898",
        "type": "function",
        "z": "3dccc5b3.b84eda",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'SF CVMP - Global Login'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 240,
        "y": 100,
        "wires": [
            [
                "8dfaf34b.3a6a5"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "8dfaf34b.3a6a5",
        "type": "function",
        "z": "3dccc5b3.b84eda",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.CVMP2AppliUserLogin) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing username\"}\n    );\n    node.error(\"Missing username\");\n    return [null, msg];\n}\nif (!msg.var.CVMP2AppliUserPwd) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission password\"}\n    );\n    node.error(\"Missing password\");\n    return [null, msg];\n}\nif (!msg.var.CVMP2AppliConnexion){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission url\"}\n    );\n    node.error(\"Missing url\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "x": 460,
        "y": 100,
        "wires": [
            [
                "aa7fb68f.4fa06"
            ],
            [
                "6761d99.e997ca8"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "4b1c2adb.d376fc",
        "type": "function",
        "z": "3dccc5b3.b84eda",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF CVMP - Global Login'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 880,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "6761d99.e997ca8",
        "type": "function",
        "z": "3dccc5b3.b84eda",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Login user : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Login user : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 220,
        "y": 200,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "f73d35b.dbdcc48",
        "type": "status",
        "z": "3dccc5b3.b84eda",
        "name": "",
        "scope": null,
        "x": 600,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "7504e2f0.bd60cc",
        "type": "click-on",
        "z": "5f6ef3ce.55aacc",
        "name": "Click on operation type dropdown",
        "selector": "xpath",
        "target": "//span[@ng-model=\"operationType\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 300,
        "y": 160,
        "wires": [
            [
                "f22c1ae2.73fa18"
            ],
            [
                "7b4c6249.84355c"
            ]
        ]
    },
    {
        "id": "ae43d18e.e99ea",
        "type": "click-on",
        "z": "5f6ef3ce.55aacc",
        "name": "Click on activation option",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "x": 750,
        "y": 160,
        "wires": [
            [
                "8cdd13c0.b896"
            ],
            [
                "7b4c6249.84355c"
            ]
        ]
    },
    {
        "id": "f22c1ae2.73fa18",
        "type": "function",
        "z": "5f6ef3ce.55aacc",
        "name": "Set target",
        "func": "msg.target = '//span[@ng-model=\"operationType\"]/../..//ul//a[text()=\"'+env.get(\"OPERATION_TYPE\")+'\"]'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 540,
        "y": 160,
        "wires": [
            [
                "ae43d18e.e99ea"
            ]
        ]
    },
    {
        "id": "7b4c6249.84355c",
        "type": "function",
        "z": "5f6ef3ce.55aacc",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Operation dropdown select operation type : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Operation dropdown select operation type : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1020,
        "y": 220,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "591dee17.07f6e",
        "type": "function",
        "z": "5f6ef3ce.55aacc",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Operation dropdown select operation type'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 150,
        "y": 80,
        "wires": [
            [
                "7504e2f0.bd60cc"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "8cdd13c0.b896",
        "type": "function",
        "z": "5f6ef3ce.55aacc",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Operation dropdown select operation type'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1030,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "7269a566.ff0e1c",
        "type": "status",
        "z": "5f6ef3ce.55aacc",
        "name": "",
        "scope": null,
        "x": 460,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "145edf44.5cf791",
        "type": "subflow:5f6ef3ce.55aacc",
        "z": "930871cf.30619",
        "name": "",
        "env": [],
        "x": 460,
        "y": 140,
        "wires": [
            [
                "eab1a648.306988"
            ],
            [
                "71357315.b05efc"
            ]
        ]
    },
    {
        "id": "7d226cc3.b7ac04",
        "type": "subflow:3dccc5b3.b84eda",
        "z": "930871cf.30619",
        "name": "",
        "x": 200,
        "y": 140,
        "wires": [
            [
                "145edf44.5cf791"
            ],
            [
                "71357315.b05efc"
            ]
        ]
    },
    {
        "id": "eab1a648.306988",
        "type": "click-on",
        "z": "930871cf.30619",
        "name": "Click on created at",
        "selector": "xpath",
        "target": "//div[@id=\"operationStartTime\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 770,
        "y": 140,
        "wires": [
            [
                "30238c51.006b14"
            ],
            [
                "71357315.b05efc"
            ]
        ]
    },
    {
        "id": "30238c51.006b14",
        "type": "subflow:abca0904.8a4708",
        "z": "930871cf.30619",
        "name": "",
        "x": 990,
        "y": 140,
        "wires": [
            [
                "c6ba1753.c79088"
            ],
            [
                "71357315.b05efc"
            ]
        ]
    },
    {
        "id": "c6ba1753.c79088",
        "type": "click-on",
        "z": "930871cf.30619",
        "name": "Click on search",
        "selector": "xpath",
        "target": "//span[@ng-click=\"searchOperation()\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 1200,
        "y": 140,
        "wires": [
            [
                "c458fdfb.1be4"
            ],
            [
                "71357315.b05efc"
            ]
        ]
    },
    {
        "id": "3ffd3938.970436",
        "type": "function",
        "z": "930871cf.30619",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Go to operation & search by date'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 210,
        "y": 80,
        "wires": [
            [
                "7d226cc3.b7ac04"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "c458fdfb.1be4",
        "type": "function",
        "z": "930871cf.30619",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Go to operation & search by date'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1210,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "71357315.b05efc",
        "type": "function",
        "z": "930871cf.30619",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Go to operation & search by date : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Go to operation & search by date : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1140,
        "y": 280,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "d09ea6da.ebeb7",
        "type": "status",
        "z": "930871cf.30619",
        "name": "",
        "scope": null,
        "x": 620,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "532ffeef.03cb8",
        "type": "click-on",
        "z": "8eb218a.2f83de8",
        "name": "Click on seconds",
        "selector": "xpath",
        "target": "(//div[contains(@class,\"show\")]//span[@class=\"ucd-datepicker-time ucd-timespinner\"]//input)[3]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 190,
        "y": 240,
        "wires": [
            [
                "360dd946.4f29b6"
            ],
            [
                "fa2edf7b.7fee"
            ]
        ]
    },
    {
        "id": "e551237d.4652b",
        "type": "function",
        "z": "8eb218a.2f83de8",
        "name": "Loop",
        "func": "if(msg.payload == msg.seconds){\n    return [null,msg]\n}else {\n    return [msg,null]\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 540,
        "y": 240,
        "wires": [
            [
                "719e2b90.4fbc04"
            ],
            []
        ]
    },
    {
        "id": "719e2b90.4fbc04",
        "type": "click-on",
        "z": "8eb218a.2f83de8",
        "name": "Decrement",
        "selector": "xpath",
        "target": "(//div[contains(@class,\"show\")]//span[@class=\"ucd-datepicker-time ucd-timespinner\"]//span[contains(@class,\"ucd-timespinner-triangle-down\")])[1]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 540,
        "y": 180,
        "wires": [
            [
                "360dd946.4f29b6"
            ],
            [
                "fa2edf7b.7fee"
            ]
        ]
    },
    {
        "id": "360dd946.4f29b6",
        "type": "get-value",
        "z": "8eb218a.2f83de8",
        "name": "Get seconds",
        "expected": "",
        "selector": "xpath",
        "target": "(//div[contains(@class,\"show\")]//span[@class=\"ucd-datepicker-time ucd-timespinner\"]//input)[3]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 380,
        "y": 240,
        "wires": [
            [
                "e551237d.4652b"
            ],
            [
                "fa2edf7b.7fee"
            ]
        ]
    },
    {
        "id": "fa2edf7b.7fee",
        "type": "function",
        "z": "8eb218a.2f83de8",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Calendar set seconds : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Calendar set seconds : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 640,
        "y": 320,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "d71a6a36.9af9d8",
        "type": "function",
        "z": "8eb218a.2f83de8",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Calendar set seconds'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 120,
        "wires": [
            [
                "581d252.65618dc"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "581d252.65618dc",
        "type": "function",
        "z": "8eb218a.2f83de8",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.seconds){\n    errorMessage = \"Missing seconds. Please add an environment variable (SECONDS) to this SF instance\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 120,
        "wires": [
            [
                "532ffeef.03cb8"
            ],
            [
                "fa2edf7b.7fee"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "435366aa.99ab1",
        "type": "status",
        "z": "8eb218a.2f83de8",
        "name": "",
        "scope": null,
        "x": 660,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "b10c0d3a.180d3",
        "type": "click-on",
        "z": "28f74545.b7c9ca",
        "name": "Click on minutes",
        "selector": "xpath",
        "target": "(//div[contains(@class,\"show\")]//span[@class=\"ucd-datepicker-time ucd-timespinner\"]//input)[2]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 200,
        "y": 260,
        "wires": [
            [
                "108ed615.8edf0a"
            ],
            [
                "6fa7502d.265be"
            ]
        ]
    },
    {
        "id": "73a3d6cb.1e0f38",
        "type": "function",
        "z": "28f74545.b7c9ca",
        "name": "Loop",
        "func": "if(msg.payload == msg.minutes){\n    return [null,msg]\n}else {\n    return [msg,null]\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 520,
        "y": 260,
        "wires": [
            [
                "ccefb04f.f0b0b"
            ],
            []
        ]
    },
    {
        "id": "108ed615.8edf0a",
        "type": "get-value",
        "z": "28f74545.b7c9ca",
        "name": "Get minutes",
        "expected": "",
        "selector": "xpath",
        "target": "(//div[contains(@class,\"show\")]//span[@class=\"ucd-datepicker-time ucd-timespinner\"]//input)[2]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 360,
        "y": 260,
        "wires": [
            [
                "73a3d6cb.1e0f38"
            ],
            [
                "6fa7502d.265be"
            ]
        ]
    },
    {
        "id": "6fa7502d.265be",
        "type": "function",
        "z": "28f74545.b7c9ca",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Calendar set minutes : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Calendar set minutes : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 620,
        "y": 340,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "f680c913.5c6078",
        "type": "function",
        "z": "28f74545.b7c9ca",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Calendar set minutes'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 170,
        "y": 140,
        "wires": [
            [
                "6ded99ea.26ab58"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "6ded99ea.26ab58",
        "type": "function",
        "z": "28f74545.b7c9ca",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.minutes){\n    errorMessage = \"Missing minutes. Please add an environment variable (MINUTES) to this SF instance\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 140,
        "wires": [
            [
                "b10c0d3a.180d3"
            ],
            [
                "6fa7502d.265be"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "ccefb04f.f0b0b",
        "type": "click-on",
        "z": "28f74545.b7c9ca",
        "name": "Decrement",
        "selector": "xpath",
        "target": "(//div[contains(@class,\"show\")]//span[@class=\"ucd-datepicker-time ucd-timespinner\"]//span[contains(@class,\"ucd-timespinner-triangle-down\")])[1]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 510,
        "y": 200,
        "wires": [
            [
                "108ed615.8edf0a"
            ],
            [
                "6fa7502d.265be"
            ]
        ]
    },
    {
        "id": "6c525994.128a78",
        "type": "status",
        "z": "28f74545.b7c9ca",
        "name": "",
        "scope": null,
        "x": 580,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "9c202282.bb625",
        "type": "click-on",
        "z": "29a3e612.a2b0ea",
        "name": "Click on hour",
        "selector": "xpath",
        "target": "(//div[contains(@class,\"show\")]//span[@class=\"ucd-datepicker-time ucd-timespinner\"]//input)[1]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 210,
        "y": 260,
        "wires": [
            [
                "77524e23.5d754"
            ],
            [
                "6e116dbb.347324"
            ]
        ]
    },
    {
        "id": "6fa8279b.74e228",
        "type": "function",
        "z": "29a3e612.a2b0ea",
        "name": "Loop",
        "func": "if(msg.payload == msg.hours){\n    return [null,msg]\n}else {\n    return [msg,null]\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 540,
        "y": 260,
        "wires": [
            [
                "5b0dabd1.ac9144"
            ],
            []
        ]
    },
    {
        "id": "77524e23.5d754",
        "type": "get-value",
        "z": "29a3e612.a2b0ea",
        "name": "Get hour",
        "expected": "",
        "selector": "xpath",
        "target": "(//div[contains(@class,\"show\")]//span[@class=\"ucd-datepicker-time ucd-timespinner\"]//input)[1]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 370,
        "y": 260,
        "wires": [
            [
                "6fa8279b.74e228"
            ],
            [
                "6e116dbb.347324"
            ]
        ]
    },
    {
        "id": "6e116dbb.347324",
        "type": "function",
        "z": "29a3e612.a2b0ea",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Calendar set hours : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Calendar set hours : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 640,
        "y": 340,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "a9224780.2b67b8",
        "type": "function",
        "z": "29a3e612.a2b0ea",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Calendar set hours'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 140,
        "wires": [
            [
                "7c1f9b76.dd8464"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "7c1f9b76.dd8464",
        "type": "function",
        "z": "29a3e612.a2b0ea",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.hours){\n    errorMessage = \"Missing hours. Please add an environment variable (HOURS) to this SF instance\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 140,
        "wires": [
            [
                "9c202282.bb625"
            ],
            [
                "6e116dbb.347324"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "5b0dabd1.ac9144",
        "type": "click-on",
        "z": "29a3e612.a2b0ea",
        "name": "Decrement",
        "selector": "xpath",
        "target": "(//div[contains(@class,\"show\")]//span[@class=\"ucd-datepicker-time ucd-timespinner\"]//span[contains(@class,\"ucd-timespinner-triangle-down\")])[1]",
        "timeout": 15000,
        "waitFor": "250",
        "x": 530,
        "y": 200,
        "wires": [
            [
                "77524e23.5d754"
            ],
            [
                "6e116dbb.347324"
            ]
        ]
    },
    {
        "id": "c7b9ce9.b95a2b",
        "type": "status",
        "z": "29a3e612.a2b0ea",
        "name": "",
        "scope": null,
        "x": 620,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "4259eece.c61ee",
        "type": "subflow:29a3e612.a2b0ea",
        "z": "abca0904.8a4708",
        "name": "",
        "env": [],
        "x": 150,
        "y": 180,
        "wires": [
            [
                "b610fd39.c5ad8"
            ],
            [
                "c1cc7404.8f5018"
            ]
        ]
    },
    {
        "id": "b610fd39.c5ad8",
        "type": "subflow:28f74545.b7c9ca",
        "z": "abca0904.8a4708",
        "name": "",
        "env": [],
        "x": 360,
        "y": 180,
        "wires": [
            [
                "473b252.7e292dc"
            ],
            [
                "c1cc7404.8f5018"
            ]
        ]
    },
    {
        "id": "473b252.7e292dc",
        "type": "subflow:8eb218a.2f83de8",
        "z": "abca0904.8a4708",
        "name": "",
        "env": [],
        "x": 580,
        "y": 180,
        "wires": [
            [
                "5d230767.8efa88"
            ],
            [
                "c1cc7404.8f5018"
            ]
        ]
    },
    {
        "id": "455c2138.3a1f",
        "type": "function",
        "z": "abca0904.8a4708",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.seconds){\n    errorMessage = \"Missing seconds.\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\nif (!msg.minutes){\n    errorMessage = \"Missing minutes.\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\nif (!msg.hours){\n    errorMessage = \"Missing hours.\"\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : errorMessage}\n    );\n    node.error(errorMessage);\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 370,
        "y": 80,
        "wires": [
            [
                "4259eece.c61ee"
            ],
            [
                "c1cc7404.8f5018"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "86b8baaf.8c3408",
        "type": "function",
        "z": "abca0904.8a4708",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Calendar set time'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 150,
        "y": 80,
        "wires": [
            [
                "455c2138.3a1f"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "c1cc7404.8f5018",
        "type": "function",
        "z": "abca0904.8a4708",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Calendar set seconds : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Calendar set seconds : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 560,
        "y": 260,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "5d230767.8efa88",
        "type": "click-on",
        "z": "abca0904.8a4708",
        "name": "Click on ok",
        "selector": "xpath",
        "target": "//div[contains(@class,\"show\")]//button[@class=\"ucd-datepicker-btn ucd-datepicker-btn-ok\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 770,
        "y": 180,
        "wires": [
            [
                "1617f768.7d4b29"
            ],
            []
        ]
    },
    {
        "id": "1617f768.7d4b29",
        "type": "function",
        "z": "abca0904.8a4708",
        "name": "[Log] End workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Calendar set time'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 950,
        "y": 180,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "dbb33fa9.cdaeb8",
        "type": "status",
        "z": "abca0904.8a4708",
        "name": "",
        "scope": null,
        "x": 700,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "a4e884e6.f1761",
        "type": "send-keys",
        "z": "f0d537fb.475f38",
        "name": "Input Message Type",
        "keys": "",
        "selector": "id",
        "target": "input_messageType",
        "timeout": 15000,
        "waitFor": "1000",
        "clearVal": true,
        "x": 360,
        "y": 160,
        "wires": [
            [
                "eae53f7b.3326a"
            ],
            [
                "5bc05154.fa4e9"
            ]
        ]
    },
    {
        "id": "89595c8.eefde2",
        "type": "send-keys",
        "z": "f0d537fb.475f38",
        "name": "Input Service Type",
        "keys": "",
        "selector": "id",
        "target": "input_ServiceType",
        "timeout": 15000,
        "waitFor": "1000",
        "clearVal": true,
        "x": 730,
        "y": 160,
        "wires": [
            [
                "eb997f86.7a3da"
            ],
            [
                "5bc05154.fa4e9"
            ]
        ]
    },
    {
        "id": "ee815d15.5f3348",
        "type": "click-on",
        "z": "f0d537fb.475f38",
        "name": "Click on search button",
        "selector": "xpath",
        "target": "//*[@ng-click=\"getAdvancedSearchList()\"]/span",
        "timeout": 15000,
        "waitFor": "3000",
        "clickOn": false,
        "x": 200,
        "y": 220,
        "wires": [
            [
                "41fc9571.c4bf84"
            ],
            [
                "5bc05154.fa4e9"
            ]
        ]
    },
    {
        "id": "41fc9571.c4bf84",
        "type": "click-on",
        "z": "f0d537fb.475f38",
        "name": "Click on Last Message Received",
        "selector": "xpath",
        "target": "//*[@id=\"sectionContent\"]/div[1]/div[2]/div/div[2]/div[9]/div/div[2]/div[2]/div/div[2]/table/tbody/tr[2]",
        "timeout": 15000,
        "waitFor": "3000",
        "clickOn": false,
        "x": 470,
        "y": 220,
        "wires": [
            [
                "df7a4e16.db9b"
            ],
            [
                "bdfecf1b.4f1e18"
            ]
        ]
    },
    {
        "id": "df7a4e16.db9b",
        "type": "get-text",
        "z": "f0d537fb.475f38",
        "name": "Get Message Type Value",
        "expected": "",
        "selector": "xpath",
        "target": "//div[contains(@class,\"show\") and @id=\"SubMessageDetail\"]//pre[@ng-bind=\"messageObject\"]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 750,
        "y": 220,
        "wires": [
            [
                "6078bd1d.504594"
            ],
            [
                "7d26b3a5.0edad4"
            ]
        ]
    },
    {
        "id": "6078bd1d.504594",
        "type": "json",
        "z": "f0d537fb.475f38",
        "name": "Convert Message to JSON",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 1020,
        "y": 220,
        "wires": [
            [
                "75525b3e.2ddaf4"
            ]
        ]
    },
    {
        "id": "75525b3e.2ddaf4",
        "type": "change",
        "z": "f0d537fb.475f38",
        "name": "Set Payload to messageJSON",
        "rules": [
            {
                "t": "set",
                "p": "messageJSON",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 230,
        "y": 280,
        "wires": [
            [
                "7d26b3a5.0edad4"
            ]
        ]
    },
    {
        "id": "a0a14268.6efc9",
        "type": "click-on",
        "z": "f0d537fb.475f38",
        "name": "Click on Close Button",
        "selector": "xpath",
        "target": "//div[contains(@class, 'modal iot-dialog show')]//*[@translate=\"common_close_button\"]",
        "timeout": 15000,
        "waitFor": "500",
        "clickOn": false,
        "x": 740,
        "y": 280,
        "wires": [
            [
                "db29927f.3724b8"
            ],
            [
                "5bc05154.fa4e9"
            ]
        ]
    },
    {
        "id": "cd82e275.6014b8",
        "type": "function",
        "z": "f0d537fb.475f38",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'SF Function Check Message Trace and Time'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 190,
        "y": 100,
        "wires": [
            [
                "38603422.34760c"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "5bc05154.fa4e9",
        "type": "function",
        "z": "f0d537fb.475f38",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Function Check Message Trace and Time : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Function Check Message Trace and Time : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 180,
        "y": 340,
        "wires": [
            [
                "fe2aea59.ca3fa8"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "db29927f.3724b8",
        "type": "function",
        "z": "f0d537fb.475f38",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF Function Check Message Trace and Time'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 970,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "663cc0d.a602ec",
        "type": "comment",
        "z": "f0d537fb.475f38",
        "name": "SF Function Check Message Trace and Time",
        "info": "Function to check the message trace and verify that the message time is not older that the start of the test\n\nParameters :\n- MESSAGETYPE\n- SERVICETYPE\n- STARTTIME\n- STARTHOUR",
        "x": 270,
        "y": 40,
        "wires": []
    },
    {
        "id": "7d26b3a5.0edad4",
        "type": "function",
        "z": "f0d537fb.475f38",
        "name": "Check values",
        "func": "\n// Check that the first message selected have the same servicetype and messagetype that requiered\nif (msg.messageJSON.serviceType != env.get(\"SERVICETYPE\") || msg.messageJSON.messageType != env.get(\"MESSAGETYPE\")){    \n     msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\") + \" failed. Wrong message selected with servicetype = \" + msg.messageJSON.serviceType + \" (should be \" + env.get(\"SERVICETYPE\") + \") and messagetype = \" + msg.messageJSON.messageType + \" (should be \" + env.get(\"MESSAGETYPE\") + \")\",\n        \"status\" : \"KO\"}\n    );\n    node.error(\"Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\") + \" failed. Wrong message selected with servicetype = \" + msg.messageJSON.serviceType + \" (should be \" + env.get(\"SERVICETYPE\") + \") and messagetype = \" + msg.messageJSON.messageType + \" (should be \" + env.get(\"MESSAGETYPE\") + \")\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 480,
        "y": 280,
        "wires": [
            [
                "a0a14268.6efc9"
            ],
            [
                "5bc05154.fa4e9"
            ]
        ]
    },
    {
        "id": "eb997f86.7a3da",
        "type": "click-on",
        "z": "f0d537fb.475f38",
        "name": "Click On Calendar",
        "selector": "id",
        "target": "messageStartTime",
        "timeout": 15000,
        "waitFor": 500,
        "clickOn": false,
        "x": 970,
        "y": 160,
        "wires": [
            [
                "7e003401.1abd2c"
            ],
            [
                "5bc05154.fa4e9"
            ]
        ]
    },
    {
        "id": "bdfecf1b.4f1e18",
        "type": "function",
        "z": "f0d537fb.475f38",
        "name": "[Log] Error log : Message Not Found",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Function Check Message Trace and Time : \",\n        \"status\" : \"The message was not found regarding the criteria of Message Type, Service Type and Message Time\"\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Function Check Message Trace and Time : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 250,
        "y": 380,
        "wires": [
            [
                "fe2aea59.ca3fa8"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "38603422.34760c",
        "type": "function",
        "z": "f0d537fb.475f38",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.hours) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing hours\"}\n    );\n    node.error(\"Missing hours\");\n    return [null, msg];\n}\nif (!msg.minutes) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing minutes\"}\n    );\n    node.error(\"Missing minutes\");\n    return [null, msg];\n}\nif (!msg.seconds) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing seconds\"}\n    );\n    node.error(\"Missing seconds\");\n    return [null, msg];\n}\nif (!env.get(\"SERVICETYPE\")){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing service type. Please add an environment variable (SERVICEYPE) to this SF instance\"}\n    );\n    node.error(\"Missing service type. Please add an environment variable (SERVICEYPE) to this SF instance\");\n    return [null, msg];\n}\nif (!env.get(\"MESSAGETYPE\")){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing message type. Please add an environment variable (MESSAGETYPE) to this SF instance\"}\n    );\n    node.error(\"Missing message type. Please add an environment variable (MESSAGETYPE) to this SF instance\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 100,
        "wires": [
            [
                "9019aa43.1bc338"
            ],
            [
                "5bc05154.fa4e9"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "fe2aea59.ca3fa8",
        "type": "click-on",
        "z": "f0d537fb.475f38",
        "name": "Click on Close Button",
        "selector": "xpath",
        "target": "//div[contains(@class, 'modal iot-dialog show')]//*[@translate=\"common_close_button\"]",
        "timeout": 15000,
        "waitFor": "500",
        "x": 560,
        "y": 360,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "7e003401.1abd2c",
        "type": "subflow:abca0904.8a4708",
        "z": "f0d537fb.475f38",
        "name": "",
        "env": [],
        "x": 1190,
        "y": 160,
        "wires": [
            [
                "ee815d15.5f3348"
            ],
            [
                "5bc05154.fa4e9"
            ]
        ]
    },
    {
        "id": "9019aa43.1bc338",
        "type": "function",
        "z": "f0d537fb.475f38",
        "name": "Set keys",
        "func": "msg.keys = env.get(\"MESSAGETYPE\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 160,
        "y": 160,
        "wires": [
            [
                "a4e884e6.f1761"
            ]
        ]
    },
    {
        "id": "eae53f7b.3326a",
        "type": "function",
        "z": "f0d537fb.475f38",
        "name": "Set keys",
        "func": "msg.keys = env.get(\"SERVICETYPE\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 560,
        "y": 160,
        "wires": [
            [
                "89595c8.eefde2"
            ]
        ]
    },
    {
        "id": "7390a63.3e60f58",
        "type": "status",
        "z": "f0d537fb.475f38",
        "name": "",
        "scope": null,
        "x": 800,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "6c7b3dc6.d2f8d4",
        "type": "click-on",
        "z": "6f3eaa45.18d424",
        "name": "Click on message trace",
        "selector": "xpath",
        "target": "//*[@translate=\"serviceSupport_monitor_msg_msgTrace_label\"]",
        "timeout": 15000,
        "waitFor": "500",
        "x": 250,
        "y": 180,
        "wires": [
            [
                "80e2cd49.378d48"
            ],
            [
                "7ea1917e.175f68"
            ]
        ]
    },
    {
        "id": "4967056c.988ee4",
        "type": "function",
        "z": "6f3eaa45.18d424",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'SF Go to Message Trace'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 230,
        "y": 120,
        "wires": [
            [
                "6c7b3dc6.d2f8d4"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "80e2cd49.378d48",
        "type": "function",
        "z": "6f3eaa45.18d424",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF Go to Message Trace'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 490,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "7ea1917e.175f68",
        "type": "function",
        "z": "6f3eaa45.18d424",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Go to Message Trace : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Go to Message Trace : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 220,
        "y": 240,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "540adfa5.d75d7",
        "type": "comment",
        "z": "6f3eaa45.18d424",
        "name": "SF Go to Message Trace",
        "info": "Click on Message Trace",
        "x": 170,
        "y": 40,
        "wires": []
    },
    {
        "id": "8502dff.478c02",
        "type": "status",
        "z": "6f3eaa45.18d424",
        "name": "",
        "scope": null,
        "x": 480,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "fa834bfc.835bd8",
        "type": "send-keys",
        "z": "349e670.c88bc1a",
        "name": "Input Message Type",
        "keys": "",
        "selector": "id",
        "target": "input_messageType",
        "timeout": 15000,
        "waitFor": "1000",
        "clearVal": true,
        "x": 420,
        "y": 160,
        "wires": [
            [
                "20dced00.b20e34"
            ],
            [
                "5ea28676.0521b8"
            ]
        ]
    },
    {
        "id": "1e9198a9.75556f",
        "type": "send-keys",
        "z": "349e670.c88bc1a",
        "name": "Input Service Type",
        "keys": "",
        "selector": "id",
        "target": "input_ServiceType",
        "timeout": 15000,
        "waitFor": "1000",
        "clearVal": true,
        "x": 770,
        "y": 160,
        "wires": [
            [
                "2407dfeb.abb5e"
            ],
            [
                "5ea28676.0521b8"
            ]
        ]
    },
    {
        "id": "2407dfeb.abb5e",
        "type": "click-on",
        "z": "349e670.c88bc1a",
        "name": "Click on search button",
        "selector": "xpath",
        "target": "//*[@ng-click=\"getAdvancedSearchList()\"]/span",
        "timeout": 15000,
        "waitFor": "3000",
        "clickOn": false,
        "x": 1020,
        "y": 160,
        "wires": [
            [
                "59f8930b.ab051c"
            ],
            [
                "5ea28676.0521b8"
            ]
        ]
    },
    {
        "id": "59f8930b.ab051c",
        "type": "click-on",
        "z": "349e670.c88bc1a",
        "name": "Click on Last Message Received",
        "selector": "xpath",
        "target": "//*[@id=\"sectionContent\"]/div[1]/div[2]/div/div[2]/div[9]/div/div[2]/div[2]/div/div[2]/table/tbody/tr[2]",
        "timeout": 15000,
        "waitFor": "3000",
        "clickOn": false,
        "x": 270,
        "y": 220,
        "wires": [
            [
                "403974a3.378844"
            ],
            [
                "f200a001.3c6a7"
            ]
        ]
    },
    {
        "id": "403974a3.378844",
        "type": "get-text",
        "z": "349e670.c88bc1a",
        "name": "Get Message Type Value",
        "expected": "",
        "selector": "xpath",
        "target": "//div[contains(@class,\"show\") and @id=\"SubMessageDetail\"]//pre[@ng-bind=\"messageObject\"]",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 530,
        "y": 220,
        "wires": [
            [
                "63fa310c.9487"
            ],
            [
                "5ea28676.0521b8"
            ]
        ]
    },
    {
        "id": "63fa310c.9487",
        "type": "json",
        "z": "349e670.c88bc1a",
        "name": "Convert Message to JSON",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 780,
        "y": 220,
        "wires": [
            [
                "21bbeed2.2bb562"
            ]
        ]
    },
    {
        "id": "55443201.bf5754",
        "type": "function",
        "z": "349e670.c88bc1a",
        "name": "Check values and message ID",
        "func": "// Check that the first message selected have the same servicetype and messagetype that requiered\nif (msg.messageJSON.serviceType != env.get(\"SERVICETYPE\") || msg.messageJSON.messageType != env.get(\"MESSAGETYPE\")){    \n     msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\"),\n        \"status\" : \"KO. Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\") + \" failed. Wrong message selected with servicetype = \" + msg.messageJSON.serviceType + \" (should be \" + env.get(\"SERVICETYPE\") + \") and messagetype = \" + msg.messageJSON.messageType + \" (should be \" + env.get(\"MESSAGETYPE\") + \")\"}\n    );\n    node.error(\"Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\") + \" failed. Wrong message selected with servicetype = \" + msg.messageJSON.serviceType + \" (should be \" + env.get(\"SERVICETYPE\") + \") and messagetype = \" + msg.messageJSON.messageType + \" (should be \" + env.get(\"MESSAGETYPE\") + \")\");\n    return [null, msg];\n}\n\n// Check if we are looking on the good message by comparing the messageId.\nif (msg.messageJSON.messageId != msg.messageIdToCheck){\n     msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\"),\n        \"status\" : \"KO. Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\") + \" failed. The message Id are not equal : \" + msg.messageJSON.messageId + \" != \" + msg.messageIdToCheck}\n    );\n    node.error(\"Check SMS \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\") + \" failed. The message Id are not equal : \" + msg.messageJSON.messageId + \" != \" + msg.messageIdToCheck);\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 550,
        "y": 280,
        "wires": [
            [
                "5c8c863a.7a9e7"
            ],
            [
                "5ea28676.0521b8"
            ]
        ]
    },
    {
        "id": "21bbeed2.2bb562",
        "type": "change",
        "z": "349e670.c88bc1a",
        "name": "Set Payload to messageJSON",
        "rules": [
            {
                "t": "set",
                "p": "messageJSON",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 280,
        "wires": [
            [
                "55443201.bf5754"
            ]
        ]
    },
    {
        "id": "3a2173f3.3780ec",
        "type": "function",
        "z": "349e670.c88bc1a",
        "name": "Debug Display payload (For testing purpose)",
        "func": "//node.warn(\"msg.messageJSON.messageId : \" + msg.messageJSON.messageId);\nnode.warn(msg.messageJSON);\n//node.warn(\"msg.messageIdToCheck : \" + msg.messageIdToCheck);\n//node.warn(\"msg.messageJSON.status.status : \" + msg.messageJSON.status.status);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 850,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "5c8c863a.7a9e7",
        "type": "click-on",
        "z": "349e670.c88bc1a",
        "name": "Click on Close Button",
        "selector": "xpath",
        "target": "//div[contains(@class, 'modal iot-dialog show')]//*[@translate=\"common_close_button\"]",
        "timeout": 15000,
        "waitFor": "500",
        "x": 820,
        "y": 280,
        "wires": [
            [
                "71a34291.b12b14"
            ],
            [
                "5ea28676.0521b8"
            ]
        ]
    },
    {
        "id": "421b49ab.cf7968",
        "type": "function",
        "z": "349e670.c88bc1a",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'SF Function Check Message Trace and ID'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 230,
        "y": 100,
        "wires": [
            [
                "390d4169.d3b556"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "5ea28676.0521b8",
        "type": "function",
        "z": "349e670.c88bc1a",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Function Check Message Trace and ID : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Function Check Message Trace and ID : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 220,
        "y": 360,
        "wires": [
            [
                "779bea34.8d039c"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "71a34291.b12b14",
        "type": "function",
        "z": "349e670.c88bc1a",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF Function Check Message Trace and ID'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1030,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "20dcaa9c.2e3056",
        "type": "comment",
        "z": "349e670.c88bc1a",
        "name": "SF Function Check Message Trace and ID",
        "info": "Function to check the message trace and verify that the ID is the same for all the message to check\n\nParameters :\n- MESSAGETYPE\n- SERVICETYPE",
        "x": 220,
        "y": 40,
        "wires": []
    },
    {
        "id": "390d4169.d3b556",
        "type": "function",
        "z": "349e670.c88bc1a",
        "name": "[Log] Check Parameters",
        "func": "if (!env.get(\"SERVICETYPE\")){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing service type. Please add an environment variable (SERVICEYPE) to this SF instance\"}\n    );\n    node.error(\"Missing service type. Please add an environment variable (SERVICEYPE) to this SF instance\");\n    return [null, msg];\n}\nif (!env.get(\"MESSAGETYPE\")){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing message type. Please add an environment variable (MESSAGETYPE) to this SF instance\"}\n    );\n    node.error(\"Missing message type. Please add an environment variable (MESSAGETYPE) to this SF instance\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 450,
        "y": 100,
        "wires": [
            [
                "984c1085.388a9"
            ],
            [
                "5ea28676.0521b8"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "f200a001.3c6a7",
        "type": "function",
        "z": "349e670.c88bc1a",
        "name": "[Log] Error log no message found",
        "func": "msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Function Check Message Trace and ID : \",\n        \"status\" : \"Check trace \" + env.get(\"MESSAGETYPE\") + \" \" + env.get(\"SERVICETYPE\") + \". No message found after 5000 ms\"\n    });\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 280,
        "y": 400,
        "wires": [
            [
                "779bea34.8d039c"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "779bea34.8d039c",
        "type": "click-on",
        "z": "349e670.c88bc1a",
        "name": "Click on Close Button",
        "selector": "xpath",
        "target": "//div[contains(@class, 'modal iot-dialog show')]//*[@translate=\"common_close_button\"]",
        "timeout": 15000,
        "waitFor": "500",
        "x": 560,
        "y": 380,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "96afb720.39eb88",
        "type": "click-on",
        "z": "349e670.c88bc1a",
        "name": "Click on Last Message Received",
        "selector": "xpath",
        "target": "//div[contains(@class, 'pb24 pl36 pr36')]//table[contains(@class, 'table table-hover table-layout ng-scope ng-table')]//tbody/tr[contains(@class, 'pointer ng-scope')]",
        "timeout": 15000,
        "waitFor": "3000",
        "x": 480,
        "y": 520,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "20dced00.b20e34",
        "type": "function",
        "z": "349e670.c88bc1a",
        "name": "Set keys",
        "func": "msg.keys = env.get(\"SERVICETYPE\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 600,
        "y": 160,
        "wires": [
            [
                "1e9198a9.75556f"
            ]
        ]
    },
    {
        "id": "984c1085.388a9",
        "type": "function",
        "z": "349e670.c88bc1a",
        "name": "Set keys",
        "func": "msg.keys = env.get(\"MESSAGETYPE\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 240,
        "y": 160,
        "wires": [
            [
                "fa834bfc.835bd8"
            ]
        ]
    },
    {
        "id": "f4e774dc.7355b",
        "type": "status",
        "z": "349e670.c88bc1a",
        "name": "",
        "scope": null,
        "x": 760,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "1185acc4.6e4043",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.hours) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing hours\"}\n    );\n    node.error(\"Missing hours\");\n    return [null, msg];\n}\nif (!msg.minutes) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing minutes\"}\n    );\n    node.error(\"Missing minutes\");\n    return [null, msg];\n}\nif (!msg.seconds) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing seconds\"}\n    );\n    node.error(\"Missing seconds\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 100,
        "wires": [
            [
                "3e5cf05c.f31d5"
            ],
            [
                "5c72d8c8.834aa8"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "1c1e99c.2236e66",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'SF Check SMS Message Trace BTA2 BTA3'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 170,
        "y": 100,
        "wires": [
            [
                "1185acc4.6e4043"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "3e5cf05c.f31d5",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "Init Retry value",
        "func": "msg.retry = 0;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 620,
        "y": 100,
        "wires": [
            [
                "63896178.37384"
            ]
        ],
        "outputLabels": [
            "error",
            ""
        ]
    },
    {
        "id": "5c72d8c8.834aa8",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Check SMS Message Trace BTA2 BTA3 : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Check SMS Message Trace BTA2 BTA3 : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1400,
        "y": 260,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "af8a479b.9931b8",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "Check status = 0",
        "func": "// Check if the SMS final status communication is equals to 0. If so, ok go ahead else error\nif (msg.messageJSON.status.status == 0){    \n    msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Check SMS final status OK 'status = 0'\",\n    \"status\" : \"OK\"});\n} else {\n     msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check SMS final status failed, status not equals to 0\",\n        \"status\" : \"KO\"}\n    );\n    node.error(\"Check SMS final status failed, status not equals to 0\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "x": 390,
        "y": 516,
        "wires": [
            [
                "895ba5c.7b2e058"
            ],
            [
                "5c72d8c8.834aa8"
            ]
        ]
    },
    {
        "id": "cfa20c78.e633d",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "Retry Policy",
        "func": "msg.retry+=1;\nnode.warn(\"retry : \" + msg.retry);\n// If retry < 4 => continue\nif (msg.retry < 4){\n    msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Retry attempt number \" + msg.retry + \" for 'SF Function Check Message Trace and Id'\",\n    \"status\" : \"OK\"}\n);\nreturn [msg, null];\n} else {\n    // If retry > 4 => stderr\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "x": 1140,
        "y": 280,
        "wires": [
            [
                "97b4c7.3f1e8b38"
            ],
            [
                "5c72d8c8.834aa8"
            ]
        ],
        "outputLabels": [
            "error",
            ""
        ],
        "icon": "font-awesome/fa-history"
    },
    {
        "id": "b934bfb2.80542",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "Retry Policy",
        "func": "msg.retry+=1;\nnode.warn(\"retry : \" + msg.retry);\n// If retry < 4 => continue\nif (msg.retry < 4){\n    msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Retry attempt number \" + msg.retry + \" for 'SF Function Check Message Trace and Id'\",\n    \"status\" : \"OK\"}\n);\nreturn [msg, null];\n} else {\n    // If retry > 4 => stderr\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "x": 1090,
        "y": 360,
        "wires": [
            [
                "75ad6e10.f04948"
            ],
            [
                "5c72d8c8.834aa8"
            ]
        ],
        "outputLabels": [
            "error",
            ""
        ],
        "icon": "font-awesome/fa-history"
    },
    {
        "id": "68025a3d.c1a2c4",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "Retry Policy",
        "func": "msg.retry+=1;\nnode.warn(\"retry : \" + msg.retry);\n// If retry < 4 => continue\nif (msg.retry < 4){\n    msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Retry attempt number \" + msg.retry + \" for 'SF Function Check Message Trace and Id'\",\n    \"status\" : \"OK\"}\n);\nreturn [msg, null];\n} else {\n    // If retry > 4 => stderr\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "x": 1090,
        "y": 436,
        "wires": [
            [
                "e908d054.e7a8c"
            ],
            [
                "5c72d8c8.834aa8"
            ]
        ],
        "outputLabels": [
            "error",
            ""
        ],
        "icon": "font-awesome/fa-history"
    },
    {
        "id": "4d561339.73e64c",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "Retry Policy",
        "func": "msg.retry+=1;\nnode.warn(\"retry : \" + msg.retry);\n// If retry < 4 => continue\nif (msg.retry < 4){\n    msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Retry attempt number \" + msg.retry + \" for 'SF Function Check Message Trace and Id'\",\n    \"status\" : \"OK\"}\n);\nreturn [msg, null];\n} else {\n    // If retry > 4 => stderr\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "x": 530,
        "y": 180,
        "wires": [
            [
                "f53f0180.4450b"
            ],
            [
                "5c72d8c8.834aa8"
            ]
        ],
        "outputLabels": [
            "error",
            ""
        ],
        "icon": "font-awesome/fa-history"
    },
    {
        "id": "895ba5c.7b2e058",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF Check SMS Message Trace BTA2 BTA3'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 630,
        "y": 516,
        "wires": [
            []
        ]
    },
    {
        "id": "dca2a332.e5aec",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "reset Retry value",
        "func": "msg.retry = 0;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 170,
        "y": 516,
        "wires": [
            [
                "af8a479b.9931b8"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "5559bf03.883ec",
        "type": "subflow:349e670.c88bc1a",
        "z": "ddd5df1a.1e578",
        "name": "",
        "env": [
            {
                "name": "MESSAGETYPE",
                "value": "MESSAGE_TYPE_2",
                "type": "env"
            },
            {
                "name": "SERVICETYPE",
                "value": "SERVICE_TYPE_2",
                "type": "env"
            }
        ],
        "x": 850,
        "y": 276,
        "wires": [
            [
                "9fba6b2c.7e00d8"
            ],
            [
                "cfa20c78.e633d"
            ]
        ]
    },
    {
        "id": "f61d2ba1.e85738",
        "type": "subflow:349e670.c88bc1a",
        "z": "ddd5df1a.1e578",
        "name": "",
        "env": [
            {
                "name": "MESSAGETYPE",
                "value": "MESSAGE_TYPE_3",
                "type": "env"
            },
            {
                "name": "SERVICETYPE",
                "value": "SERVICE_TYPE_3",
                "type": "env"
            }
        ],
        "x": 810,
        "y": 356,
        "wires": [
            [
                "8eeed031.9f15b"
            ],
            [
                "b934bfb2.80542"
            ]
        ]
    },
    {
        "id": "48f8404c.58468",
        "type": "subflow:349e670.c88bc1a",
        "z": "ddd5df1a.1e578",
        "name": "",
        "env": [
            {
                "name": "MESSAGETYPE",
                "value": "MESSAGE_TYPE_4",
                "type": "env"
            },
            {
                "name": "SERVICETYPE",
                "value": "SERVICE_TYPE_4",
                "type": "env"
            }
        ],
        "x": 810,
        "y": 436,
        "wires": [
            [
                "dca2a332.e5aec"
            ],
            [
                "68025a3d.c1a2c4"
            ]
        ]
    },
    {
        "id": "a7caf882.f137b8",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "reset Retry value",
        "func": "msg.retry = 0;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 190,
        "y": 220,
        "wires": [
            [
                "9c3f264.5d37ad8"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "9fba6b2c.7e00d8",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "reset Retry value",
        "func": "msg.retry = 0;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 170,
        "y": 356,
        "wires": [
            [
                "75ad6e10.f04948"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "9c3f264.5d37ad8",
        "type": "change",
        "z": "ddd5df1a.1e578",
        "name": "Set Message Id to check",
        "rules": [
            {
                "t": "set",
                "p": "messageIdToCheck",
                "pt": "msg",
                "to": "messageJSON.messageId",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 190,
        "y": 276,
        "wires": [
            [
                "97b4c7.3f1e8b38"
            ]
        ]
    },
    {
        "id": "8eeed031.9f15b",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "reset Retry value",
        "func": "msg.retry = 0;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 170,
        "y": 436,
        "wires": [
            [
                "e908d054.e7a8c"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "56aabda3.b90dc4",
        "type": "comment",
        "z": "ddd5df1a.1e578",
        "name": "SF Check SMS Message Trace ATB2",
        "info": "Do all the SMS check for ATB3SOP1\n\nParameters :\n- TIME\n- HOUR",
        "x": 159.99998474121094,
        "y": 49.99999809265137,
        "wires": []
    },
    {
        "id": "63896178.37384",
        "type": "subflow:6f3eaa45.18d424",
        "z": "ddd5df1a.1e578",
        "name": "",
        "env": [],
        "x": 840,
        "y": 100,
        "wires": [
            [
                "f53f0180.4450b"
            ],
            [
                "5c72d8c8.834aa8"
            ]
        ]
    },
    {
        "id": "f53f0180.4450b",
        "type": "subflow:f0d537fb.475f38",
        "z": "ddd5df1a.1e578",
        "name": "",
        "env": [
            {
                "name": "SERVICETYPE",
                "value": "SERVICE_TYPE_1",
                "type": "env"
            },
            {
                "name": "MESSAGETYPE",
                "value": "MESSAGE_TYPE_1",
                "type": "env"
            }
        ],
        "x": 270,
        "y": 180,
        "wires": [
            [
                "a7caf882.f137b8"
            ],
            [
                "4d561339.73e64c"
            ]
        ]
    },
    {
        "id": "ea8a5625.9deb08",
        "type": "comment",
        "z": "ddd5df1a.1e578",
        "name": "SERVICE_TYPE_1 MESSAGE_TYPE_1",
        "info": "",
        "x": 260,
        "y": 140,
        "wires": []
    },
    {
        "id": "c0701ec.af51de",
        "type": "comment",
        "z": "ddd5df1a.1e578",
        "name": "SERVICE_TYPE_3 MESSAGE_TYPE_3",
        "info": "",
        "x": 800,
        "y": 320,
        "wires": []
    },
    {
        "id": "17d53636.2679ca",
        "type": "comment",
        "z": "ddd5df1a.1e578",
        "name": "SERVICE_TYPE_2 MESSAGE_TYPE_2",
        "info": "",
        "x": 840,
        "y": 240,
        "wires": []
    },
    {
        "id": "7b4afab7.d1f9f4",
        "type": "comment",
        "z": "ddd5df1a.1e578",
        "name": "SERVICE_TYPE_4 MESSAGE_TYPE_4",
        "info": "",
        "x": 800,
        "y": 400,
        "wires": []
    },
    {
        "id": "3e7626b4.5c3f42",
        "type": "delay",
        "z": "ddd5df1a.1e578",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 610,
        "y": 280,
        "wires": [
            [
                "5559bf03.883ec"
            ]
        ]
    },
    {
        "id": "97b4c7.3f1e8b38",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "Set delay arround 30s",
        "func": "msg.delay = msg.var.delayArround30s *30000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 280,
        "wires": [
            [
                "3e7626b4.5c3f42"
            ]
        ]
    },
    {
        "id": "2d09bf29.365f58",
        "type": "delay",
        "z": "ddd5df1a.1e578",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 570,
        "y": 440,
        "wires": [
            [
                "48f8404c.58468"
            ]
        ]
    },
    {
        "id": "e908d054.e7a8c",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "Set delay arround 30s",
        "func": "msg.delay = msg.var.delayArround30s *30000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 370,
        "y": 440,
        "wires": [
            [
                "2d09bf29.365f58"
            ]
        ]
    },
    {
        "id": "75ad6e10.f04948",
        "type": "function",
        "z": "ddd5df1a.1e578",
        "name": "Set delay arround 5s",
        "func": "msg.delay = msg.var.delayArround5s *5000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 360,
        "wires": [
            [
                "a8c99d5.8d912e"
            ]
        ]
    },
    {
        "id": "a8c99d5.8d912e",
        "type": "delay",
        "z": "ddd5df1a.1e578",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 570,
        "y": 360,
        "wires": [
            [
                "f61d2ba1.e85738"
            ]
        ]
    },
    {
        "id": "8165a4d5.f803e",
        "type": "status",
        "z": "ddd5df1a.1e578",
        "name": "",
        "scope": null,
        "x": 580,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "89ba31ea.0ef1c8",
        "type": "click-on",
        "z": "7e7a50da.2697",
        "name": "Click on more",
        "selector": "xpath",
        "target": "//label[@class=\"more-button\"]",
        "timeout": 15000,
        "waitFor": 500,
        "clickOn": false,
        "x": 180,
        "y": 220,
        "wires": [
            [
                "55b5f283.ee9d34"
            ],
            [
                "55b5f283.ee9d34"
            ]
        ]
    },
    {
        "id": "55b5f283.ee9d34",
        "type": "click-on",
        "z": "7e7a50da.2697",
        "name": "Click on OTA server",
        "selector": "xpath",
        "target": "//span[@translate=\"serviceSupport_search_otaServer_otaServer_wintitle\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 420,
        "y": 220,
        "wires": [
            [
                "ccd3aef1.440e"
            ],
            [
                "5d3c3d.da8c63c4"
            ]
        ]
    },
    {
        "id": "96366842.a7e31",
        "type": "status",
        "z": "7e7a50da.2697",
        "name": "",
        "scope": null,
        "x": 820,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "5d3c3d.da8c63c4",
        "type": "function",
        "z": "7e7a50da.2697",
        "name": "Loop",
        "func": "if(msg.var.loopIndex < 10){\n    msg.var.loopIndex++;\n    return [msg, null];\n}else{\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 290,
        "y": 340,
        "wires": [
            [
                "89ba31ea.0ef1c8"
            ],
            [
                "389817e5.8840b"
            ]
        ]
    },
    {
        "id": "49e29679.b4dfb",
        "type": "function",
        "z": "7e7a50da.2697",
        "name": "Set loopIndex",
        "func": "msg.var.loopIndex = 0;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 400,
        "y": 100,
        "wires": [
            [
                "33ed115c.8abc2e"
            ]
        ]
    },
    {
        "id": "213247a6.a20dc8",
        "type": "comment",
        "z": "7e7a50da.2697",
        "name": "Tru to click on \"More\", click on OTA serveur anyway (More not always displayed depending on zoom/resolution)",
        "info": "",
        "x": 480,
        "y": 180,
        "wires": []
    },
    {
        "id": "82328398.3e2b78",
        "type": "comment",
        "z": "7e7a50da.2697",
        "name": "Set loop in dex to 0",
        "info": "",
        "x": 400,
        "y": 60,
        "wires": []
    },
    {
        "id": "8cc416c3.10ca98",
        "type": "comment",
        "z": "7e7a50da.2697",
        "name": "If click on OTA serveur doesn't work, retry 10 times",
        "info": "",
        "x": 340,
        "y": 300,
        "wires": []
    },
    {
        "id": "389817e5.8840b",
        "type": "function",
        "z": "7e7a50da.2697",
        "name": "[Log] Error log",
        "func": "var count = msg.var.loopIndex+1;\nmsg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Click on OTA serveur : \",\n    \"status\" : \"KO can't click on OTA serveur after \"+count+\" try\" \n});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 470,
        "y": 340,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "ccd3aef1.440e",
        "type": "function",
        "z": "7e7a50da.2697",
        "name": "[Log] End Workflow",
        "func": "var count = msg.var.loopIndex+1;\nmsg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Go to OTA Server'\",\n    \"status\" : \"OK click successful after \"+count+\" try\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 670,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "892b3131.c5b6a",
        "type": "function",
        "z": "7e7a50da.2697",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Go to OTA Server'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 100,
        "wires": [
            [
                "49e29679.b4dfb"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "33ed115c.8abc2e",
        "type": "function",
        "z": "7e7a50da.2697",
        "name": "Set delay arround 2s",
        "func": "msg.delay = msg.var.delayArround2s *2000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 590,
        "y": 100,
        "wires": [
            [
                "338ac56e.1bf4c2"
            ]
        ]
    },
    {
        "id": "338ac56e.1bf4c2",
        "type": "delay",
        "z": "7e7a50da.2697",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 770,
        "y": 100,
        "wires": [
            [
                "89ba31ea.0ef1c8"
            ]
        ]
    },
    {
        "id": "d74378d5.016e28",
        "type": "click-on",
        "z": "e5bc796e.cf9db8",
        "name": "Go to search",
        "selector": "xpath",
        "target": "//*[@translate=\"common_search_button\"]",
        "timeout": 15000,
        "waitFor": "3000",
        "x": 170,
        "y": 280,
        "wires": [
            [
                "ba9e1f72.99cea"
            ],
            [
                "d72ad4d0.0adf08"
            ]
        ]
    },
    {
        "id": "266cfe2a.0160b2",
        "type": "send-keys",
        "z": "e5bc796e.cf9db8",
        "name": "Add msisdn",
        "keys": "",
        "selector": "xpath",
        "target": "//input[@ng-model=\"search_MSISDN\"]",
        "timeout": 15000,
        "waitFor": 500,
        "clearVal": false,
        "x": 730,
        "y": 280,
        "wires": [
            [
                "54f3c74c.637e88"
            ],
            [
                "d72ad4d0.0adf08"
            ]
        ]
    },
    {
        "id": "54f3c74c.637e88",
        "type": "click-on",
        "z": "e5bc796e.cf9db8",
        "name": "Click on search button",
        "selector": "xpath",
        "target": "(//span[@title=\"Search\"])[4]",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 940,
        "y": 280,
        "wires": [
            [
                "e6c5a928.ce8c78"
            ],
            [
                "d72ad4d0.0adf08"
            ]
        ]
    },
    {
        "id": "e6c5a928.ce8c78",
        "type": "click-on",
        "z": "e5bc796e.cf9db8",
        "name": "Click on the vehicle",
        "selector": "xpath",
        "target": "//*[@ng-bind=\"p.vin || nullStr\"]",
        "timeout": 15000,
        "waitFor": "2000",
        "x": 1160,
        "y": 280,
        "wires": [
            [
                "d49efc30.50b91"
            ],
            [
                "d72ad4d0.0adf08"
            ]
        ]
    },
    {
        "id": "a8c94236.5621a",
        "type": "function",
        "z": "e5bc796e.cf9db8",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Go to SIM Card'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 220,
        "wires": [
            [
                "64457455.2f2b4c"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "64457455.2f2b4c",
        "type": "function",
        "z": "e5bc796e.cf9db8",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.msisdn) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing msisdn\"}\n    );\n    node.error(\"Missing msisdn\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 220,
        "wires": [
            [
                "d74378d5.016e28"
            ],
            [
                "d72ad4d0.0adf08"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "d49efc30.50b91",
        "type": "function",
        "z": "e5bc796e.cf9db8",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Go to SIM Card'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1370,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "d72ad4d0.0adf08",
        "type": "function",
        "z": "e5bc796e.cf9db8",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Go to SIM Card : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Go to SIM Card : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 180,
        "y": 340,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "ba9e1f72.99cea",
        "type": "click-on",
        "z": "e5bc796e.cf9db8",
        "name": "Click on SIM Card tab",
        "selector": "xpath",
        "target": "//span[@translate=\"iot_sim_label\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 380,
        "y": 280,
        "wires": [
            [
                "1ba73ddc.45af32"
            ],
            [
                "d72ad4d0.0adf08"
            ]
        ]
    },
    {
        "id": "1ba73ddc.45af32",
        "type": "function",
        "z": "e5bc796e.cf9db8",
        "name": "Set keys",
        "func": "msg.keys = msg.var.msisdn\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 580,
        "y": 280,
        "wires": [
            [
                "266cfe2a.0160b2"
            ]
        ]
    },
    {
        "id": "4ddcd49f.3843bc",
        "type": "status",
        "z": "e5bc796e.cf9db8",
        "name": "",
        "scope": null,
        "x": 420,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "26dfb3ec.80d01c",
        "type": "click-on",
        "z": "7101d321.417efc",
        "name": "Go to search",
        "selector": "xpath",
        "target": "//*[@translate=\"common_search_button\"]",
        "timeout": 15000,
        "waitFor": "3000",
        "x": 270,
        "y": 260,
        "wires": [
            [
                "9d0a8bb0.902028"
            ],
            [
                "3f07ddab.e630b2"
            ]
        ]
    },
    {
        "id": "859ab2c8.76f3d",
        "type": "send-keys",
        "z": "7101d321.417efc",
        "name": "Add imei",
        "keys": "",
        "selector": "xpath",
        "target": "//input[@name=\"search_IMEI\"]",
        "timeout": 15000,
        "waitFor": 500,
        "clearVal": false,
        "x": 860,
        "y": 260,
        "wires": [
            [
                "7cab3dc0.602ee4"
            ],
            [
                "3f07ddab.e630b2"
            ]
        ]
    },
    {
        "id": "7cab3dc0.602ee4",
        "type": "click-on",
        "z": "7101d321.417efc",
        "name": "Click on search button",
        "selector": "xpath",
        "target": "(//span[@title=\"Search\"])[2]",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 1080,
        "y": 260,
        "wires": [
            [
                "b58c1e5.c70b6e"
            ],
            [
                "3f07ddab.e630b2"
            ]
        ]
    },
    {
        "id": "b58c1e5.c70b6e",
        "type": "click-on",
        "z": "7101d321.417efc",
        "name": "Click on the vehicle",
        "selector": "xpath",
        "target": "//*[@ng-bind=\"p.vin || nullStr\"]",
        "timeout": 15000,
        "waitFor": "2000",
        "x": 1320,
        "y": 260,
        "wires": [
            [
                "57d355a4.7beacc"
            ],
            [
                "3f07ddab.e630b2"
            ]
        ]
    },
    {
        "id": "3b7ca899.e361c8",
        "type": "function",
        "z": "7101d321.417efc",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'Go to TBOX Card'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 290,
        "y": 200,
        "wires": [
            [
                "bd46611b.06da9"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "bd46611b.06da9",
        "type": "function",
        "z": "7101d321.417efc",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.imei) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing imei\"}\n    );\n    node.error(\"Missing imei\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 510,
        "y": 200,
        "wires": [
            [
                "26dfb3ec.80d01c"
            ],
            [
                "3f07ddab.e630b2"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "57d355a4.7beacc",
        "type": "function",
        "z": "7101d321.417efc",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'Go to TBOX Card'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1530,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "3f07ddab.e630b2",
        "type": "function",
        "z": "7101d321.417efc",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Go to TBOX Card : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Go to TBOX Card : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 280,
        "y": 320,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "9d0a8bb0.902028",
        "type": "click-on",
        "z": "7101d321.417efc",
        "name": "Click on T-Box tab",
        "selector": "xpath",
        "target": "//span[@translate=\"common_tbox_label\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 470,
        "y": 260,
        "wires": [
            [
                "fae1eabf.757eb8"
            ],
            [
                "3f07ddab.e630b2"
            ]
        ]
    },
    {
        "id": "fae1eabf.757eb8",
        "type": "function",
        "z": "7101d321.417efc",
        "name": "Set keys",
        "func": "msg.keys = msg.var.imei\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 680,
        "y": 260,
        "wires": [
            [
                "859ab2c8.76f3d"
            ]
        ]
    },
    {
        "id": "a804c65f.303138",
        "type": "status",
        "z": "7101d321.417efc",
        "name": "",
        "scope": null,
        "x": 500,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "43625423.b2e09c",
        "type": "subflow:bcf6ad2e.ac4de8",
        "z": "50a6095e.4fbe9",
        "name": "",
        "env": [],
        "x": 230,
        "y": 180,
        "wires": [
            [
                "8cafa641.2e374"
            ],
            [
                "c405a9e3.1436d",
                "47ecb87c.d4756"
            ]
        ]
    },
    {
        "id": "c405a9e3.1436d",
        "type": "function",
        "z": "50a6095e.4fbe9",
        "name": "Retry Policy",
        "func": "msg.retry+=1;\nnode.warn(\"retry : \" + msg.retry);\n// If retry < 10 => continue\nif (msg.retry < 10){\n    msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Retry attempt\",\n    \"status\" : \"OK. \" + \"Retry attempt number \" + msg.retry}\n);\nreturn [msg, null];\n} else {\n    // If retry > 10 => stderr\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 710,
        "y": 180,
        "wires": [
            [
                "4c3bc79c.46a618"
            ],
            []
        ],
        "outputLabels": [
            "error",
            ""
        ],
        "icon": "font-awesome/fa-history"
    },
    {
        "id": "9c70eccc.ccb8f8",
        "type": "function",
        "z": "50a6095e.4fbe9",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'SF Check the Good Instanciation'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 210,
        "y": 120,
        "wires": [
            [
                "cb3c9c57.b99a9"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "cb3c9c57.b99a9",
        "type": "function",
        "z": "50a6095e.4fbe9",
        "name": "Init Retry value",
        "func": "msg.retry = 0;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 420,
        "y": 120,
        "wires": [
            [
                "4c3bc79c.46a618"
            ]
        ],
        "outputLabels": [
            "error",
            ""
        ]
    },
    {
        "id": "bf4cd665.4dae1",
        "type": "comment",
        "z": "50a6095e.4fbe9",
        "name": "SF Check the Good Instanciation",
        "info": "Check if the instanciation has been done on CVMP",
        "x": 170,
        "y": 40,
        "wires": []
    },
    {
        "id": "4076a510.f80a7c",
        "type": "status",
        "z": "50a6095e.4fbe9",
        "name": "",
        "scope": null,
        "x": 460,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "4c3bc79c.46a618",
        "type": "function",
        "z": "50a6095e.4fbe9",
        "name": "Set delay arround 2min",
        "func": "msg.delay = msg.var.delayArround2min *120000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 640,
        "y": 100,
        "wires": [
            [
                "78a308c3.ae50c"
            ]
        ]
    },
    {
        "id": "78a308c3.ae50c",
        "type": "delay",
        "z": "50a6095e.4fbe9",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 830,
        "y": 100,
        "wires": [
            [
                "43625423.b2e09c"
            ]
        ]
    },
    {
        "id": "1ca0dd8e.926882",
        "type": "function",
        "z": "381b8fc4.dee9d",
        "name": "Generate WinSCP script for CORVET",
        "func": "msg.payload =\"open \"+ msg.var.corvetSftpProtocol + \"://\" + msg.var.corvetSftpLogin + \":\" + msg.var.corvetSftpPwd + \"@\" + msg.var.corvetSftpHost + \":\" + msg.var.corvetSftpPort + \"/ -hostkey=\\\"*\\\"\"\nmsg.payload += \"\\n\"\nmsg.payload += \"lcd \" + msg.var.folderUpload\nmsg.payload += \"\\n\"\nmsg.payload += \"cd /Inbox\"\nmsg.payload += \"\\n\"\nmsg.payload += \"rm \" + msg.var.corvetFilesToRemove\nmsg.payload += \"\\n\"\nmsg.payload += \"put \" + msg.var.fileNameCORVET\nmsg.payload += \"\\n\"\nmsg.payload += \"exit\"\n\nmsg.filename= msg.var.folderTemp + \"\\\\ScriptsWinSCP\\\\scriptCORVET.txt\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 550,
        "y": 100,
        "wires": [
            [
                "e3c351f5.82b628"
            ]
        ]
    },
    {
        "id": "e3c351f5.82b628",
        "type": "file",
        "z": "381b8fc4.dee9d",
        "name": "",
        "filename": "",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 790,
        "y": 100,
        "wires": [
            [
                "25aef8bc.1c8198"
            ]
        ]
    },
    {
        "id": "b87b837.c9b6d8",
        "type": "function",
        "z": "381b8fc4.dee9d",
        "name": "Set command into payload",
        "func": "msg.payload=\"\\\"\" + msg.var.clientSftpExe + \"\\\"\" ;\nmsg.payload = msg.payload +  \" /log=\\\"\" + msg.var.folderTemp + \"\\\\ScriptsWinSCP\\\\logs\\\\WinSCP.log\\\"\" ;\nmsg.payload = msg.payload +  \" /ini=nul /script=\\\"\" + msg.var.folderTemp   + \"\\\\ScriptsWinSCP\\\\scriptCORVET.txt\\\"\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 960,
        "y": 180,
        "wires": [
            [
                "1e28a050.37c98"
            ]
        ]
    },
    {
        "id": "1e28a050.37c98",
        "type": "exec",
        "z": "381b8fc4.dee9d",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 610,
        "y": 280,
        "wires": [
            [
                "f79de985.7d6528"
            ],
            [
                "fb4b107d.6e19e"
            ],
            [
                "23b038b5.b463a8",
                "9f334bae.2c4bc8"
            ]
        ]
    },
    {
        "id": "d2c4f6ba.d695e8",
        "type": "function",
        "z": "381b8fc4.dee9d",
        "name": "Generate sftp script for CORVET for linux",
        "func": "node.error(\"TODO script for sftp for linux\")\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 570,
        "y": 180,
        "wires": [
            [
                "1e28a050.37c98"
            ]
        ]
    },
    {
        "id": "51a05af9.c37ce4",
        "type": "switch",
        "z": "381b8fc4.dee9d",
        "name": "",
        "property": "payload.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Windows_NT",
                "vt": "str"
            },
            {
                "t": "neq",
                "v": "Windows_NT",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 310,
        "y": 100,
        "wires": [
            [
                "1ca0dd8e.926882"
            ],
            [
                "d2c4f6ba.d695e8"
            ]
        ]
    },
    {
        "id": "83da3c01.f9c98",
        "type": "OS",
        "z": "381b8fc4.dee9d",
        "name": "",
        "x": 170,
        "y": 100,
        "wires": [
            [
                "51a05af9.c37ce4"
            ]
        ]
    },
    {
        "id": "74203029.a29d4",
        "type": "status",
        "z": "381b8fc4.dee9d",
        "name": "",
        "scope": null,
        "x": 220,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "25aef8bc.1c8198",
        "type": "function",
        "z": "381b8fc4.dee9d",
        "name": "Create empty SFTP logs",
        "func": "msg.filename = msg.var.folderTemp + \"\\\\ScriptsWinSCP\\\\logs\\\\WinSCP.log\" ;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1010,
        "y": 100,
        "wires": [
            [
                "bad4bd35.3acbf"
            ]
        ]
    },
    {
        "id": "bad4bd35.3acbf",
        "type": "file",
        "z": "381b8fc4.dee9d",
        "name": "",
        "filename": "",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1210,
        "y": 100,
        "wires": [
            [
                "b87b837.c9b6d8"
            ]
        ]
    },
    {
        "id": "d45a9a5b.73fcd8",
        "type": "exec",
        "z": "98aa82b9.7d7c5",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 930,
        "y": 340,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "3919f43f.c7dccc",
        "type": "function",
        "z": "98aa82b9.7d7c5",
        "name": "Set command into payload",
        "func": "msg.payload=\"\\\"\" + msg.var.clientSftpExe + \"\\\"\";\nmsg.payload = msg.payload +  \" /log=\\\"\" + msg.var.folderTemp + \"\\\\ScriptsWinSCP\\\\logs\\\\WinSCP.log\\\"\" ;\nmsg.payload = msg.payload +  \" /ini=nul /script=\\\"\" + msg.var.folderTemp   + \"\\\\ScriptsWinSCP\\\\scriptMMBYTEL.txt\\\"\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1020,
        "y": 240,
        "wires": [
            [
                "d45a9a5b.73fcd8"
            ]
        ]
    },
    {
        "id": "48508cd6.f4867c",
        "type": "file",
        "z": "98aa82b9.7d7c5",
        "name": "",
        "filename": "",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 870,
        "y": 120,
        "wires": [
            [
                "2652fcdb.380864"
            ]
        ]
    },
    {
        "id": "f0e15334.1ef34",
        "type": "function",
        "z": "98aa82b9.7d7c5",
        "name": "Generate WinSCP script for MM & BYTEL",
        "func": "msg.payload =\"open \" + msg.var.BouyguesTelSftpProtocol + \"://\" + msg.var.BouyguesTelSftpLogin +\":\"+msg.var.BouyguesTelSftpPwd+\"@\"+msg.var.BouyguesTelSftpHost+\":\"+msg.var.BouyguesTelSftpPort+\"/ -hostkey=\\\"*\\\"\"\nmsg.payload += \"\\n\"\nmsg.payload += \"lcd \" + msg.var.folderUpload\nmsg.payload += \"\\n\"\nmsg.payload += \"cd /Inbox\"\nmsg.payload += \"\\n\"\nmsg.payload += \"rm \" + msg.var.MMAndBouyguesTelFilesToRemove\nmsg.payload += \"\\n\"\nmsg.payload += \"put \" + msg.var.fileNameMM\nmsg.payload += \"\\n\"\nmsg.payload += \"put \" + msg.var.fileNameBYTEL\nmsg.payload += \"\\n\"\nmsg.payload += \"exit\"\n\nmsg.filename = msg.var.folderTemp + \"\\\\ScriptsWinSCP\\\\scriptMMBYTEL.txt\"\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 540,
        "y": 120,
        "wires": [
            [
                "48508cd6.f4867c",
                "7cd74113.27891"
            ]
        ]
    },
    {
        "id": "8b91f9ab.9d2fb8",
        "type": "OS",
        "z": "98aa82b9.7d7c5",
        "name": "",
        "x": 150,
        "y": 120,
        "wires": [
            [
                "c7542340.63cff"
            ]
        ]
    },
    {
        "id": "c7542340.63cff",
        "type": "switch",
        "z": "98aa82b9.7d7c5",
        "name": "",
        "property": "payload.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Windows_NT",
                "vt": "str"
            },
            {
                "t": "neq",
                "v": "Windows_NT",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 270,
        "y": 120,
        "wires": [
            [
                "f0e15334.1ef34"
            ],
            [
                "6873ac47.d65d44"
            ]
        ]
    },
    {
        "id": "6873ac47.d65d44",
        "type": "function",
        "z": "98aa82b9.7d7c5",
        "name": "Generate sftp script for MM & BYTEL for linux",
        "func": "node.error(\"TODO script for sftp for linux\")",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 550,
        "y": 260,
        "wires": [
            [
                "d45a9a5b.73fcd8"
            ]
        ]
    },
    {
        "id": "a2505c95.030fd8",
        "type": "status",
        "z": "98aa82b9.7d7c5",
        "name": "",
        "scope": null,
        "x": 140,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "7cd74113.27891",
        "type": "debug",
        "z": "98aa82b9.7d7c5",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 180,
        "wires": []
    },
    {
        "id": "2652fcdb.380864",
        "type": "function",
        "z": "98aa82b9.7d7c5",
        "name": "Create empty SFTP logs",
        "func": "msg.filename = msg.var.folderTemp + \"\\\\ScriptsWinSCP\\\\logs\\\\WinSCP.log\" ;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1070,
        "y": 120,
        "wires": [
            [
                "640ec486.63dd3c"
            ]
        ]
    },
    {
        "id": "640ec486.63dd3c",
        "type": "file",
        "z": "98aa82b9.7d7c5",
        "name": "",
        "filename": "",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1290,
        "y": 120,
        "wires": [
            [
                "3919f43f.c7dccc"
            ]
        ]
    },
    {
        "id": "471b44c9.d1d57c",
        "type": "function",
        "z": "a450d1fa.a4ffb8",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'SF Upload files on server via SFTP'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 170,
        "y": 160,
        "wires": [
            [
                "9c559e2d.cc634"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "9c559e2d.cc634",
        "type": "function",
        "z": "a450d1fa.a4ffb8",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.folderUpload) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing folderUpload\"}\n    );\n    node.error(\"Missing folderUpload\");\n    return [null, msg];\n}\nif (!msg.var.fileNameMM) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing fileNameMM\"}\n    );\n    node.error(\"Missing fileNameMM\");\n    return [null, msg];\n}\nif (!msg.var.fileNameBYTEL) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing fileNameBYTEL\"}\n    );\n    node.error(\"Missing fileNameBYTEL\");\n    return [null, msg];\n}\nif (!msg.var.fileNameCORVET) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing fileNameCORVET\"}\n    );\n    node.error(\"Missing fileNameCORVET\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "x": 410,
        "y": 160,
        "wires": [
            [
                "61184424.b4375c"
            ],
            [
                "748ce3df.19866c"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "79e39ba.997f764",
        "type": "function",
        "z": "a450d1fa.a4ffb8",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF Upload files on server via SFTP'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 770,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "748ce3df.19866c",
        "type": "function",
        "z": "a450d1fa.a4ffb8",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Upload files on server via SFTP : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Upload files on server via SFTP : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 160,
        "y": 340,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "61184424.b4375c",
        "type": "subflow:98aa82b9.7d7c5",
        "z": "a450d1fa.a4ffb8",
        "name": "",
        "env": [],
        "x": 250,
        "y": 220,
        "wires": [
            [
                "ee75c1f7.d463f"
            ],
            [
                "748ce3df.19866c"
            ]
        ]
    },
    {
        "id": "ee75c1f7.d463f",
        "type": "subflow:381b8fc4.dee9d",
        "z": "a450d1fa.a4ffb8",
        "name": "",
        "env": [],
        "x": 240,
        "y": 280,
        "wires": [
            [
                "79e39ba.997f764"
            ],
            [
                "748ce3df.19866c"
            ]
        ]
    },
    {
        "id": "c56acf10.a09758",
        "type": "status",
        "z": "a450d1fa.a4ffb8",
        "name": "",
        "scope": null,
        "x": 260,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "31adca6.46d58b6",
        "type": "comment",
        "z": "12c987d4.0f99e",
        "name": "SF Delete BTA on AVMS",
        "info": "Delete a BTA on AVMS",
        "x": 210,
        "y": 40,
        "wires": []
    },
    {
        "id": "b9c9419f.f68808",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'SF Delete BTA on AVMS'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 230,
        "y": 140,
        "wires": [
            [
                "63e57bc8.1d7f2c"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "c1cf20a9.01e0b",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF Delete BTA on AVMS'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1130,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "ba0c3585.20b7c8",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "[Log] Error log",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"SF Delete BTA on AVMS :\",\n    \"status\" : \"KO\" \n});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 220,
        "y": 500,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "948cca70.93e9a",
        "type": "http request",
        "z": "12c987d4.0f99e",
        "name": "AVMS Authentification",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1400,
        "y": 140,
        "wires": [
            [
                "8ce84de2.57817"
            ]
        ]
    },
    {
        "id": "adaa0eb1.06b8a8",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "Set headers and payload (body msg)",
        "func": "msg.headers = \"{\\\"Content-Type\\\" : \\\"application/x-www-form-urlencoded\\\"}\"\nmsg.payload = \"grant_type=password&username=\" + msg.var.AVMSAppliUserLogin + \"&password=\" + msg.var.AVMSAppliUserPwd + \"&client_id=\" + msg.var.AVMSAppliClientId + \"&client_secret=\" + msg.var.AVMSAppliClientSecret\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 770,
        "y": 140,
        "wires": [
            [
                "9f926e3f.4bd848"
            ]
        ]
    },
    {
        "id": "63e57bc8.1d7f2c",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.AVMSAppliUserLogin) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing AVMSAppliUserLogin\"}\n    );\n    node.error(\"Missing AVMSAppliUserLogin\");\n    return [null, msg];\n}\nif (!msg.var.AVMSAppliUserPwd) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission AVMSAppliUserPwd\"}\n    );\n    node.error(\"Missing AVMSAppliUserPwd\");\n    return [null, msg];\n}\nif (!msg.var.AVMSAppliClientId){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission AVMSAppliClientId\"}\n    );\n    node.error(\"Missing AVMSAppliClientId\");\n    return [null, msg];\n}\nif (!msg.var.AVMSAppliClientSecret){\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Mission AVMSAppliClientSecret\"}\n    );\n    node.error(\"Missing AVMSAppliClientSecret\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 470,
        "y": 140,
        "wires": [
            [
                "adaa0eb1.06b8a8"
            ],
            []
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "8ce84de2.57817",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "Display Server response",
        "func": "//Display the response of the server\nif (msg.statusCode === 200){\nmsg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Server response for authentication\",\n        \"status\" : \"OK. Status : 200\"\n    });\nreturn [msg, null];\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Server response for authentication: \",\n        \"status\" : \"KO. Status : \" + msg.statusCode\n    });\n    node.error(msg.payload);\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "x": 250,
        "y": 200,
        "wires": [
            [
                "1c4287bd.799c18"
            ],
            [
                "ba0c3585.20b7c8"
            ]
        ]
    },
    {
        "id": "1c4287bd.799c18",
        "type": "json",
        "z": "12c987d4.0f99e",
        "name": "msg.payload to object",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 510,
        "y": 200,
        "wires": [
            [
                "a2ac3f35.13a91"
            ]
        ]
    },
    {
        "id": "a2ac3f35.13a91",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "Set access Token into msg.avms.accessToken",
        "func": "msg.avms = {}\nmsg.avms.accessToken = msg.payload.access_token\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 200,
        "wires": [
            [
                "87facdaa.ff1cb"
            ]
        ]
    },
    {
        "id": "e82c9ef3.b96618",
        "type": "comment",
        "z": "12c987d4.0f99e",
        "name": "Authentication",
        "info": "",
        "x": 210,
        "y": 100,
        "wires": []
    },
    {
        "id": "df7f0634.23fa48",
        "type": "comment",
        "z": "12c987d4.0f99e",
        "name": "Find Uid by IMEI",
        "info": "",
        "x": 220,
        "y": 240,
        "wires": []
    },
    {
        "id": "817004d6.0c8e78",
        "type": "comment",
        "z": "12c987d4.0f99e",
        "name": "Delete system",
        "info": "",
        "x": 210,
        "y": 380,
        "wires": []
    },
    {
        "id": "87facdaa.ff1cb",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "Set headers for Find by IMEI the UID",
        "func": "msg.headers = \"{\\\"Authorization\\\": \\\"Bearer \" + msg.avms.accessToken + \"\\\"}\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 290,
        "y": 280,
        "wires": [
            [
                "b73b5174.5af9b"
            ]
        ]
    },
    {
        "id": "b11c198f.c83548",
        "type": "http request",
        "z": "12c987d4.0f99e",
        "name": "AVMS Find UID",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 940,
        "y": 280,
        "wires": [
            [
                "75b5b3e6.80b314"
            ]
        ]
    },
    {
        "id": "75b5b3e6.80b314",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "Display Server response",
        "func": "//Display the response of the server\nif (msg.statusCode === 200){\nmsg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Server response for find Uid by IMEI\",\n        \"status\" : \"OK. Status : 200\"\n    });\nreturn [msg, null];\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Server response for find Uid by IMEI: \",\n        \"status\" : \"KO. Status : \" + msg.statusCode\n    });\n    node.error(msg.payload);\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "x": 1170,
        "y": 280,
        "wires": [
            [
                "8cd69f06.24c19"
            ],
            [
                "ba0c3585.20b7c8"
            ]
        ]
    },
    {
        "id": "8cd69f06.24c19",
        "type": "json",
        "z": "12c987d4.0f99e",
        "name": "msg.payload to object",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 240,
        "y": 340,
        "wires": [
            [
                "dc07589f.a2bce"
            ]
        ]
    },
    {
        "id": "dc07589f.a2bce",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "Set UID into msg.avms.uid",
        "func": "if (msg.payload.items.length > 0) {\n    if (msg.payload.items[0].uid){\n        msg.avms.uid = msg.payload.items[0].uid\n        return [msg, null];\n    } else {\n        return [null, msg];\n    }\n}\nelse {\n    node.warn(\"Nothing to delete in SF Delete BTA in AVMS \")\n    return [null, msg]\n}\n\n//node.warn(msg.payload.items[0].uid);\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 500,
        "y": 340,
        "wires": [
            [
                "985735e0.215d38"
            ],
            [
                "c1cf20a9.01e0b"
            ]
        ]
    },
    {
        "id": "985735e0.215d38",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "Set headers DELETE",
        "func": "msg.headers = \"{\\\"Authorization\\\": \\\"Bearer \" + msg.avms.accessToken + \"\\\"}\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 240,
        "y": 420,
        "wires": [
            [
                "2d99b272.91a6de"
            ]
        ]
    },
    {
        "id": "8c1dcbc4.5e6108",
        "type": "http request",
        "z": "12c987d4.0f99e",
        "name": "AVMS DELETE",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 840,
        "y": 420,
        "wires": [
            [
                "d4098f89.18b878"
            ]
        ]
    },
    {
        "id": "25a698f5.1b9678",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "Set msg.url",
        "func": "//msg.url = \"https://eu.airvantage.net/api/v1/systems/\" + msg.avms.uid + \"?deleteGateway=true&deleteSubscription=true\";\nmsg.url = msg.var.AVMSApiProtocol + \"://\" + msg.var.AVMSApiHost + \":\" + msg.var.AVMSApiPort +\"/api/v1/systems/\" + msg.avms.uid + \"?company=\"+msg.var.AVMSAppliCompany;\n// Attention : peut etre mettre uid entre {}\nreturn msg;\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 650,
        "y": 420,
        "wires": [
            [
                "8c1dcbc4.5e6108"
            ]
        ]
    },
    {
        "id": "7c868bc2.ce9f3c",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "Set msg.url",
        "func": "msg.url = msg.var.AVMSAppliProtocol + \"://\" + msg.var.AVMSAppliHost  + \":\" + msg.var.AVMSAppliPort + \"/api/v1/systems?gateway=imei:\" + msg.var.imei + \"&fields=uid&company=\" + msg.var.AVMSAppliCompany;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 750,
        "y": 280,
        "wires": [
            [
                "b11c198f.c83548"
            ]
        ]
    },
    {
        "id": "d4098f89.18b878",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "Display Server response",
        "func": "//Display the response of the server\nif (msg.statusCode === 200){\nmsg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Server response for deleting system\",\n        \"status\" : \"OK. Status : 200\"\n    });\nnode.log(\"OK : vehicule deleted from AVMS\");\nreturn [msg, null];\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Server response for deleting system: \",\n        \"status\" : \"KO. Status : \" + msg.statusCode\n    });\n    node.error(msg.payload);\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1070,
        "y": 420,
        "wires": [
            [
                "c1cf20a9.01e0b"
            ],
            [
                "ba0c3585.20b7c8"
            ]
        ]
    },
    {
        "id": "b73b5174.5af9b",
        "type": "json",
        "z": "12c987d4.0f99e",
        "name": "Convert to json",
        "property": "headers",
        "action": "",
        "pretty": false,
        "x": 560,
        "y": 280,
        "wires": [
            [
                "7c868bc2.ce9f3c"
            ]
        ]
    },
    {
        "id": "9f926e3f.4bd848",
        "type": "json",
        "z": "12c987d4.0f99e",
        "name": "Convert to json",
        "property": "headers",
        "action": "",
        "pretty": false,
        "x": 1040,
        "y": 140,
        "wires": [
            [
                "9b50f659.550cc8"
            ]
        ]
    },
    {
        "id": "2d99b272.91a6de",
        "type": "json",
        "z": "12c987d4.0f99e",
        "name": "Convert to json",
        "property": "headers",
        "action": "",
        "pretty": false,
        "x": 460,
        "y": 420,
        "wires": [
            [
                "25a698f5.1b9678"
            ]
        ]
    },
    {
        "id": "bc4ef5cf.67b0f8",
        "type": "status",
        "z": "12c987d4.0f99e",
        "name": "",
        "scope": null,
        "x": 430,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "9b50f659.550cc8",
        "type": "function",
        "z": "12c987d4.0f99e",
        "name": "Set Url",
        "func": "msg.url = msg.var.AVMSAppliProtocol + \"://\" + msg.var.AVMSAppliHost + \":\" + msg.var.AVMSAppliPort +\"/api/oauth/token\"; \nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1210,
        "y": 140,
        "wires": [
            [
                "948cca70.93e9a"
            ]
        ]
    },
    {
        "id": "6feef9ed.64aa2",
        "type": "click-on",
        "z": "119d616e.e33e0f",
        "name": "Go to search",
        "selector": "xpath",
        "target": "//div[@id=\"iotMenu\"]//*[@translate=\"common_search_button\"]",
        "timeout": 15000,
        "waitFor": "3000",
        "x": 190,
        "y": 200,
        "wires": [
            [
                "20ae2872.ecd4e8"
            ],
            [
                "c84a4b0c.a35228"
            ]
        ]
    },
    {
        "id": "7512afc8.452b9",
        "type": "send-keys",
        "z": "119d616e.e33e0f",
        "name": "Add id Vehicle",
        "keys": "",
        "selector": "xpath",
        "target": "//*[@ng-model=\"search_VIN\"]",
        "timeout": 15000,
        "waitFor": 500,
        "clearVal": false,
        "x": 1000,
        "y": 200,
        "wires": [
            [
                "fa114af0.5dc938"
            ],
            [
                "c84a4b0c.a35228"
            ]
        ]
    },
    {
        "id": "fa114af0.5dc938",
        "type": "click-on",
        "z": "119d616e.e33e0f",
        "name": "Click on search button",
        "selector": "xpath",
        "target": "//span[@title=\"Search\"]",
        "timeout": 15000,
        "waitFor": "500",
        "x": 1210,
        "y": 200,
        "wires": [
            [
                "22d52963.f8ca46"
            ],
            [
                "c84a4b0c.a35228"
            ]
        ]
    },
    {
        "id": "a21f6458.7eced",
        "type": "function",
        "z": "119d616e.e33e0f",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'SF Delete a Vehicule (CVMP)'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 210,
        "y": 140,
        "wires": [
            [
                "2fb43e81.cd67da"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "2fb43e81.cd67da",
        "type": "function",
        "z": "119d616e.e33e0f",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.vin) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing vin\"}\n    );\n    node.error(\"Missing vin\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 430,
        "y": 140,
        "wires": [
            [
                "6feef9ed.64aa2",
                "2d04dace.9ab076"
            ],
            [
                "c84a4b0c.a35228"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "c0ca2d51.c037a",
        "type": "function",
        "z": "119d616e.e33e0f",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF Delete a Vehicule (CVMP)'\",\n    \"status\" : \"OK. The VIN has been delete or not exist\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 970,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "c84a4b0c.a35228",
        "type": "function",
        "z": "119d616e.e33e0f",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Delete a Vehicule (CVMP) : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Delete a Vehicule (CVMP) : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 680,
        "y": 500,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "ba1fe6c8.6771a",
        "type": "comment",
        "z": "119d616e.e33e0f",
        "name": "SF Delete a Vehicule (CVMP)",
        "info": "Delete the vehicule\n\nParameter :\n- VIN",
        "x": 240,
        "y": 80,
        "wires": []
    },
    {
        "id": "59b598d2.c37278",
        "type": "click-on",
        "z": "119d616e.e33e0f",
        "name": "Click On Delete",
        "selector": "xpath",
        "target": "//*[@ng-click=\"setDeleteId(p,p.id,p.vin,$event)\"]",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 200,
        "y": 440,
        "wires": [
            [
                "de3876ba.e5d39",
                "6745675e.dc01f"
            ],
            [
                "c84a4b0c.a35228",
                "5382d048.cf845"
            ]
        ]
    },
    {
        "id": "de3876ba.e5d39",
        "type": "click-on",
        "z": "119d616e.e33e0f",
        "name": "Click On Yes",
        "selector": "xpath",
        "target": "//*[@ng-click=\"yes()\"]",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 470,
        "y": 440,
        "wires": [
            [
                "c0ca2d51.c037a"
            ],
            [
                "c84a4b0c.a35228"
            ]
        ]
    },
    {
        "id": "31365e3c.e83142",
        "type": "function",
        "z": "119d616e.e33e0f",
        "name": "Delete msg.error",
        "func": "msg.error = undefined;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 970,
        "y": 360,
        "wires": [
            [
                "c0ca2d51.c037a"
            ]
        ]
    },
    {
        "id": "2d04dace.9ab076",
        "type": "debug",
        "z": "119d616e.e33e0f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 680,
        "y": 140,
        "wires": []
    },
    {
        "id": "22d52963.f8ca46",
        "type": "function",
        "z": "119d616e.e33e0f",
        "name": "Set target",
        "func": "msg.target = \"//*[@title='\" + msg.var.vin + \"']\"\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1420,
        "y": 200,
        "wires": [
            [
                "bfd70436.e9bab8"
            ]
        ]
    },
    {
        "id": "bfd70436.e9bab8",
        "type": "get-text",
        "z": "119d616e.e33e0f",
        "name": "",
        "expected": "",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "savetofile": false,
        "x": 1420,
        "y": 260,
        "wires": [
            [
                "59b598d2.c37278"
            ],
            [
                "31365e3c.e83142"
            ]
        ]
    },
    {
        "id": "fd66df68.aa4fb",
        "type": "find-element",
        "z": "119d616e.e33e0f",
        "name": "Find my VIN on page",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 1040,
        "y": 60,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "20ae2872.ecd4e8",
        "type": "function",
        "z": "119d616e.e33e0f",
        "name": "Set keys",
        "func": "msg.keys = msg.var.vin\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 360,
        "y": 200,
        "wires": [
            [
                "2015d48f.92ed3c"
            ]
        ]
    },
    {
        "id": "6a8c577f.9f92c",
        "type": "status",
        "z": "119d616e.e33e0f",
        "name": "",
        "scope": null,
        "x": 480,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "6745675e.dc01f",
        "type": "debug",
        "z": "119d616e.e33e0f",
        "name": "msgDelete1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 410,
        "y": 340,
        "wires": []
    },
    {
        "id": "5382d048.cf845",
        "type": "debug",
        "z": "119d616e.e33e0f",
        "name": "msgDelete2",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 390,
        "y": 500,
        "wires": []
    },
    {
        "id": "2015d48f.92ed3c",
        "type": "function",
        "z": "119d616e.e33e0f",
        "name": "Set delay arround 2s",
        "func": "msg.delay = msg.var.delayArround2s *2000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 530,
        "y": 200,
        "wires": [
            [
                "64362a73.e0344c"
            ]
        ]
    },
    {
        "id": "64362a73.e0344c",
        "type": "delay",
        "z": "119d616e.e33e0f",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 730,
        "y": 200,
        "wires": [
            [
                "7512afc8.452b9"
            ]
        ]
    },
    {
        "id": "a3951d4b.86ddd8",
        "type": "status",
        "z": "9d071bf6.10a1e8",
        "name": "",
        "scope": null,
        "x": 1420,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "aa0ccef9.d6f318",
        "type": "function",
        "z": "9d071bf6.10a1e8",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.target) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"New click\",\n        \"status\" : \"Missing target\"}\n    );\n    node.error(\"Missing target\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 120,
        "wires": [
            [
                "9f99950f.5fa51"
            ],
            [
                "4dc24c12.3cca84"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "9f99950f.5fa51",
        "type": "click-on",
        "z": "9d071bf6.10a1e8",
        "name": "Click on target element",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "clickOn": false,
        "x": 640,
        "y": 120,
        "wires": [
            [
                "bf9143c.434f8c"
            ],
            [
                "528c71da.b14858"
            ]
        ]
    },
    {
        "id": "76863376.89f23c",
        "type": "function",
        "z": "9d071bf6.10a1e8",
        "name": "Set loopIndex",
        "func": "msg.var.loopIndex = 0;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 170,
        "y": 120,
        "wires": [
            [
                "aa0ccef9.d6f318"
            ]
        ]
    },
    {
        "id": "528c71da.b14858",
        "type": "function",
        "z": "9d071bf6.10a1e8",
        "name": "Loop",
        "func": "if(msg.var.loopIndex < 10){\n    msg.var.loopIndex++;\n    node.warn(\"Click error. Loop : \"+msg.var.loopIndex);\n    return[msg, null];\n}else{\n    node.warn(\"Click failed. with loop : \"+msg.var.loopIndex);\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 120,
        "y": 260,
        "wires": [
            [
                "8d68df23.10cd1"
            ],
            [
                "4dc24c12.3cca84"
            ]
        ]
    },
    {
        "id": "4dc24c12.3cca84",
        "type": "function",
        "z": "9d071bf6.10a1e8",
        "name": "[Log] error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Click on start in process_basic_europe error \",\n    \"status\" : \"KO\"\n})\nnode.warn(\"Click on start in process_basic_europe error\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 750,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "e21397b1.d43718",
        "type": "find-element",
        "z": "9d071bf6.10a1e8",
        "name": "Look for h5 \"Start Workflow\"",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": 500,
        "x": 1440,
        "y": 120,
        "wires": [
            [
                "ded4df3b.b7f088"
            ],
            [
                "24a96819.e672e8"
            ]
        ]
    },
    {
        "id": "5cdb7419.31c4a4",
        "type": "function",
        "z": "9d071bf6.10a1e8",
        "name": "set target",
        "func": "msg.target =\"//div[@id='showStartDialog' and contains(@style, 'block')]//h5[contains(text(), 'Start Workflow')]\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1240,
        "y": 120,
        "wires": [
            [
                "e21397b1.d43718"
            ]
        ]
    },
    {
        "id": "24a96819.e672e8",
        "type": "function",
        "z": "9d071bf6.10a1e8",
        "name": "warn",
        "func": "var loop = msg.var.loopIndex +1\nnode.warn(\"Popup title not found, retry. Loop : \"+loop);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 690,
        "y": 200,
        "wires": [
            [
                "93f8a5d3.1d16a8"
            ]
        ]
    },
    {
        "id": "ded4df3b.b7f088",
        "type": "function",
        "z": "9d071bf6.10a1e8",
        "name": "warn",
        "func": "node.warn(\"Process started. Loop : \"+msg.var.loopIndex);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 810,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "e895ad75.83c7d",
        "type": "comment",
        "z": "9d071bf6.10a1e8",
        "name": "Get Start Flow title of the next to popup with style displayed as \"block\" to verify click worked",
        "info": "",
        "x": 1430,
        "y": 80,
        "wires": []
    },
    {
        "id": "322e4e26.82398a",
        "type": "navigate",
        "z": "9d071bf6.10a1e8",
        "name": "",
        "url": "",
        "navType": "to",
        "waitFor": 500,
        "x": 960,
        "y": 200,
        "wires": [
            [
                "10435fd9.dc7a18"
            ],
            [
                "4dc24c12.3cca84"
            ]
        ]
    },
    {
        "id": "cf0c5479.221848",
        "type": "click-on",
        "z": "9d071bf6.10a1e8",
        "name": "Click On Process Basic Europe",
        "selector": "xpath",
        "target": "//*[@ng-bind=\"project.projectName\" and text()=\"Process_Basic_Europe\"]",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 1580,
        "y": 200,
        "wires": [
            [
                "7245d825.da57"
            ],
            [
                "4dc24c12.3cca84"
            ]
        ]
    },
    {
        "id": "8c180a64.27fcf",
        "type": "function",
        "z": "9d071bf6.10a1e8",
        "name": "Set workflow var into Target",
        "func": "// Insert param for next node to target in order to find the button on screen\nmsg.target = \"//*[@title='\" + msg.var.workflow + \"']/../following-sibling::td[3]/div/div/span[@ng-click='startProcess(flow.processName, flow.version)']/*[@class='iot-svg-icon']\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2230,
        "y": 200,
        "wires": [
            [
                "528c71da.b14858"
            ]
        ]
    },
    {
        "id": "9752579d.47abc8",
        "type": "comment",
        "z": "9d071bf6.10a1e8",
        "name": "If title not found, navigate to Process Management>click on Process_Basic_Europe>Go to loop",
        "info": "",
        "x": 1070,
        "y": 160,
        "wires": []
    },
    {
        "id": "93f8a5d3.1d16a8",
        "type": "function",
        "z": "9d071bf6.10a1e8",
        "name": "Set Url",
        "func": "// to use the node 'edit navigate node' , we set the variable input variable url \nmsg.url = msg.var.CVMP2AppliConnexion + \"/index.html#/orchestration/run\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 830,
        "y": 200,
        "wires": [
            [
                "322e4e26.82398a"
            ]
        ]
    },
    {
        "id": "95bd7987.23b008",
        "type": "delay",
        "z": "9d071bf6.10a1e8",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 490,
        "y": 260,
        "wires": [
            [
                "9f99950f.5fa51"
            ]
        ]
    },
    {
        "id": "8d68df23.10cd1",
        "type": "function",
        "z": "9d071bf6.10a1e8",
        "name": "Set delay arround 2s",
        "func": "msg.delay = msg.var.delayArround2s *2000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 310,
        "y": 260,
        "wires": [
            [
                "95bd7987.23b008"
            ]
        ]
    },
    {
        "id": "70dd3394.af9f0c",
        "type": "delay",
        "z": "9d071bf6.10a1e8",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1070,
        "y": 100,
        "wires": [
            [
                "5cdb7419.31c4a4"
            ]
        ]
    },
    {
        "id": "bf9143c.434f8c",
        "type": "function",
        "z": "9d071bf6.10a1e8",
        "name": "Set delay arround 2s",
        "func": "msg.delay = msg.var.delayArround2s *2000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 870,
        "y": 100,
        "wires": [
            [
                "70dd3394.af9f0c"
            ]
        ]
    },
    {
        "id": "d94b19c7.024ce8",
        "type": "delay",
        "z": "9d071bf6.10a1e8",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1350,
        "y": 200,
        "wires": [
            [
                "cf0c5479.221848"
            ]
        ]
    },
    {
        "id": "10435fd9.dc7a18",
        "type": "function",
        "z": "9d071bf6.10a1e8",
        "name": "Set delay arround 2s",
        "func": "msg.delay = msg.var.delayArround2s *2000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1150,
        "y": 200,
        "wires": [
            [
                "d94b19c7.024ce8"
            ]
        ]
    },
    {
        "id": "99a08ee9.28f2c",
        "type": "delay",
        "z": "9d071bf6.10a1e8",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2030,
        "y": 200,
        "wires": [
            [
                "8c180a64.27fcf"
            ]
        ]
    },
    {
        "id": "7245d825.da57",
        "type": "function",
        "z": "9d071bf6.10a1e8",
        "name": "Set delay arround 2s",
        "func": "msg.delay = msg.var.delayArround2s *2000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1830,
        "y": 200,
        "wires": [
            [
                "99a08ee9.28f2c"
            ]
        ]
    },
    {
        "id": "cdeb221c.976f",
        "type": "comment",
        "z": "af30b276.c9bde8",
        "name": "SF Run CVMP Instanciation",
        "info": "",
        "x": 180,
        "y": 40,
        "wires": []
    },
    {
        "id": "979d4671.34de6",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click On Service Orchestration",
        "selector": "xpath",
        "target": "//*[@translate=\"manage_myAccount_serviceOrchestrate_menu\"]",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 270,
        "y": 180,
        "wires": [
            [
                "db6ae407.cba758"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ]
    },
    {
        "id": "db6ae407.cba758",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click On Process Management",
        "selector": "xpath",
        "target": "//*[@ng-click=\"changeNavBar($event,'/orchestration/run')\"]",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 590,
        "y": 180,
        "wires": [
            [
                "92588686.f5b6a"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ]
    },
    {
        "id": "7ca2eb05.446234",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click On Process Basic Europe",
        "selector": "xpath",
        "target": "//*[@ng-bind=\"project.projectName\" and text()=\"Process_Basic_Europe\"]",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 1280,
        "y": 180,
        "wires": [
            [
                "5c85d14a.b79988"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ]
    },
    {
        "id": "a570492d.887828",
        "type": "function",
        "z": "af30b276.c9bde8",
        "name": "Set workflow var into Target",
        "func": "// Insert param for next node to target in order to find the button on screen\nmsg.target = \"//*[@title='\" + msg.var.workflow + \"']/../following-sibling::td[3]/div/div/span[@ng-click='startProcess(flow.processName, flow.version)']/*[@class='iot-svg-icon']\"\nreturn msg;",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 260,
        "y": 240,
        "wires": [
            [
                "2d3dc775.dd5eb"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ]
    },
    {
        "id": "a49f8670.ac1638",
        "type": "function",
        "z": "af30b276.c9bde8",
        "name": "[Log] Check Parameters",
        "func": "if (!msg.var.workflow) {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Check parameters\",\n        \"status\" : \"Missing workflow parameter\"}\n    );\n    node.error(\"Missing workflow parameter\");\n    return [null, msg];\n}\n\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 470,
        "y": 120,
        "wires": [
            [
                "1ca14e7a.38f1c2"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ],
        "outputLabels": [
            "error",
            "OK"
        ]
    },
    {
        "id": "564c86fd.84dae",
        "type": "function",
        "z": "af30b276.c9bde8",
        "name": "[Log] Start workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Start subflow 'SF Run CVMP Instanciation'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 230,
        "y": 120,
        "wires": [
            [
                "a49f8670.ac1638"
            ]
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "66b6fc42.2fa3d4",
        "type": "function",
        "z": "af30b276.c9bde8",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Run CVMP Instanciation : \",\n        \"status\" : \"KO \" + JSON.stringify(msg.error)\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"SF Run CVMP Instanciation : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 220,
        "y": 380,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "831e8caa.fa2ef8",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click On Start Instantiation button",
        "selector": "xpath",
        "target": "",
        "timeout": 15000,
        "waitFor": "2000",
        "clickOn": false,
        "x": 590,
        "y": 640,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "fb45ec19.0d72b",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click On AVMS Name",
        "selector": "xpath",
        "target": "//*[@title=\"avmsName\"]/../following-sibling::div/span",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 1160,
        "y": 260,
        "wires": [
            [
                "1f8b26bb.140789"
            ],
            [
                "b8209289.29f28"
            ]
        ]
    },
    {
        "id": "1f8b26bb.140789",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click On AVMS",
        "selector": "xpath",
        "target": "//*[@ng-click= \"changeAVMSName(opt)\"]",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 1380,
        "y": 260,
        "wires": [
            [
                "5303332d.920ccc"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ]
    },
    {
        "id": "5303332d.920ccc",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click On AVMS Type",
        "selector": "xpath",
        "target": "//*[@title=\"avmsType\"]/../following-sibling::div/span",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 1640,
        "y": 260,
        "wires": [
            [
                "52b96078.10a74"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ]
    },
    {
        "id": "52b96078.10a74",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click On AVMS",
        "selector": "xpath",
        "target": "//*[@ng-click= \"changeAVMSType(opt)\"]",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 1860,
        "y": 260,
        "wires": [
            [
                "876ca120.46d958"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ]
    },
    {
        "id": "876ca120.46d958",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click On OK",
        "selector": "xpath",
        "target": "//*[@ng-click= \"startProcessConfirm()\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 550,
        "y": 320,
        "wires": [
            [
                "86547286.7a8a28"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ]
    },
    {
        "id": "f8084f84.2f3d48",
        "type": "function",
        "z": "af30b276.c9bde8",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF Run CVMP Instanciation'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1390,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "e29811af.7922b8",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click on OK to validate",
        "selector": "xpath",
        "target": "//*[@ng-click= \"close()\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 1150,
        "y": 320,
        "wires": [
            [
                "f8084f84.2f3d48"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ]
    },
    {
        "id": "26413985.d4c3e6",
        "type": "function",
        "z": "af30b276.c9bde8",
        "name": "Delete msg.error",
        "func": "msg.error = undefined;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1630,
        "y": 360,
        "wires": [
            [
                "11a58f33.5f5721"
            ]
        ]
    },
    {
        "id": "1ca14e7a.38f1c2",
        "type": "function",
        "z": "af30b276.c9bde8",
        "name": "Init Retry value",
        "func": "msg.retry = 0;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 720,
        "y": 120,
        "wires": [
            [
                "979d4671.34de6"
            ]
        ],
        "outputLabels": [
            "error",
            ""
        ]
    },
    {
        "id": "b8209289.29f28",
        "type": "function",
        "z": "af30b276.c9bde8",
        "name": "Retry Policy",
        "func": "msg.retry+=1;\nnode.warn(\"retry : \" + msg.retry);\nif (msg.retry < 10){\n    msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Retry attempt\",\n    \"status\" : \"OK. \" + \"Retry attempt number \" + msg.retry + \" for 'SF Function Check Message Trace and Id'\"}\n);\nreturn [msg, null];\n} else {\n    return [null, msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "x": 1450,
        "y": 360,
        "wires": [
            [
                "26413985.d4c3e6"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ],
        "outputLabels": [
            "error",
            ""
        ],
        "icon": "font-awesome/fa-history"
    },
    {
        "id": "11a58f33.5f5721",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click on cancel",
        "selector": "xpath",
        "target": "//div[@id=\"showStartDialog\"]//span[@translate=\"common_cancel_button\"]",
        "timeout": 15000,
        "waitFor": 500,
        "x": 1820,
        "y": 360,
        "wires": [
            [
                "20be43da.89e1d4"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ]
    },
    {
        "id": "168f2824.efd9b8",
        "type": "switch",
        "z": "af30b276.c9bde8",
        "name": "",
        "property": "var.workflow",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Process_Basic_Europe-BSRF_REG_Europe",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 950,
        "y": 240,
        "wires": [
            [
                "c3ceecc5.7d356"
            ],
            [
                "fb45ec19.0d72b"
            ]
        ]
    },
    {
        "id": "c3ceecc5.7d356",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click On redBendName Name",
        "selector": "xpath",
        "target": "(//form[@name=\"startProcessForm\"]//div[@class=\"dropdown select-dropdown\"])[1]",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 1190,
        "y": 220,
        "wires": [
            [
                "9a6d4e1d.ef225"
            ],
            [
                "b8209289.29f28"
            ]
        ]
    },
    {
        "id": "9a6d4e1d.ef225",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click On redbend_swm",
        "selector": "xpath",
        "target": "//*[@ng-click= \"changeRedBendName(opt)\"]",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 1470,
        "y": 220,
        "wires": [
            [
                "82a8b8f5.bce838"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ]
    },
    {
        "id": "82a8b8f5.bce838",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click On redbendType",
        "selector": "xpath",
        "target": "//*[@title=\"redBendType\"]/../following-sibling::div/span",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 1700,
        "y": 220,
        "wires": [
            [
                "305769bf.969086"
            ],
            []
        ]
    },
    {
        "id": "305769bf.969086",
        "type": "click-on",
        "z": "af30b276.c9bde8",
        "name": "Click On redbend_swm",
        "selector": "xpath",
        "target": "//*[@ng-click= \"changeRedBendType(opt)\"]",
        "timeout": 15000,
        "waitFor": "1000",
        "x": 1950,
        "y": 220,
        "wires": [
            [
                "876ca120.46d958"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ]
    },
    {
        "id": "259703da.0afccc",
        "type": "status",
        "z": "af30b276.c9bde8",
        "name": "",
        "scope": null,
        "x": 420,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "20be43da.89e1d4",
        "type": "subflow:9d071bf6.10a1e8",
        "z": "af30b276.c9bde8",
        "name": "",
        "x": 810,
        "y": 540,
        "wires": [
            [
                "168f2824.efd9b8"
            ],
            [
                "66b6fc42.2fa3d4"
            ]
        ]
    },
    {
        "id": "2d3dc775.dd5eb",
        "type": "function",
        "z": "af30b276.c9bde8",
        "name": "Set delay arround 5s",
        "func": "msg.delay = msg.var.delayArround5s *5000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 490,
        "y": 240,
        "wires": [
            [
                "6ccdf9e6.0e0778"
            ]
        ]
    },
    {
        "id": "6ccdf9e6.0e0778",
        "type": "delay",
        "z": "af30b276.c9bde8",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 670,
        "y": 240,
        "wires": [
            [
                "20be43da.89e1d4"
            ]
        ]
    },
    {
        "id": "86547286.7a8a28",
        "type": "function",
        "z": "af30b276.c9bde8",
        "name": "Set delay arround 2s",
        "func": "msg.delay = msg.var.delayArround2s *2000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 750,
        "y": 320,
        "wires": [
            [
                "f24edcff.45152"
            ]
        ]
    },
    {
        "id": "f24edcff.45152",
        "type": "delay",
        "z": "af30b276.c9bde8",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 950,
        "y": 320,
        "wires": [
            [
                "e29811af.7922b8"
            ]
        ]
    },
    {
        "id": "92588686.f5b6a",
        "type": "function",
        "z": "af30b276.c9bde8",
        "name": "Set delay arround 2s",
        "func": "msg.delay = msg.var.delayArround2s *2000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 850,
        "y": 180,
        "wires": [
            [
                "763e423a.afc64c"
            ]
        ]
    },
    {
        "id": "763e423a.afc64c",
        "type": "delay",
        "z": "af30b276.c9bde8",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1050,
        "y": 180,
        "wires": [
            [
                "7ca2eb05.446234"
            ]
        ]
    },
    {
        "id": "5c85d14a.b79988",
        "type": "function",
        "z": "af30b276.c9bde8",
        "name": "Set delay arround 2s",
        "func": "msg.delay = msg.var.delayArround2s *2000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1510,
        "y": 160,
        "wires": [
            [
                "235ffe1.0a39b02"
            ]
        ]
    },
    {
        "id": "235ffe1.0a39b02",
        "type": "delay",
        "z": "af30b276.c9bde8",
        "name": "variableDelay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1690,
        "y": 160,
        "wires": [
            [
                "a570492d.887828"
            ]
        ]
    },
    {
        "id": "af0a9281.d5b5f8",
        "type": "http in",
        "z": "8867c178.8bd218",
        "name": "",
        "url": "/DevTest/SFTPUpload",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 63,
        "wires": [
            [
                "5bf8e011.75883"
            ]
        ]
    },
    {
        "id": "ebd81b96.574f78",
        "type": "change",
        "z": "8867c178.8bd218",
        "name": "Set payload to var",
        "rules": [
            {
                "t": "set",
                "p": "var",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 379,
        "y": 148,
        "wires": [
            [
                "fe8bf802.22c198"
            ]
        ]
    },
    {
        "id": "fe8bf802.22c198",
        "type": "function",
        "z": "8867c178.8bd218",
        "name": "[Log] Init traces",
        "func": "msg.traces = [];\nmsg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Instanciation vehicule in CORVET : Start \",\n    \"status\" : \"OK\"}\n);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 150,
        "y": 236,
        "wires": [
            [
                "62459ddd.ebc6dc"
            ]
        ]
    },
    {
        "id": "5bf8e011.75883",
        "type": "change",
        "z": "8867c178.8bd218",
        "name": "Set body to payload",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "req.body",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 159,
        "y": 148,
        "wires": [
            [
                "ebd81b96.574f78"
            ]
        ]
    },
    {
        "id": "62459ddd.ebc6dc",
        "type": "switch",
        "z": "8867c178.8bd218",
        "name": "Asynchrone Switch",
        "property": "var.asynchronousMode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 158,
        "y": 343,
        "wires": [
            [
                "bf7d15b1.742eb8",
                "bed097d7.47098"
            ],
            [
                "bed097d7.47098"
            ],
            [
                "42cb6dd.763e714"
            ]
        ],
        "outputLabels": [
            "asynchrone",
            "synchrone",
            ""
        ]
    },
    {
        "id": "42cb6dd.763e714",
        "type": "function",
        "z": "8867c178.8bd218",
        "name": "[Log] Error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Instanciation vehicule in CORVET: Define aysnchrone mode\" + JSON.stringify(msg.error),\n    \"status\" : \"KO\"\n})\nreturn msg;   \n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 458,
        "y": 383,
        "wires": [
            [
                "d42a1581.ccfc28"
            ]
        ]
    },
    {
        "id": "b0b4be66.6ecc28",
        "type": "subflow:b95a4c68.bdfef",
        "z": "8867c178.8bd218",
        "name": "",
        "env": [],
        "x": 708,
        "y": 343,
        "wires": []
    },
    {
        "id": "5ea056f5.1e2898",
        "type": "comment",
        "z": "8867c178.8bd218",
        "name": "Result Backend server to test asynchrone mode",
        "info": "",
        "x": 780,
        "y": 280,
        "wires": []
    },
    {
        "id": "bf7d15b1.742eb8",
        "type": "subflow:6f736668.4c2da8",
        "z": "8867c178.8bd218",
        "name": "",
        "env": [],
        "x": 488,
        "y": 323,
        "wires": []
    },
    {
        "id": "e8d1fa73.a5959",
        "type": "comment",
        "z": "8867c178.8bd218",
        "name": "Http Post Request for Automatic Test",
        "info": "",
        "x": 210,
        "y": 23,
        "wires": []
    },
    {
        "id": "80c8a0a7.b09ec8",
        "type": "comment",
        "z": "8867c178.8bd218",
        "name": "Initialize variables",
        "info": "",
        "x": 149,
        "y": 108,
        "wires": []
    },
    {
        "id": "5e2abf93.d70a5",
        "type": "comment",
        "z": "8867c178.8bd218",
        "name": "Innitialize log trace",
        "info": "",
        "x": 160,
        "y": 196,
        "wires": []
    },
    {
        "id": "9313cca7.a81aa8",
        "type": "comment",
        "z": "8867c178.8bd218",
        "name": "Define behaviour Synchronous ASynchronous",
        "info": "",
        "x": 238,
        "y": 290,
        "wires": []
    },
    {
        "id": "bc89251.2c952d8",
        "type": "comment",
        "z": "8867c178.8bd218",
        "name": "Login to CVMP and delete existing  vin",
        "info": "",
        "x": 217,
        "y": 427,
        "wires": []
    },
    {
        "id": "f89caed.d994e5",
        "type": "subflow:119d616e.e33e0f",
        "z": "8867c178.8bd218",
        "name": "SF Delete a Vehicule (CVMP)",
        "env": [],
        "x": 698,
        "y": 463,
        "wires": [
            [
                "2cab1baa.b906fc"
            ],
            [
                "9d0da4cd.2aabd"
            ]
        ]
    },
    {
        "id": "bed097d7.47098",
        "type": "subflow:29b22af0.17685e",
        "z": "8867c178.8bd218",
        "name": "",
        "env": [],
        "x": 178,
        "y": 463,
        "wires": [
            [
                "41da0117.2d87e"
            ],
            [
                "78de111.2784b7"
            ]
        ]
    },
    {
        "id": "41da0117.2d87e",
        "type": "subflow:b19915ad.889d48",
        "z": "8867c178.8bd218",
        "name": "",
        "env": [],
        "x": 418,
        "y": 463,
        "wires": [
            [
                "f89caed.d994e5"
            ],
            [
                "190ca58f.e34fc2"
            ]
        ]
    },
    {
        "id": "61b4686a.0a4548",
        "type": "comment",
        "z": "8867c178.8bd218",
        "name": "Upload Corvet file to instanciate vehicule",
        "info": "",
        "x": 218,
        "y": 566,
        "wires": []
    },
    {
        "id": "af53cf82.3b6ce",
        "type": "comment",
        "z": "8867c178.8bd218",
        "name": "Verify that the vehicle has been instanciated with ATB information",
        "info": "",
        "x": 298,
        "y": 752,
        "wires": []
    },
    {
        "id": "7880f10f.f9e64",
        "type": "subflow:50a6095e.4fbe9",
        "z": "8867c178.8bd218",
        "name": "",
        "env": [],
        "x": 198,
        "y": 863,
        "wires": [
            [
                "9f5ed109.73096"
            ],
            [
                "d6586f07.b3e2f"
            ]
        ]
    },
    {
        "id": "78de111.2784b7",
        "type": "function",
        "z": "8867c178.8bd218",
        "name": "[Log] Error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Instanciation vehicule in CORVET: connect to CVMP\" + JSON.stringify(msg.error),\n    \"status\" : \"KO\"\n})\nreturn msg;   \n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 398,
        "y": 514,
        "wires": [
            [
                "9d0da4cd.2aabd"
            ]
        ]
    },
    {
        "id": "190ca58f.e34fc2",
        "type": "function",
        "z": "8867c178.8bd218",
        "name": "[Log] Error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Instanciation vehicule in CORVET: Go to Dashboard 23\" + JSON.stringify(msg.error),\n    \"status\" : \"KO\"\n})\nreturn msg;   \n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 638,
        "y": 514,
        "wires": [
            [
                "9d0da4cd.2aabd"
            ]
        ]
    },
    {
        "id": "79468b8a.675964",
        "type": "function",
        "z": "8867c178.8bd218",
        "name": "[Log] Error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Instanciation vehicule in CORVET: Upload CORVET File \" + JSON.stringify(msg.error),\n    \"status\" : \"KO\"\n})\nreturn msg;   \n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 570,
        "y": 600,
        "wires": [
            [
                "4bac0d09.d6d9ac"
            ]
        ]
    },
    {
        "id": "d6586f07.b3e2f",
        "type": "function",
        "z": "8867c178.8bd218",
        "name": "[Log] Error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Check vin information: Verify instanciation\" + JSON.stringify(msg.error),\n    \"status\" : \"KO\"\n})\nreturn msg;   \n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 468,
        "y": 903,
        "wires": [
            [
                "cae4176b.b2fce"
            ]
        ]
    },
    {
        "id": "a84e0f5a.493e",
        "type": "subflow:9f6908ed.bb34c8",
        "z": "8867c178.8bd218",
        "name": "",
        "env": [],
        "x": 878,
        "y": 773,
        "wires": [
            [
                "5b8b7452.c39424"
            ]
        ]
    },
    {
        "id": "5b8b7452.c39424",
        "type": "subflow:1cc5ec6.dfaef14",
        "z": "8867c178.8bd218",
        "name": "",
        "env": [],
        "x": 938,
        "y": 853,
        "wires": [
            [
                "fcfd195a.b292b8"
            ]
        ]
    },
    {
        "id": "fcfd195a.b292b8",
        "type": "subflow:ecccc741.98fb58",
        "z": "8867c178.8bd218",
        "name": "",
        "env": [],
        "x": 888,
        "y": 933,
        "wires": []
    },
    {
        "id": "78c76093.83ad18",
        "type": "comment",
        "z": "8867c178.8bd218",
        "name": "Sceeshot in case of error with brother",
        "info": "",
        "x": 958,
        "y": 733,
        "wires": []
    },
    {
        "id": "d77bea2a.d430c8",
        "type": "comment",
        "z": "8867c178.8bd218",
        "name": "Manage end of scenario with or without brother",
        "info": "",
        "x": 988,
        "y": 813,
        "wires": []
    },
    {
        "id": "26c8507f.ad533",
        "type": "comment",
        "z": "8867c178.8bd218",
        "name": "Http Response of Post Automatic Test : Synchrone or asynchrone",
        "info": "",
        "x": 1038,
        "y": 893,
        "wires": []
    },
    {
        "id": "30e9c2fa.7114e6",
        "type": "link in",
        "z": "8867c178.8bd218",
        "name": "In Error",
        "links": [
            "9d0da4cd.2aabd",
            "4bac0d09.d6d9ac",
            "cae4176b.b2fce",
            "d42a1581.ccfc28",
            "d90e1b9e.bf097"
        ],
        "x": 753,
        "y": 764,
        "wires": [
            [
                "a84e0f5a.493e"
            ]
        ]
    },
    {
        "id": "4bac0d09.d6d9ac",
        "type": "link out",
        "z": "8867c178.8bd218",
        "name": "Out Error",
        "links": [
            "30e9c2fa.7114e6"
        ],
        "x": 795,
        "y": 600,
        "wires": []
    },
    {
        "id": "9d0da4cd.2aabd",
        "type": "link out",
        "z": "8867c178.8bd218",
        "name": "Out Error",
        "links": [
            "30e9c2fa.7114e6"
        ],
        "x": 795,
        "y": 560,
        "wires": []
    },
    {
        "id": "cae4176b.b2fce",
        "type": "link out",
        "z": "8867c178.8bd218",
        "name": "Out Error",
        "links": [
            "30e9c2fa.7114e6"
        ],
        "x": 615,
        "y": 920,
        "wires": []
    },
    {
        "id": "d42a1581.ccfc28",
        "type": "link out",
        "z": "8867c178.8bd218",
        "name": "Out Error",
        "links": [
            "30e9c2fa.7114e6"
        ],
        "x": 583,
        "y": 383,
        "wires": []
    },
    {
        "id": "2cab1baa.b906fc",
        "type": "subflow:381b8fc4.dee9d",
        "z": "8867c178.8bd218",
        "name": "",
        "env": [],
        "x": 228,
        "y": 603,
        "wires": [
            [
                "8c8dae91.192378"
            ],
            [
                "79468b8a.675964"
            ]
        ]
    },
    {
        "id": "8c8dae91.192378",
        "type": "function",
        "z": "8867c178.8bd218",
        "name": "Set time",
        "func": "// Set the test start time into msg.time and msg.hour\ndate = new Date();\n\nyear = date.getFullYear();\nmonth = date.getMonth() + 1;\nday = date.getDate();\n\nif (month < 10)\n    month = \"0\" + month\nif (day < 10)\n    day = \"0\" + day\n\nhours = date.getHours();\nminutes = date.getMinutes();\nseconds = date.getSeconds();\n\nif (hours < 10)\n    hours = \"0\" + hours\nif (minutes < 10)\n    minutes = \"0\" + minutes\nif (seconds < 10)\n    seconds = \"0\" + seconds\n\nmsg.time =  year + \"-\" + month + \"-\" + day + \" \" + hours + \":\" + minutes + \":\" + seconds;\nmsg.hours = hours\nmsg.minutes = minutes\nmsg.seconds = seconds\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 138,
        "y": 703,
        "wires": [
            [
                "13a5e760.46d979"
            ]
        ]
    },
    {
        "id": "13a5e760.46d979",
        "type": "subflow:af30b276.c9bde8",
        "z": "8867c178.8bd218",
        "name": "",
        "env": [],
        "x": 378,
        "y": 703,
        "wires": [
            [
                "7880f10f.f9e64"
            ],
            [
                "335bf6e9.ca8b32"
            ]
        ]
    },
    {
        "id": "4b8f9125.37918",
        "type": "comment",
        "z": "8867c178.8bd218",
        "name": "- Start the registration process in \"Service Orchestration\" > \"Process Management\">Process_Basic_Europe-ATB2_REG_Europe>Start",
        "info": "",
        "x": 488,
        "y": 663,
        "wires": []
    },
    {
        "id": "335bf6e9.ca8b32",
        "type": "function",
        "z": "8867c178.8bd218",
        "name": "[Log] Error",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Instanciation vehicule in CORVET: Instanciate vechile\" + JSON.stringify(msg.error),\n    \"status\" : \"KO\"\n})\nreturn msg;   \n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 598,
        "y": 703,
        "wires": [
            [
                "d90e1b9e.bf097"
            ]
        ]
    },
    {
        "id": "d90e1b9e.bf097",
        "type": "link out",
        "z": "8867c178.8bd218",
        "name": "Out Error",
        "links": [
            "30e9c2fa.7114e6"
        ],
        "x": 743,
        "y": 703,
        "wires": []
    },
    {
        "id": "8cafa641.2e374",
        "type": "function",
        "z": "50a6095e.4fbe9",
        "name": "[Log] End Workflow",
        "func": "msg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"End subflow 'SF Go to vehicle ID card'\",\n    \"status\" : \"OK\"}\n);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 470,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "47ecb87c.d4756",
        "type": "function",
        "z": "50a6095e.4fbe9",
        "name": "[Log] Error log",
        "func": "if (msg.error)\n{\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Go to vehicule id card : \",\n        \"status\" : \"KO \" + msg.error\n    });\n} else {\n    msg.traces.push({\n        \"time\" : new Date(), \n        \"message\" : \"Go to vehicule id card : \",\n        \"status\" : \"KO\" \n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 300,
        "wires": [
            []
        ],
        "outputLabels": [
            "error"
        ]
    },
    {
        "id": "e3704a74.071848",
        "type": "comment",
        "z": "8867c178.8bd218",
        "name": "Pre-requisite :  Acces CVMP , WinSFP key ssh",
        "info": "",
        "x": 630,
        "y": 23,
        "wires": []
    },
    {
        "id": "f79de985.7d6528",
        "type": "debug",
        "z": "381b8fc4.dee9d",
        "name": "debug output 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 860,
        "y": 360,
        "wires": []
    },
    {
        "id": "fb4b107d.6e19e",
        "type": "debug",
        "z": "381b8fc4.dee9d",
        "name": "debug output 2",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 860,
        "y": 400,
        "wires": []
    },
    {
        "id": "23b038b5.b463a8",
        "type": "debug",
        "z": "381b8fc4.dee9d",
        "name": "debug output 3",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 860,
        "y": 440,
        "wires": []
    },
    {
        "id": "9f5ed109.73096",
        "type": "function",
        "z": "8867c178.8bd218",
        "name": "[Log] End traces",
        "func": "\nmsg.traces.push({\n    \"time\" : new Date(), \n    \"message\" : \"Instanciation vehicule in CORVET : End\",\n    \"status\" : \"OK\"}\n);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 580,
        "y": 840,
        "wires": [
            [
                "5b8b7452.c39424"
            ]
        ]
    },
    {
        "id": "9f334bae.2c4bc8",
        "type": "switch",
        "z": "381b8fc4.dee9d",
        "name": "Test code return",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 860,
        "y": 280,
        "wires": [
            [],
            []
        ]
    }
]